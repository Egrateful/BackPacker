@model MSIT11404project1.Areas.Blog.BlogViewModel.BlogOneVM


@{
    ViewBag.Title = "BlogOne";
    Layout = "~/Views/Shared/_LayoutPro.cshtml";
}
@section style{
<link href="~/jquery-ui-1.12.1.custom/jquery-ui.min.css" rel="stylesheet" />
<link href="~/Areas/Blog/tkahn-Smooth-Div-Scroll-1c3b3a6/css/smoothDivScroll.css" rel="stylesheet" />
<link href="~/Areas/Blog/hover-min.css" rel="stylesheet" />
    <style>
        a {
            text-decoration:none;
            color:black;
        }
            a:hover {text-decoration:none;
            }
        table {
                     display : inline-block;
             white-space : nowrap;
             overflow : hidden;
              text-overflow : ellipsis;
        }
        msgdiv :hover {
        background-color:#ffe6b7
        }
        tr:hover {
        background-color:white;
        }
        th {
        text-shadow:7px 7px 3px gray
        }
        .block {
        background-color:rgba(255, 190, 72, 0.60);
       border:1px white solid;
       border-radius:5px;
       margin-top:15px;
       padding:15px;
        }
        .blockR {
      background-color:rgba(255, 190, 72, 0.60);
        border:1px white solid;
        border-radius:5px;
        margin-top:15px;
        }
        .hideT {
             display : inline-block;
             white-space : nowrap;
             overflow : hidden;
              text-overflow : ellipsis;
        }


         .title {
        font-size:1.75em;
         display : inline-block;
             white-space : nowrap;
             overflow : hidden;
              text-overflow : ellipsis;
              width:85%;
        }
           .hee {
        height:205px;
        background:no-repeat center center;
        background-size:cover;
        border:1px white solid;
        }
        	#makeMeScrollable
		{
			width:100%;
			height: 330px;
			position: relative;
		}
		
		#makeMeScrollable div.scrollableArea img
		{
			position: relative;
			float: left;
			margin: 0;
			padding: 0;
			-webkit-user-select: none;
			-moz-user-select: none;
			user-select: none;
		}

        .msgsHead {
        margin-left:20px;
        margin-bottom:15px;
        }
        .articleDiv {
        margin:0px;
        width:95%;
        }
        .botborder {
        border-bottom:1px gray solid;
        padding-bottom:5px;
        }
        .fortd td {
        margin:5px 10px 1px 0;
        padding-right:15px;
        padding-left:8px;
        height:25px;
        }
      
        .msg {
        resize:none;
        width:80%;
        left:20px;
        top:0;
        margin-right:20px
        }
        .CoverImg {
        width:100%;
        height:200px;
        z-index:5;
        margin-bottom:10px;
        border-radius:5px;
        }
        .title {
        font-size:1.75em;
        }
                    .title span {
             display : inline-block;
             white-space : nowrap;
             overflow : hidden;
              text-overflow : ellipsis;
              width:100%;
            }
        .headPP {
        height:30px;
        width:30px;
        border-radius:50%;
        }
         .docs  {
        width:245px;
        height:350px;
        margin:5px 5px;
        background-color:white;
        border: solid #808080 1px;
        border-radius:5px;
        color:black;
        }
            .docs:hover {
                    border: solid #ffee34 1.5px;
            }
            .docs:active {
            color:aquamarine;
            }
             .docs li
             {
                list-style-type:none;
            }

        .tag1 {
            top:150px;
            left:10px;
            position:absolute;
            z-index:10;
            background-color:#ffd800;
            border:1px white solid;
            border-radius:2px;
            padding:1px;

        }
        .tag2 {
            top:177px;
            left:10px;
            position:absolute;
            z-index:10;
            background-color:#ffd800;
            border:1px white solid;
            border-radius:2px;
            padding:1px;
        }

        articleDiv {
        width:98%;
        
        }
        .tag {
        }

        .ShowDivBG {
       
        height:350px;
        background:no-repeat center center;
        background-size:cover;
        }

        .eachIMG{
            height:500px;
            border:5px white solid;
            margin-right:15px;
        }
    </style>
    
    }


<div id="makeMeScrollable" style="height:500px"  >
    @foreach (var item in ViewBag.Pics)
    {
        <img class="eachIMG" data-div="@item.PhotoName@item.PhotoID" title="@item.PhotoName" src="@Url.Action("GetImage2",new { id=item.PhotoID})" />
        <div id="@item.PhotoName@item.PhotoID" class="DivForIMG">
            <img src="@Url.Action("GetImage2",new { id=item.PhotoID})"/>
        </div>
    }
    
</div>

<div class="row">
    <div class="col-lg-8 ">
        <div class="block">
            <h1 class="botborder"><b>@Model.doc.Title</b></h1>
            <div class="row" style="padding-bottom:5px">
                <div class="tag col-xs-2">
                    地點：
                    @Html.DisplayFor(p => p.doc.PlaceForBlog.PlaceName)
                </div>
                <div class="tag col-xs-2">
                    分類：
                    @Html.DisplayFor(p => p.doc.Mood.MoodName)
                </div>
                <div class="col-xs-3">
                    撰寫時間：
                    @Html.DisplayFor(p => p.doc.CreateTime)
                </div>
                <div class="col-xs-3">
                    修改時間：
                    @Html.DisplayFor(p => p.doc.ModifyTime)
                </div>
            </div>
            <div class="botborder" style="border-top:1px gray solid">
                @Html.Raw(Model.doc.Article)

                <div class="fb-share-button" data-href="@Url.Action("BlogOne","Main",new { id = Model.doc.DocID })" data-layout="button" data-size="large" data-mobile-iframe="true"><a class="fb-xfbml-parse-ignore" target="_blank" href="https://www.facebook.com/sharer/sharer.php…">分享</a></div>
                <script>
                (function(d, s, id) {
                var js, fjs = d.getElementsByTagName(s)[0];
                if (d.getElementById(id)) return;
                js = d.createElement(s); js.id = id;
                js.src = "//connect.facebook.net/zh_TW/sdk.js#xfbml=1&version=v2.9&appId=702809643259614";
                fjs.parentNode.insertBefore(js, fjs);
                }(document, 'script', 'facebook-jssdk'));
                </script>
            </div>
        
            <div class="botborder">
                <h2>留言</h2>
                @foreach (var item in ViewBag.MSG)
                {
                    <div class="row msgsHead msgdiv" style="margin:5px 15px 5px 5px;box-shadow:gray 2px 2px">
                        <div>
                            <img class="headPP" src="@Url.Action("GetHeadPic",new { id=item.Nid})" />@item.Name ：
                        </div>
                        <div>
                            @item.Msg
                        </div>
                        <div>
                            @item.CTime
                        </div>
                    </div>
                }

           
                @if (Request.Cookies["MemberID"] != null)
                {
                    <form action="BlogOne" method="post">
                        <input type="hidden" value="@Model.doc.DocID" name="DocID" />
                        <div class="row">
                            <textarea rows="4" id="Msg1" name="Msg1" class="msg col-lg-11"></textarea>
                            <input class="btn col-lg-1" style="background-color:white;height:86px;top:0;margin-left:20px" type="submit" value="送出" />
                        </div>
                    </form>
                }
            </div>
        </div>
    

        <div>
            <h2>相關文章</h2>
            <div class="row">
                @foreach (var item in Model.AllTagDoc)
            {
                    <div class="bgg hvr-bob">
                        <a class="divlink" href="@Url.Action("BlogOne", new { id = item.DocID})">
                            <div class="text-center docs col-md-2">
                                <div class="text-center BotBorder">
                                    <div class="hee" style="background-image:url(@Url.Action("GetImage",new { id=item.DocID}))">
                                        <span class="tag1">@item.PlaceForBlog.PlaceName</span>
                                        <span class="tag2">@item.Mood.MoodName</span>
                                    </div>
                                </div>
                                <div class="BotBorder text-left">
                                    <ul>
                                        <li><span class="title">@item.Title</span></li>
                                    </ul>
                                </div>
                                <div class="row">
                                    <div class="col-lg-6 text-left"><img class="headPP" src="@Url.Action("GetHeadPic",new { id=item.Members.MemberID})" /> @item.Members.UserName</div>
                                </div>
                                <div>
                                    <div class="text-left">@item.CreateTime</div>
                                </div>
                                <div class="row">
                                    <div class="col-lg-6 text-left">瀏覽數：@item.Good</div>
                                    <div class="col-lg-6  text-right">留言數：@item.Msg.Count</div>
                                </div>
                              
                            </div>
                        </a>
                    </div>
                }
            </div>
        </div>
    </div>

    <div class="col-lg-4" >
        <div class="row" style="margin-top:15px">
            <div class="col-lg-3">
                <img style="height:120px;width:120px;border-radius:50%;" src="@Url.Action("GetHeadPic",new { id=Model.doc.Members.MemberID})"/>
            </div>
            <div class="col-lg-9">
                <ul style="font-size:120%">
                    <li><h3><label>作者資訊</label></h3></li>
                    <li>作者名稱： @Html.DisplayFor(p => p.OwnerName)</li>
                    <li>總文章數： @Html.DisplayFor(p => p.TotalOwnerDoc)</li>
                    <li>作者人氣： @Html.DisplayFor(p => p.TotalHotPoint)</li>
               </ul>
            </div>
          
        </div>
        <div class="fortd">
            <table>
                <tbody>
                    <tr>
                        <td width="5%"><h3 style="text-shadow:3px 3px 3px gray">作者最新文章</h3></td>
                        <td width="10%"> </td>
                        <td width="25%"> </td>
                    </tr>
                    @foreach (var item in Model.TheOwnerNewDoc)
                    {
                        <tr>
                            <td class="hideT" width="170px" >@Html.ActionLink(item.Title, "BlogOne", new { id = item.DocID }, new { })</td>
                            <td>人氣：@item.Good</td>
                            <td>(@item.CreateTime)</td>
                        </tr>
                    }
                    <tr>
                        <td><h3 style="text-shadow:3px 3px 3px gray">作者人氣文章</h3></td>
                        <td width="10%"></td>
                        <td width="25%"></td>
                    </tr>
                    @foreach (var item in Model.TheOwnerHotDoc)
                    {
                        <tr>
                            <td  class="hideT" width="170px" >@Html.ActionLink(item.Title,"BlogOne", new { id = item.DocID })</td>
                            <td>人氣：@item.Good</td>
                            <td>(@item.CreateTime)</td>
                        </tr>
                    }
                </tbody>
            </table>
        </div>
    </div>
</div>






   @section script{
<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.10.2/jquery.min.js" type="text/javascript"></script>
<script src="~/Areas/Blog/tkahn-Smooth-Div-Scroll-1c3b3a6/js/jquery-ui-1.10.3.custom.min.js"></script>
<script src="~/Areas/Blog/tkahn-Smooth-Div-Scroll-1c3b3a6/js/jquery.mousewheel.min.js"></script>
<script src="~/Areas/Blog/tkahn-Smooth-Div-Scroll-1c3b3a6/js/jquery.kinetic.min.js"></script>
<script src="~/Areas/Blog/tkahn-Smooth-Div-Scroll-1c3b3a6/js/jquery.smoothdivscroll-1.3-min.js"></script>
<script src="~/jquery-ui-1.12.1.custom/jquery-ui.min.js"></script>
       <script>
               $("#makeMeScrollable").smoothDivScroll({
                   autoScrollingMode: "always",
                   autoScrollingDirection: "endlessLoopRight",
                   autoScrollingStep: 1,
                   autoScrollingInterval: 25,
                   touchScrolling: true,
                   hotSpotScrolling: false,
               });

    
              $("#makeMeScrollable").bind("mouseover", function () {
                   $(this).smoothDivScroll("stopAutoScrolling");
               }).bind("mouseout", function () {
                   $(this).smoothDivScroll("startAutoScrolling");
               });


               $("div[class*='DivForIMG']").dialog({
                   width: $(window).width()-40,
                   height: $(window).height()-40,
                   autoOpen: false,
                   show: "blind",
                   title: "檢視原圖大小",
                   zIndex: 100
               });
               $("img[class='eachIMG']").dblclick(function () {
                   var te = $(this).attr("data-div")
                   var Ddiv = document.getElementById(te);
                    $(Ddiv).dialog("open");
                   return false;
               });
         </script>


}
