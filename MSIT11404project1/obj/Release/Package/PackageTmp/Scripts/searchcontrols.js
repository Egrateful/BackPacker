!function(t){function e(i){if(n[i])return n[i].exports;var r=n[i]={exports:{},id:i,loaded:!1};return t[i].call(r.exports,r,r.exports,e),r.loaded=!0,r.exports}var n={};return e.m=t,e.c=n,e.p="",e(0)}([function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}n(1);var r=n(5),o=i(r),s=n(59),a=i(s),l=n(62),u=i(l),c=n(73),h=i(c),d=n(18),p=i(d),g=n(74),f=i(g),m=n(75),y=n(72),v=i(y),b=n(79),C=i(b),D=n(11),w=i(D);!function(t){var e=t.Api.componentContext(),n=t.FSS.config,i=t.config||{},r=i.remoteConfiguration.FlightSearch||{},s=i.featureTests,l=new h.default,c=t.Api.queryParameters();v.default.set("endpoints.slipstream",(i.tracking||{}).grapplerSlipstreamEndpoint);var d=p.default.applyConfig(f.default);r.fss_sj_location_picker_enabled===!0&&d.switchOn("sj_location_picker_enabled"),_.contains(["b","c"],r.fss_bump_everywhere_in_suggestions)&&d.switchOn("bump_everywhere_in_suggestions",r.fss_bump_everywhere_in_suggestions),r.fss_new_skippy===!0&&d.switchOn("new_skippy"),_.contains(["a","b","c","d"],s.Fss_NewSkippy)&&d.switchOn("new_skippy_variant",s.Fss_NewSkippy);var g=(0,C.default)(r.fss_sc_days_till_travel),y=(0,C.default)(r.fss_sc_duration_of_travel),b=window.Skyscanner.SearchControlsParameters,D=b.outboundDate,S=b.inboundDate;_.assign(window.Skyscanner.SearchControlsParameters,{outboundAlts:{value:"true"===c.outboundaltsenabled},inboundAlts:{value:"true"===c.inboundaltsenabled},market:e.market,initWithCountries:r.fss_sc_init_with_country,outboundDate:D||w.default.getOutboundDate(g),inboundDate:S||w.default.getInboundDate(g,y)}),(0,a.default)(e,n,"Searchcontrols");var k=function(){u.default.setChannel(_.bind(l.channel,l)),u.default.setCommonPropertiesFn(m.getAll),l.channel("tracking-event").subscribe(function(e){t.Common.observer.publish("tracking-event",e)}),new o.default};t.documentReady.addHandler(function(){k()},t.documentReady.IMMEDIATE_EXECUTION)}(Skyscanner)},function(t,e,n){(function(t){"use strict";/*!
	 * typeahead.js 0.10.5
	 * https://github.com/twitter/typeahead.js
	 * Copyright 2013-2014 Twitter, Inc. and other contributors; Licensed MIT
	 *
	 * Skyscanner Modifications:
	 *  - Removed preventDefault from _onTabKeyed (https://external.skyscanner.co.uk/jira/browse/HSC-747)
	 **/
!function(e){var n=function(){return{isMsie:function(){return!!/(msie|trident)/i.test(navigator.userAgent)&&navigator.userAgent.match(/(msie |rv:)(\d+(.\d+)?)/i)[2]},isBlankString:function(t){return!t||/^\s*$/.test(t)},escapeRegExChars:function(t){return t.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&")},isString:function(t){return"string"==typeof t},isNumber:function(t){return"number"==typeof t},isArray:e.isArray,isFunction:e.isFunction,isObject:e.isPlainObject,isUndefined:function(t){return void 0===t},toStr:function(t){return n.isUndefined(t)||null===t?"":t+""},bind:e.proxy,each:function(t,n){function i(t,e){return n(e,t)}e.each(t,i)},map:e.map,filter:e.grep,every:function(t,n){var i=!0;return t?(e.each(t,function(e,r){if(!(i=n.call(null,r,e,t)))return!1}),!!i):i},some:function(t,n){var i=!1;return t?(e.each(t,function(e,r){if(i=n.call(null,r,e,t))return!1}),!!i):i},mixin:e.extend,getUniqueId:function(){var t=0;return function(){return t++}}(),templatify:function(t){function n(){return t+""}return e.isFunction(t)?t:n},defer:function(t){setTimeout(t,0)},debounce:function(t,e,n){var i,r;return function(){var o,s,a=this,l=arguments;return o=function(){i=null,n||(r=t.apply(a,l))},s=n&&!i,clearTimeout(i),i=setTimeout(o,e),s&&(r=t.apply(a,l)),r}},throttle:function(t,e){var n,i,r,o,s,a;return s=0,a=function(){s=new Date,r=null,o=t.apply(n,i)},function(){var l=new Date,u=e-(l-s);return n=this,i=arguments,u<=0?(clearTimeout(r),r=null,s=l,o=t.apply(n,i)):r||(r=setTimeout(a,u)),o}},noop:function(){}}}(),i=function(){return{dropdown:'<span class="tt-dropdown-menu"></span>',dataset:'<div class="tt-dataset-%CLASS%"></div>',suggestions:'<span class="tt-suggestions"></span>',suggestion:'<div class="tt-suggestion"></div>'}}(),r=function(){var t={hint:{position:"absolute",top:"0",left:"0",borderColor:"transparent",boxShadow:"none",opacity:"1"},input:{position:"relative",verticalAlign:"top",backgroundColor:"transparent"},inputWithNoHint:{position:"relative",verticalAlign:"top"},dropdown:{position:"absolute",left:"0",zIndex:"100",display:"none"},suggestions:{display:"block"},suggestion:{whiteSpace:"nowrap",cursor:"pointer"},suggestionChild:{whiteSpace:"normal"},ltr:{left:"0",right:"auto"},rtl:{left:"auto",right:" 0"}};return n.isMsie()&&n.mixin(t.input,{backgroundImage:"url(data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7)"}),n.isMsie()&&n.isMsie()<=7&&n.mixin(t.input,{marginTop:"-1px"}),t}(),o=function(){function t(t){t&&t.el||e.error("EventBus initialized without el"),this.$el=e(t.el)}var i="typeahead:";return n.mixin(t.prototype,{trigger:function(t){var e=[].slice.call(arguments,1);this.$el.trigger(i+t,e)}}),t}(),s=function(){function e(t,e,n,i){var r;if(!n)return this;for(e=e.split(u),n=i?l(n,i):n,this._callbacks=this._callbacks||{};r=e.shift();)this._callbacks[r]=this._callbacks[r]||{sync:[],async:[]},this._callbacks[r][t].push(n);return this}function n(t,n,i){return e.call(this,"async",t,n,i)}function i(t,n,i){return e.call(this,"sync",t,n,i)}function r(t){var e;if(!this._callbacks)return this;for(t=t.split(u);e=t.shift();)delete this._callbacks[e];return this}function o(t){var e,n,i,r,o;if(!this._callbacks)return this;for(t=t.split(u),i=[].slice.call(arguments,1);(e=t.shift())&&(n=this._callbacks[e]);)r=s(n.sync,this,[e].concat(i)),o=s(n.async,this,[e].concat(i)),r()&&c(o);return this}function s(t,e,n){function i(){for(var i,r=0,o=t.length;!i&&r<o;r+=1)i=t[r].apply(e,n)===!1;return!i}return i}function a(){var e;return e=window.setImmediate?function(e){t(function(){e()})}:function(t){setTimeout(function(){t()},0)}}function l(t,e){return t.bind?t.bind(e):function(){t.apply(e,[].slice.call(arguments,0))}}var u=/\s+/,c=a();return{onSync:i,onAsync:n,off:r,trigger:o}}(),a=function(t){function e(t,e,i){for(var r,o=[],s=0,a=t.length;s<a;s++)o.push(n.escapeRegExChars(t[s]));return r=i?"\\b("+o.join("|")+")\\b":"("+o.join("|")+")",e?RegExp(r):RegExp(r,"i")}var i={node:null,pattern:null,tagName:"strong",className:null,wordsOnly:!1,caseSensitive:!1};return function(r){function o(e){var n,i,o;return(n=a.exec(e.data))&&(o=t.createElement(r.tagName),r.className&&(o.className=r.className),i=e.splitText(n.index),i.splitText(n[0].length),o.appendChild(i.cloneNode(!0)),e.parentNode.replaceChild(o,i)),!!n}function s(t,e){for(var n,i=3,r=0;r<t.childNodes.length;r++)n=t.childNodes[r],n.nodeType===i?r+=e(n)?1:0:s(n,e)}var a;r=n.mixin({},i,r),r.node&&r.pattern&&(r.pattern=n.isArray(r.pattern)?r.pattern:[r.pattern],a=e(r.pattern,r.caseSensitive,r.wordsOnly),s(r.node,o))}}(window.document),l=function(){function t(t){var r,o,s,l,u=this;t=t||{},t.input||e.error("input is missing"),r=n.bind(this._onBlur,this),o=n.bind(this._onFocus,this),s=n.bind(this._onKeydown,this),l=n.bind(this._onInput,this),this.$hint=e(t.hint),this.$input=e(t.input).on("blur.tt",r).on("focus.tt",o).on("keydown.tt",s),0===this.$hint.length&&(this.setHint=this.getHint=this.clearHint=this.clearHintIfInvalid=n.noop),n.isMsie()?this.$input.on("keydown.tt keypress.tt cut.tt paste.tt",function(t){a[t.which||t.keyCode]||n.defer(n.bind(u._onInput,u,t))}):this.$input.on("input.tt",l),this.query=this.$input.val(),this.$overflowHelper=i(this.$input)}function i(t){return e('<pre aria-hidden="true"></pre>').css({position:"absolute",visibility:"hidden",whiteSpace:"pre",fontFamily:t.css("font-family"),fontSize:t.css("font-size"),fontStyle:t.css("font-style"),fontVariant:t.css("font-variant"),fontWeight:t.css("font-weight"),wordSpacing:t.css("word-spacing"),letterSpacing:t.css("letter-spacing"),textIndent:t.css("text-indent"),textRendering:t.css("text-rendering"),textTransform:t.css("text-transform")}).insertAfter(t)}function r(e,n){return t.normalizeQuery(e)===t.normalizeQuery(n)}function o(t){return t.altKey||t.ctrlKey||t.metaKey||t.shiftKey}var a;return a={9:"tab",27:"esc",37:"left",39:"right",13:"enter",38:"up",40:"down"},t.normalizeQuery=function(t){return(t||"").replace(/^\s*/g,"").replace(/\s{2,}/g," ")},n.mixin(t.prototype,s,{_onBlur:function(){this.resetInputValue(),this.trigger("blurred")},_onFocus:function(){this.trigger("focused")},_onKeydown:function(t){var e=a[t.which||t.keyCode];this._managePreventDefault(e,t),e&&this._shouldTrigger(e,t)&&this.trigger(e+"Keyed",t)},_onInput:function(){this._checkInputValue()},_managePreventDefault:function(t,e){var n,i,r;switch(t){case"tab":i=this.getHint(),r=this.getInputValue(),n=i&&i!==r&&!o(e);break;case"up":case"down":n=!o(e);break;default:n=!1}n&&e.preventDefault()},_shouldTrigger:function(t,e){var n;switch(t){case"tab":n=!o(e);break;default:n=!0}return n},_checkInputValue:function(){var t,e,n;t=this.getInputValue(),e=r(t,this.query),n=!!e&&this.query.length!==t.length,this.query=t,e?n&&this.trigger("whitespaceChanged",this.query):this.trigger("queryChanged",this.query)},focus:function(){this.$input.focus()},blur:function(){this.$input.blur()},getQuery:function(){return this.query},setQuery:function(t){this.query=t},getInputValue:function(){return this.$input.val()},setInputValue:function(t,e){this.$input.val(t),e?this.clearHint():this._checkInputValue()},resetInputValue:function(){this.setInputValue(this.query,!0)},getHint:function(){return this.$hint.val()},setHint:function(t){this.$hint.val(t)},clearHint:function(){this.setHint("")},clearHintIfInvalid:function(){var t,e,n,i;t=this.getInputValue(),e=this.getHint(),n=t!==e&&0===e.indexOf(t),i=""!==t&&n&&!this.hasOverflow(),!i&&this.clearHint()},getLanguageDirection:function(){return(this.$input.css("direction")||"ltr").toLowerCase()},hasOverflow:function(){var t=this.$input.width()-2;return this.$overflowHelper.text(this.getInputValue()),this.$overflowHelper.width()>=t},isCursorAtEnd:function(){var t,e,i;return t=this.$input.val().length,e=this.$input[0].selectionStart,n.isNumber(e)?e===t:!document.selection||(i=document.selection.createRange(),i.moveStart("character",-t),t===i.text.length)},destroy:function(){this.$hint.off(".tt"),this.$input.off(".tt"),this.$hint=this.$input=this.$overflowHelper=null}}),t}(),u=function(){function t(t){t=t||{},t.templates=t.templates||{},t.source||e.error("missing source"),t.name&&!u(t.name)&&e.error("invalid dataset name: "+t.name),this.query=null,this.highlight=!!t.highlight,this.name=t.name||n.getUniqueId(),this.source=t.source,this.displayFn=o(t.display||t.displayKey),this.templates=l(t.templates,this.displayFn),this.$el=e(i.dataset.replace("%CLASS%",this.name))}function o(t){function e(e){return e[t]}return t=t||"value",n.isFunction(t)?t:e}function l(t,e){function i(t){return"<p>"+e(t)+"</p>"}return{empty:t.empty&&n.templatify(t.empty),header:t.header&&n.templatify(t.header),footer:t.footer&&n.templatify(t.footer),suggestion:t.suggestion||i}}function u(t){return/^[_a-zA-Z0-9-]+$/.test(t)}var c="ttDataset",h="ttValue",d="ttDatum";return t.extractDatasetName=function(t){return e(t).data(c)},t.extractValue=function(t){return e(t).data(h)},t.extractDatum=function(t){return e(t).data(d)},n.mixin(t.prototype,s,{_render:function(t,o){function s(){return _.templates.empty({query:t,isEmpty:!0})}function l(){function s(t){var n;return n=e(i.suggestion).append(_.templates.suggestion(t)).data(c,_.name).data(h,_.displayFn(t)).data(d,t),n.children().each(function(){e(this).css(r.suggestionChild)}),n}var l,u;return l=e(i.suggestions).css(r.suggestions),u=n.map(o,s),l.append.apply(l,u),_.highlight&&a({className:"tt-highlight",node:l[0],pattern:t}),l}function u(){return _.templates.header({query:t,isEmpty:!g})}function p(){return _.templates.footer({query:t,isEmpty:!g})}if(this.$el){var g,_=this;this.$el.empty(),g=o&&o.length,!g&&this.templates.empty?this.$el.html(s()).prepend(_.templates.header?u():null).append(_.templates.footer?p():null):g&&this.$el.html(l()).prepend(_.templates.header?u():null).append(_.templates.footer?p():null),this.trigger("rendered")}},getRoot:function(){return this.$el},update:function(t){function e(e){n.canceled||t!==n.query||n._render(t,e)}var n=this;this.query=t,this.canceled=!1,this.source(t,e)},cancel:function(){this.canceled=!0},clear:function(){this.cancel(),this.$el.empty(),this.trigger("rendered")},isEmpty:function(){return this.$el.is(":empty")},destroy:function(){this.$el=null}}),t}(),c=function(){function t(t){var r,o,s,a=this;t=t||{},t.menu||e.error("menu is required"),this.isOpen=!1,this.isEmpty=!0,this.datasets=n.map(t.datasets,i),r=n.bind(this._onSuggestionClick,this),o=n.bind(this._onSuggestionMouseEnter,this),s=n.bind(this._onSuggestionMouseLeave,this),this.$menu=e(t.menu).on("click.tt",".tt-suggestion",r).on("mouseenter.tt",".tt-suggestion",o).on("mouseleave.tt",".tt-suggestion",s),n.each(this.datasets,function(t){a.$menu.append(t.getRoot()),t.onSync("rendered",a._onRendered,a)})}function i(t){return new u(t)}return n.mixin(t.prototype,s,{_onSuggestionClick:function(t){this.trigger("suggestionClicked",e(t.currentTarget))},_onSuggestionMouseEnter:function(t){this._removeCursor(),this._setCursor(e(t.currentTarget),!0)},_onSuggestionMouseLeave:function(){this._removeCursor()},_onRendered:function(){function t(t){return t.isEmpty()}this.isEmpty=n.every(this.datasets,t),this.isEmpty?this._hide():this.isOpen&&this._show(),this.trigger("datasetRendered")},_hide:function(){this.$menu.hide()},_show:function(){this.$menu.css("display","block")},_getSuggestions:function(){return this.$menu.find(".tt-suggestion")},_getCursor:function(){return this.$menu.find(".tt-cursor").first()},_setCursor:function(t,e){t.first().addClass("tt-cursor"),!e&&this.trigger("cursorMoved")},_removeCursor:function(){this._getCursor().removeClass("tt-cursor")},_moveCursor:function(t){var e,n,i,r;if(this.isOpen){if(n=this._getCursor(),e=this._getSuggestions(),this._removeCursor(),i=e.index(n)+t,i=(i+1)%(e.length+1)-1,i===-1)return void this.trigger("cursorRemoved");i<-1&&(i=e.length-1),this._setCursor(r=e.eq(i)),this._ensureVisible(r)}},_ensureVisible:function(t){var e,n,i,r;e=t.position().top,n=e+t.outerHeight(!0),i=this.$menu.scrollTop(),r=this.$menu.height()+parseInt(this.$menu.css("paddingTop"),10)+parseInt(this.$menu.css("paddingBottom"),10),e<0?this.$menu.scrollTop(i+e):r<n&&this.$menu.scrollTop(i+(n-r))},close:function(){this.isOpen&&(this.isOpen=!1,this._removeCursor(),this._hide(),this.trigger("closed"))},open:function(){this.isOpen||(this.isOpen=!0,!this.isEmpty&&this._show(),this.trigger("opened"))},setLanguageDirection:function(t){this.$menu.css("ltr"===t?r.ltr:r.rtl)},moveCursorUp:function(){this._moveCursor(-1)},moveCursorDown:function(t){void 0!==t&&null!==t||(t=1),this._moveCursor(t)},getDatumForSuggestion:function(t){var e=null;return t.length&&(e={raw:u.extractDatum(t),value:u.extractValue(t),datasetName:u.extractDatasetName(t)}),e},getDatumForCursor:function(){return this.getDatumForSuggestion(this._getCursor().first())},getDatumForTopSuggestion:function(){return this.getDatumForSuggestion(this._getSuggestions().first())},update:function(t){function e(e){e.update(t)}n.each(this.datasets,e)},empty:function(){function t(t){t.clear()}n.each(this.datasets,t),this.isEmpty=!0},isVisible:function(){return this.isOpen&&!this.isEmpty},destroy:function(){function t(t){t.destroy()}this.$menu.off(".tt"),this.$menu=null,n.each(this.datasets,t)}}),t}(),h=function(){function t(t){var i,r,a;t=t||{},t.input||e.error("missing input"),this.isActivated=!1,this.autoselect=!!t.autoselect,this.minLength=n.isNumber(t.minLength)?t.minLength:1,this.$node=s(t.input,t.withHint),i=this.$node.find(".tt-dropdown-menu"),r=this.$node.find(".tt-input"),a=this.$node.find(".tt-hint"),r.on("blur.tt",function(t){var e,o,s;e=document.activeElement,o=i.is(e),s=i.has(e).length>0,n.isMsie()&&(o||s)&&(t.preventDefault(),t.stopImmediatePropagation(),n.defer(function(){r.focus()}))}),i.on("mousedown.tt",function(t){t.preventDefault()}),this.eventBus=t.eventBus||new o({el:r}),this.dropdown=new c({menu:i,datasets:t.datasets}).onSync("suggestionClicked",this._onSuggestionClicked,this).onSync("cursorMoved",this._onCursorMoved,this).onSync("cursorRemoved",this._onCursorRemoved,this).onSync("opened",this._onOpened,this).onSync("closed",this._onClosed,this).onAsync("datasetRendered",this._onDatasetRendered,this),this.input=new l({input:r,hint:a}).onSync("focused",this._onFocused,this).onSync("blurred",this._onBlurred,this).onSync("enterKeyed",this._onEnterKeyed,this).onSync("tabKeyed",this._onTabKeyed,this).onSync("escKeyed",this._onEscKeyed,this).onSync("upKeyed",this._onUpKeyed,this).onSync("downKeyed",this._onDownKeyed,this).onSync("leftKeyed",this._onLeftKeyed,this).onSync("rightKeyed",this._onRightKeyed,this).onSync("queryChanged",this._onQueryChanged,this).onSync("whitespaceChanged",this._onWhitespaceChanged,this),this._setLanguageDirection()}function s(t,n){var o,s,l;o=e(t),s=e(i.dropdown).css(r.dropdown),l=o.clone().css(r.hint).css(a(o)),l.val("").removeData().addClass("tt-hint").removeAttr("id name placeholder required").prop("readonly",!0).attr({autocomplete:"off",spellcheck:"false",tabindex:-1}),o.data(h,{dir:o.attr("dir"),autocomplete:o.attr("autocomplete"),spellcheck:o.attr("spellcheck"),style:o.attr("style")}),o.addClass("tt-input").attr({autocomplete:"off",spellcheck:!1}).css(n?r.input:r.inputWithNoHint);try{!o.attr("dir")&&o.attr("dir","auto")}catch(t){}return o.after(s).parent().prepend(n?l:null)}function a(t){return{backgroundAttachment:t.css("background-attachment"),backgroundClip:t.css("background-clip"),backgroundColor:t.css("background-color"),backgroundImage:t.css("background-image"),backgroundOrigin:t.css("background-origin"),backgroundPosition:t.css("background-position"),backgroundRepeat:t.css("background-repeat"),backgroundSize:t.css("background-size")}}function u(t){var e=t.find(".tt-input");n.each(e.data(h),function(t,i){n.isUndefined(t)?e.removeAttr(i):e.attr(i,t)}),e.detach().removeData(h).removeClass("tt-input").insertAfter(t),t.remove()}var h="ttAttrs";return n.mixin(t.prototype,{_onSuggestionClicked:function(t,e){var n;(n=this.dropdown.getDatumForSuggestion(e))&&this._select(n)},_onCursorMoved:function(){var t=this.dropdown.getDatumForCursor();this.input.setInputValue(t.value,!0),this.eventBus.trigger("cursorchanged",t.raw,t.datasetName)},_onCursorRemoved:function(){this.input.resetInputValue(),this._updateHint()},_onDatasetRendered:function(){this._updateHint()},_onOpened:function(){this._updateHint(),this.eventBus.trigger("opened")},_onClosed:function(){this.input.clearHint(),this.eventBus.trigger("closed")},_onFocused:function(){this.isActivated=!0,this.dropdown.open()},_onBlurred:function(){this.isActivated=!1,this.dropdown.empty(),this.dropdown.close()},_onEnterKeyed:function(t,e){var n,i;n=this.dropdown.getDatumForCursor(),i=this.dropdown.getDatumForTopSuggestion(),n?(this._select(n),e.preventDefault()):this.autoselect&&i&&(this._select(i),e.preventDefault())},_onTabKeyed:function(t,e){var n;(n=this.dropdown.getDatumForCursor())?this._select(n):this._autocomplete(!0)},_onEscKeyed:function(){this.dropdown.close(),this.input.resetInputValue()},_onUpKeyed:function(){var t=this.input.getQuery();this.dropdown.isEmpty&&t.length>=this.minLength?this.dropdown.update(t):this.dropdown.moveCursorUp(),this.dropdown.open()},_onDownKeyed:function(){var t=this.input.getQuery();this.dropdown.isEmpty&&t.length>=this.minLength?this.dropdown.update(t):this.dropdown.moveCursorDown(),this.dropdown.open()},_onLeftKeyed:function(){"rtl"===this.dir&&this._autocomplete()},_onRightKeyed:function(){"ltr"===this.dir&&this._autocomplete()},_onQueryChanged:function(t,e){this.input.clearHintIfInvalid(),e.length>=this.minLength?this.dropdown.update(e):this.dropdown.empty(),this.dropdown.open(),this._setLanguageDirection()},_onWhitespaceChanged:function(){this._updateHint(),this.dropdown.open()},_setLanguageDirection:function(){var t;this.dir!==(t=this.input.getLanguageDirection())&&(this.dir=t,this.$node.css("direction",t),this.dropdown.setLanguageDirection(t))},_updateHint:function(){var t,e,i,r,o,s;t=this.dropdown.getDatumForTopSuggestion(),t&&this.dropdown.isVisible()&&!this.input.hasOverflow()?(e=this.input.getInputValue(),i=l.normalizeQuery(e),r=n.escapeRegExChars(i),o=RegExp("^(?:"+r+")(.+$)","i"),s=o.exec(t.value),s?this.input.setHint(e+s[1]):this.input.clearHint()):this.input.clearHint()},_autocomplete:function(t){var e,n,i,r;e=this.input.getHint(),n=this.input.getQuery(),i=t||this.input.isCursorAtEnd(),e&&n!==e&&i&&(r=this.dropdown.getDatumForTopSuggestion(),r&&this.input.setInputValue(r.value),this.eventBus.trigger("autocompleted",r.raw,r.datasetName))},_select:function(t){this.input.setQuery(t.value),this.input.setInputValue(t.value,!0),this._setLanguageDirection(),this.eventBus.trigger("selected",t.raw,t.datasetName),this.dropdown.close(),n.defer(n.bind(this.dropdown.empty,this.dropdown))},open:function(){this.dropdown.open()},close:function(){this.dropdown.close()},setVal:function(t){t=n.toStr(t),this.isActivated?this.input.setInputValue(t):(this.input.setQuery(t),this.input.setInputValue(t,!0)),this._setLanguageDirection()},getVal:function(){return this.input.getQuery()},destroy:function(){this.input.destroy(),this.dropdown.destroy(),u(this.$node),this.$node=null}}),t}();!function(){var t,i,r;t=e.fn.typeahead,i="ttTypeahead",r={initialize:function(t,r){function s(){var s,a,l=e(this);n.each(r,function(e){e.highlight=!!t.highlight}),a=new h({input:l,eventBus:s=new o({el:l}),withHint:!!n.isUndefined(t.hint)||!!t.hint,minLength:t.minLength,autoselect:t.autoselect,datasets:r}),l.data(i,a)}return r=n.isArray(r)?r:[].slice.call(arguments,1),t=t||{},this.each(s)},open:function(){function t(){var t,n=e(this);(t=n.data(i))&&t.open()}return this.each(t)},close:function(){function t(){var t,n=e(this);(t=n.data(i))&&t.close()}return this.each(t)},val:function(t){function n(){var n,r=e(this);(n=r.data(i))&&n.setVal(t)}function r(t){var e,n;return(e=t.data(i))&&(n=e.getVal()),n}return arguments.length?this.each(n):r(this.first())},destroy:function(){function t(){var t,n=e(this);(t=n.data(i))&&(t.destroy(),n.removeData(i))}return this.each(t)}},e.fn.typeahead=function(t){var n;return r[t]&&"initialize"!==t?(n=this.filter(function(){return!!e(this).data(i)}),r[t].apply(n,[].slice.call(arguments,1))):r.initialize.apply(this,arguments)},e.fn.typeahead.noConflict=function(){return e.fn.typeahead=t,this}}()}(window.jQuery)}).call(e,n(2).setImmediate)},function(t,e,n){"use strict";function i(t,e){this._id=t,this._clearFn=e}var r=Function.prototype.apply;e.setTimeout=function(){return new i(r.call(setTimeout,window,arguments),clearTimeout)},e.setInterval=function(){return new i(r.call(setInterval,window,arguments),clearInterval)},e.clearTimeout=e.clearInterval=function(t){t&&t.close()},i.prototype.unref=i.prototype.ref=function(){},i.prototype.close=function(){this._clearFn.call(window,this._id)},e.enroll=function(t,e){clearTimeout(t._idleTimeoutId),t._idleTimeout=e},e.unenroll=function(t){clearTimeout(t._idleTimeoutId),t._idleTimeout=-1},e._unrefActive=e.active=function(t){clearTimeout(t._idleTimeoutId);var e=t._idleTimeout;e>=0&&(t._idleTimeoutId=setTimeout(function(){t._onTimeout&&t._onTimeout()},e))},n(3),e.setImmediate=setImmediate,e.clearImmediate=clearImmediate},function(t,e,n){(function(t,e){"use strict";!function(t,n){function i(t){"function"!=typeof t&&(t=Function(""+t));for(var e=Array(arguments.length-1),n=0;n<e.length;n++)e[n]=arguments[n+1];var i={callback:t,args:e};return _[g]=i,p(g),g++}function r(t){delete _[t]}function o(t){var e=t.callback,i=t.args;switch(i.length){case 0:e();break;case 1:e(i[0]);break;case 2:e(i[0],i[1]);break;case 3:e(i[0],i[1],i[2]);break;default:e.apply(n,i)}}function s(t){if(f)setTimeout(s,0,t);else{var e=_[t];if(e){f=!0;try{o(e)}finally{r(t),f=!1}}}}function a(){p=function(t){e.nextTick(function(){s(t)})}}function l(){if(t.postMessage&&!t.importScripts){var e=!0,n=t.onmessage;return t.onmessage=function(){e=!1},t.postMessage("","*"),t.onmessage=n,e}}function u(){var e="setImmediate$"+Math.random()+"$",n=function(n){n.source===t&&"string"==typeof n.data&&0===n.data.indexOf(e)&&s(+n.data.slice(e.length))};t.addEventListener?t.addEventListener("message",n,!1):t.attachEvent("onmessage",n),p=function(n){t.postMessage(e+n,"*")}}function c(){var t=new MessageChannel;t.port1.onmessage=function(t){var e=t.data;s(e)},p=function(e){t.port2.postMessage(e)}}function h(){var t=m.documentElement;p=function(e){var n=m.createElement("script");n.onreadystatechange=function(){s(e),n.onreadystatechange=null,t.removeChild(n),n=null},t.appendChild(n)}}function d(){p=function(t){setTimeout(s,0,t)}}if(!t.setImmediate){var p,g=1,_={},f=!1,m=t.document,y=Object.getPrototypeOf&&Object.getPrototypeOf(t);y=y&&y.setTimeout?y:t,"[object process]"==={}.toString.call(t.process)?a():l()?u():t.MessageChannel?c():m&&"onreadystatechange"in m.createElement("script")?h():d(),y.setImmediate=i,y.clearImmediate=r}}("undefined"==typeof self?void 0===t?void 0:t:self)}).call(e,function(){return this}(),n(4))},function(t,e){"use strict";function n(){throw Error("setTimeout has not been defined")}function i(){throw Error("clearTimeout has not been defined")}function r(t){if(c===setTimeout)return setTimeout(t,0);if((c===n||!c)&&setTimeout)return c=setTimeout,setTimeout(t,0);try{return c(t,0)}catch(e){try{return c.call(null,t,0)}catch(e){return c.call(this,t,0)}}}function o(t){if(h===clearTimeout)return clearTimeout(t);if((h===i||!h)&&clearTimeout)return h=clearTimeout,clearTimeout(t);try{return h(t)}catch(e){try{return h.call(null,t)}catch(e){return h.call(this,t)}}}function s(){_&&p&&(_=!1,p.length?g=p.concat(g):f=-1,g.length&&a())}function a(){if(!_){var t=r(s);_=!0;for(var e=g.length;e;){for(p=g,g=[];++f<e;)p&&p[f].run();f=-1,e=g.length}p=null,_=!1,o(t)}}function l(t,e){this.fun=t,this.array=e}function u(){}var c,h,d=t.exports={};!function(){try{c="function"==typeof setTimeout?setTimeout:n}catch(t){c=n}try{h="function"==typeof clearTimeout?clearTimeout:i}catch(t){h=i}}();var p,g=[],_=!1,f=-1;d.nextTick=function(t){var e=Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)e[n-1]=arguments[n];g.push(new l(t,e)),1!==g.length||_||r(a)},l.prototype.run=function(){this.fun.apply(null,this.array)},d.title="browser",d.browser=!0,d.env={},d.argv=[],d.version="",d.versions={},d.on=u,d.addListener=u,d.once=u,d.off=u,d.removeListener=u,d.removeAllListeners=u,d.emit=u,d.prependListener=u,d.prependOnceListener=u,d.listeners=function(t){return[]},d.binding=function(t){throw Error("process.binding is not supported")},d.cwd=function(){return"/"},d.chdir=function(t){throw Error("process.chdir is not supported")},d.umask=function(){return 0}},function(t,e,n){var i,r,o,s,a=function(t,e){return function(){return t.apply(e,arguments)}};o=n(6),s=n(56),r=n(57),t.exports=i=function(){function t(){this.observerSubscribe=a(this.observerSubscribe,this),this.observerPublish=a(this.observerPublish,this);var t,e,n;this._observer=(null!=(e=window.Skyscanner.Common)?e.observer:void 0)||{},t=window.Skyscanner.SearchControlsParameters||{},t.urlBuilder=(null!=(n=window.Skyscanner.Api)?n.urlBuilder:void 0)||{},this.storage=new s(t.locale),t.populateViaStorage&&(t=_.merge(t,this.storage.toAttributes())),this.searchControls=new o(t),this.cookieStorage=new r(this.searchControls.model.toAttributes()),this.searchControls.on("search",function(t){return function(e){return t.observerPublish("flights-navigate",e)}}(this)),this.searchControls.on("map-link-click",function(t){return function(e){return t.observerPublish("flights-navigate",e)}}(this)),this.searchControls.on("modelchange",function(t){return function(e){var n,i;if(null==e&&(e={}),n=e.key,i=e.value,n)return t.storage.set(n,i),null!=t.cookieStorage&&t.cookieStorage.set(n,i),t.triggerSearchControlsChangedEvent()}}(this)),this.searchControls.on("placechange",function(t){return function(e){var n,i;if(null==e&&(e={}),i=e.placeType,n=e.placeObj,i&&n&&("origin"===i||"destination"===i))return i="origin"===i?"from":"to",t.observerPublish("search-controls-place-set",{placeType:i,placeObj:n})}}(this)),this.searchControls.on("ga",function(t){return function(e){return t.observerPublish("ga-track-event-with-page-name",e)}}(this)),this.searchControls.on("mixpanel",function(t){return function(e){return t.observerPublish("mixpanel-track",e)}}(this)),this.searchControls.on("post-render",function(t){return function(){return t.observerPublish("flights-search-controls-rendered")}}(this)),this.observerSubscribe("flights-toggle-passenger-controls",function(t){return function(e){return t.searchControls.showTravellersPanel(e)}}(this)),this.observerSubscribe("flights-searchcontrols-uncheck-direct",function(t){return function(){return t.searchControls.uncheckDirect()}}(this)),this.searchControls.renderView()}return t.prototype.observerPublish=function(t,e){if(this._observer.publish)return this._observer.publish.call(this._observer,t,e)},t.prototype.observerSubscribe=function(t,e){if(this._observer.subscribe)return this._observer.subscribe.call(this._observer,t,e)},t.prototype.triggerSearchControlsChangedEvent=function(){return this.observerPublish("flights-search-controls-changed",this.searchControls.model.toAttributes())},t}()},function(t,e,n){var i,r,o,s,a,l=function(t,e){return function(){return t.apply(e,arguments)}},u=function(t,e){function n(){this.constructor=t}for(var i in e)c.call(e,i)&&(t[i]=e[i]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},c={}.hasOwnProperty;o=n(7),s=n(19),i=n(9),a=n(11),t.exports=r=function(t){function e(t){null==t&&(t={}),this._handleMixpanelInteractionEvent=l(this._handleMixpanelInteractionEvent,this),this._handleMixpanelUsedEvent=l(this._handleMixpanelUsedEvent,this),this._handleMixpanelEvent=l(this._handleMixpanelEvent,this),this._handleGaEvent=l(this._handleGaEvent,this),a.registerFormatter(t.dateFormatter),this.model=new o(_.pick(t,["locale","market","currency","originId","originName","originCityId","originCountryId","originCountryName","originRegionId","destinationId","destinationName","destinationCityId","destinationCountryId","destinationCountryName","destinationRegionId","homeAirport","outboundAlts","inboundAlts","outboundDate","inboundDate","tripType","legs","adults","children","infants","adultsV2","childrenV2","cabinClass","preferDirects","firstDay","months","weekdays","weekdaysShort","showCompareUnits","featureFlags","remoteConfig","seoAirlineCode","initWithCountries"])),this.eventBus=new i,this._bubbleEvents(),this.view=new s({el:t.el||"#js-search-controls-container",model:this.model,eventBus:this.eventBus,urlBuilder:t.urlBuilder})}return u(e,t),e.prototype.renderView=function(){return this.view.render(),this.trigger("post-render")},e.prototype.showTravellersPanel=function(t){return this.view.showTravellersPanel(t)},e.prototype.uncheckDirect=function(){return this.model.set("preferDirects",!1)},e.prototype._bubbleEvents=function(){return this.eventBus.on("search",function(t){return function(e){return t.trigger("search",e)}}(this)),this.model.on("change",function(t){return function(e){return t.trigger("modelchange",e)}}(this)),this.eventBus.on("placechange",function(t){return function(e){return t.trigger("placechange",e)}}(this)),this.eventBus.on("ga",this._handleGaEvent),this.eventBus.on("mixpanel",this._handleMixpanelEvent),this.eventBus.on("mixpanel-used",this._handleMixpanelUsedEvent),this.eventBus.on("map-link-click",function(t){return function(e){return t.trigger("map-link-click",e)}}(this))},e.prototype._handleGaEvent=function(t){if(null==t&&(t={}),t.action)return this.trigger("ga",{action:t.action,label:t.label||"",value:t.value||null})},e.prototype._handleMixpanelEvent=function(t){if(null==t&&(t={}),t.name)return this.trigger("mixpanel",{name:t.name,props:_.merge(this.model.getMixpanelProperties(),t.props||{}),preserve:!0})},e.prototype._handleMixpanelUsedEvent=function(t){return null==t&&(t=null),this._handleMixpanelInteractionEvent(t,"Used (Filtered)")},e.prototype._handleMixpanelInteractionEvent=function(t,e){if(null==t&&(t=null),null==e&&(e=null),null!==t&&null!==e)return this._handleMixpanelEvent({name:"Flight Search Field "+e,props:{"Field Used":t}})},e}(i)},function(t,e,n){var i,r,o,s,a,l,u,c,h=function(t,e){return function(){return t.apply(e,arguments)}},d=function(t,e){function n(){this.constructor=t}for(var i in e)p.call(e,i)&&(t[i]=e[i]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},p={}.hasOwnProperty;o=n(8),u=n(11),i=n(10),r=n(15),c=n(16),s=n(17).default,l=n(18),t.exports=a=function(t){function e(t){var n;null==t&&(t={}),this._adjustCabinClass=h(this._adjustCabinClass,this),this._adjustInboundDate=h(this._adjustInboundDate,this),this._adjustOutboundDate=h(this._adjustOutboundDate,this),this.getMixpanelProperties=h(this.getMixpanelProperties,this),t=this._normalizeOptions(t),this._validators=c,n={locale:"en-GB",market:"UK",currency:"GBP",originId:"UK",originName:null,originCityId:null,originCountryName:null,destinationId:null,destinationName:null,destinationCityId:null,destinationCountryName:null,homeAirport:null,outboundAlts:{value:!1,expiryStamp:null},inboundAlts:{value:!1,expiryStamp:null},outboundDate:u.getTodaysDate(),outboundDateObj:null,outboundDateType:null,inboundDate:u.getTomorrowsDate(),inboundDateObj:null,inboundDateType:null,tripType:"return",legs:new i({type:r}),adults:1,children:0,infants:0,adultV2:1,childrenV2:[],cabinClass:"Economy",preferDirects:!1,firstDay:0,months:["January","February","March","April","May","June","July","August","September","October","November","December"],weekdays:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],weekdaysShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],showCompareUnits:!0,featureFlags:{},remoteConfig:{},minDatepickerString:u.getTodaysDate(),maxDatepickerString:u.getOneYearFromTodaysDate(),seoAirlineCode:"",initWithCountries:!1},e.__super__.constructor.call(this,n,t),this.isSjLocationPickerEnabled()&&(this._popularPlaces=new s),this._initEvents(),this.setOutboundDate(this.get("outboundDate"),!0),this.setInboundDate(this.get("inboundDate"),!0),
this._adjustInboundDate(),this._adjustCabinClass(),this._adjustTripType(),this._adjustLegs(),this._adjustLegMinDates()}return d(e,t),e.prototype.normalize=function(){return this.get("legs").trimEnd(!0),this},e.prototype.clone=function(){return new e(this.toAttributes())},e.prototype.validate=function(){var t;return t=_.find(this._validators,function(t){return function(e){return!e.validate(t)}}(this)),{isValid:!t,key:(null!=t?t.key:void 0)||null,message:(null!=t?t.message:void 0)||null}},e.prototype.toAttributes=function(){return _.forOwn(e.__super__.toAttributes.call(this),function(t,e,n){if(t instanceof i)return n[e]=t.toAttributes()})},e.prototype.isDayViewSearch=function(){var t,e,n;return!!this.isMultiCity()||(e=u.dateTypes.day,t=this.get("outboundDateType")===e&&this.get("inboundDateType")===e,n=this._isPlaceIdCityOrAirport(this.get("originId"))&&this._isPlaceIdCityOrAirport(this.get("destinationId")),n&&t)},e.prototype.isReturn=function(){return"return"===this.get("tripType")},e.prototype.isOneWay=function(){return"one-way"===this.get("tripType")},e.prototype.isMultiCity=function(){return"multi-destination"===this.get("tripType")},e.prototype.isMultiCityLimitReached=function(){return this.get("legs").length()>5},e.prototype.setOriginFromPlaceObj=function(t){var e,n,i,r,o,s,a;if(null==t&&(t={}),r=t.PlaceId,o=t.PlaceName,s=t.RegionId,e=t.CityId,n=t.CountryId,i=t.CountryName,r)return a=this.get("originId")===r,this.set("originCountryName",i,a),this.set("originCountryId",n,a),this.set("originCityId",e||null,a),this.set("originName",o,a),this.set("originId",r,a),this.set("originRegionId",s||null,a)},e.prototype.setDestinationFromPlaceObj=function(t){var e,n,i,r,o,s,a;return null==t&&(t={}),r=t.PlaceId,o=t.PlaceName,s=t.RegionId,e=t.CityId,n=t.CountryId,i=t.CountryName,a=this.get("destinationId")===r,this.set("destinationCountryName",i||null,a),this.set("destinationCountryId",n||null,a),this.set("destinationCityId",e||null,a),this.set("destinationRegionId",s||null,a),this.set("destinationName",o||null,a),this.set("destinationId",r||null,a)},e.prototype.setOutboundDate=function(t,e){return null==e&&(e=!1),this._setDate("outbound",t,e)},e.prototype.setInboundDate=function(t,e){return null==e&&(e=!1),this._setDate("inbound",t,e)},e.prototype.getMixpanelProperties=function(){var t,e,n,i,r,o;if(r={Adults:this.get("adults"),Children:this.get("children"),Infants:this.get("infants"),"Cabin Class":this.get("cabinClass"),"Prefer Directs":this.get("preferDirects"),"Trip Type":this.get("tripType"),"Leg Count":this._getMixpanelLegCount(),"Date Offset Leg 1":this._getDateOffsetLeg1(),"Open Jaw":this._isOpenJaw(),"Nearby Alts Checked":this._getNearbyAltsType()},this.isMultiCity())for(o=this.get("legs").getAll(),t=e=0,i=o.length;e<i;t=++e)n=o[t],r["Origin Code Leg "+(t+1)]=n.get("originId"),r["Destination Code Leg "+(t+1)]=n.get("destinationId"),r["Date Leg "+(t+1)]=n.get("date");else r["Origin Code Leg 1"]=this.get("originId"),r["Destination Code Leg 1"]=this.get("destinationId")||"everywhere",r["Date Leg 1"]=this.get("outboundDate"),this.isReturn()&&(r["Origin Code Leg 2"]=this.get("destinationId")||"everywhere",r["Destination Code Leg 2"]=this.get("originId"),r["Date Leg 2"]=this.get("inboundDate"));return r},e.prototype.copyPropertiesToFirstLeg=function(){var t;if(t=this.get("legs").get(0),t.isEmpty())return this.get("originCityId")&&(t.set("originId",this.get("originId"),!0),t.set("originName",this.get("originName"),!0),t.set("originCityId",this.get("originCityId"),!0),t.set("originCountryName",this.get("originCountryName"),!0),t.set("originRegionId",this.get("originRegionId"),!0)),this.get("destinationCityId")&&(t.set("destinationId",this.get("destinationId"),!0),t.set("destinationName",this.get("destinationName"),!0),t.set("destinationCityId",this.get("destinationCityId"),!0),t.set("destinationCountryName",this.get("destinationCountryName"),!0),t.set("destinationRegionId",this.get("destinationRegionId"),!0)),this.get("outboundDate")&&this.get("outboundDateType")===u.dateTypes.day?t.set("date",this.get("outboundDate")):void 0},e.prototype.isAutosuggestV2Enabled=function(){return!!this.get("featureFlags").autosuggestV2Enabled},e.prototype.isHomeAirportEnabled=function(){return!!this.get("featureFlags").homeAirportEnabled},e.prototype.isSendPeopleFromSearchToMapEnabled=function(t){var e,n;return"b"===this.get("featureFlags").sendPeopleToMap&&$(window).width()>=1024&&"return"===t.tripType&&(3===(e=t.originId.length)||4===e)&&(null==t.destinationId||2===t.destinationId.length)&&7===(null!=(n=t.outboundDate)?n.length:void 0)},e.prototype.isOpaqueOnDesktop=function(){return!!this.get("featureFlags").opaqueOnDesktop},e.prototype.isOneLineSearchControlsEnabled=function(){return!!this.get("featureFlags").oneLineSearchControls},e.prototype.isCalendarDirectsEnabled=function(){return!!this.get("featureFlags").calendarDirects},e.prototype.isCalendarDirectClearWhenDirect=function(){return!!this.get("featureFlags").calendarDirectClearAllDirect},e.prototype.isSjCompactViewEnabled=function(){return!!this.get("featureFlags").sjCompactViewEnabled},e.prototype.isGeneralSearchEnabled=function(){return!!this.get("remoteConfig").FlightsGeneralSearch},e.prototype.isGeneralSearchControlEnabled=function(){return!!this.get("remoteConfig").FlightsGeneralSearchControl},e.prototype.returnDifferentDestinationResultsInV2=function(){return!!this.get("remoteConfig").DifferentDestinationResultsInV2},e.prototype.getMinNumberOfGeneralSearchSuggestions=function(){return this._getNumericalConfigValue("MinNumberOfGeneralSearchSuggestions")},e.prototype.getMaxSuggestions=function(){return this._getNumericalConfigValue("MaxNumberOfAutosuggestSuggestions",10)},e.prototype.bumpEverywhereInSuggestions=function(){var t;return null!=(t=l.getVariant("bump_everywhere_in_suggestions"))?t.toLowerCase():void 0},e.prototype.isChildrenAgeViewEnabled=function(){return!!this.get("featureFlags").childrenAgeView},e.prototype.isSjLocationPickerEnabled=function(){return l.isOn("sj_location_picker_enabled")},e.prototype.getUrlBuilderContext=function(){var t;return t=_.pick(this.toAttributes(),["locale","originId","originName","destinationId","destinationName","outboundDate","inboundDate","tripType","legs","preferDirects","adults","children","infants","adultsV2","childrenV2","outboundAlts","inboundAlts","cabinClass","seoAirlineCode"]),t.outboundAlts=t.outboundAlts.value,t.inboundAlts=t.inboundAlts.value,t.cabinclass=t.cabinClass,delete t.cabinClass,this.isSendPeopleFromSearchToMapEnabled(t)&&(t.targetPage="inspiration-map"),this.isChildrenAgeViewEnabled()||(delete t.adultsV2,delete t.childrenV2),t},e.prototype.getPopularDestinations=function(){var t;return(null!=(t=this._popularPlaces)?t.getDestinations():void 0)||[]},e.prototype.getPopularDestinationsTitle=function(){var t;return(null!=(t=this._popularPlaces)?t.getTitle():void 0)||""},e.prototype._initEvents=function(){return this.on("change:originId",function(t){return function(){return t._adjustCabinClass()}}(this)),this.on("change:destinationId",function(t){return function(){return t._adjustCabinClass()}}(this)),this.on("change:outboundDate",this._adjustCabinClass),this.on("change:inboundDate",this._adjustCabinClass),this.on("change:tripType",this._adjustCabinClass),this.on("change:outboundDate",this._adjustInboundDate),this.on("change:inboundDate",this._adjustOutboundDate),this.get("legs").on("change",function(t){return function(e){return t.trigger("change:legs",e),t.trigger("change",{key:"legs",value:e}),t._adjustLegDates(),t._adjustLegMinDates()}}(this))},e.prototype._setDate=function(t,e,n){return null==n&&(n=!1),this.set(t+"DateObj",u.getDateObjFromDate(e),!0),this.set(t+"DateType",u.getDateTypeFromDate(e),!0),this.set(t+"Date",e,n===!0)},e.prototype._normalizeOptions=function(t){var e,n,o,s,a,l,c;for(c="wholeyear",e=u.getCurrentYearDate(),t.outboundDate===c&&(t.outboundDate=e),t.inboundDate===c&&(t.inboundDate=e),l="unknown",a=["originName","originCountryName","originCityId","originCountryId","originRegionId","destinationName","destinationCountryName","destinationCityId","destinationCountryId","destinationRegionId","homeAirport"],n=0,o=a.length;n<o;n++)s=a[n],(t[s]||"").toLowerCase()===l&&delete t[s];return this._isDateInThePast(t.outboundDate)&&delete t.outboundDate,this._isDateInThePast(t.inboundDate)&&delete t.inboundDate,this._nearbyAltsHasExpired(t.outboundAlts)&&delete t.outboundAlts,this._nearbyAltsHasExpired(t.inboundAlts)&&delete t.inboundAlts,t.legs=new i({type:r,models:t.legs||[]}),t},e.prototype._adjustOutboundDate=function(){var t,e;if(e=this.get("inboundDate")<this.get("outboundDate"),t=this.get("inboundDateType")!==this.get("outboundDateType"),e||t)return this.setOutboundDate(this.get("inboundDate"))},e.prototype._adjustInboundDate=function(){var t,e;if(e=this.get("outboundDate")>this.get("inboundDate"),t=this.get("inboundDateType")!==this.get("outboundDateType"),e||t)return this.setInboundDate(this.get("outboundDate"))},e.prototype._adjustCabinClass=function(){if(!this.isDayViewSearch()&&"Economy"!==this.get("cabinClass"))return this.set("cabinClass","Economy")},e.prototype._adjustTripType=function(){var t;if(this.isMultiCity()&&!!(null!=(t=this.get("featureFlags"))?t.multiCityEnabled:void 0)==!1)return this.set("tripType","return")},e.prototype._adjustLegs=function(){var t,e,n,i,r,o,s,a,l;for(l=this.get("legs"),o=[0,1],e=0,i=o.length;e<i;e++)t=o[e],l.length()<2&&l.add({},!0);for(s=[0,1],a=[],n=0,r=s.length;n<r;n++)t=s[n],a.push(l.get(t).set("fixed",!0,!0));return a},e.prototype._adjustLegDates=function(){var t,e,n,i,r,o,s,a,l,u,c;for(s=this.get("legs").getAll(),c=[],n=i=0,a=s.length;i<a;n=++i)if(o=s[n],null!==o.get("date")){for(u=s.slice(0,n),r=u.length-1;r>=0&&(l=u[r],!(t=l.get("date"))||!(e=l.get("dateObj")));r+=-1);e>o.get("dateObj")?c.push(o.setDate(t)):c.push(void 0)}return c},e.prototype._adjustLegMinDates=function(){var t,e,n,i,r,o,s,a,l,u;for(r=this.get("legs").getAll(),u=[],t=e=0,o=r.length;e<o;t=++e){for(i=r[t],l=r.slice(0,t),n=l.length-1;n>=0&&(a=l[n],!(s=a.get("date")));n+=-1);s?u.push(i.set("minDate",s)):u.push(void 0)}return u},e.prototype._isPlaceIdCityOrAirport=function(t){var e;return e=(t||"").length,3===e||4===e},e.prototype._isDateInThePast=function(t){return u.isDateInThePast(t)},e.prototype._nearbyAltsHasExpired=function(t){return null==t&&(t={}),u.getTodaysDateObj().getTime()>=t.expiryStamp},e.prototype._getMixpanelLegCount=function(){return this.isMultiCity()?this.get("legs").length():this.isReturn()?2:1},e.prototype._getNearbyAltsType=function(){var t,e,n,i;return e=!!(null!=(n=this.get("outboundAlts"))?n.value:void 0),t=!!(null!=(i=this.get("inboundAlts"))?i.value:void 0),e&&t?"both":e?"outbound":t?"inbound":null},e.prototype._getDateOffsetLeg1=function(){var t,e;return t=u.getTodaysDateObj(),e=this.isMultiCity()?this.get("legs").get(0).get("dateObj"):this.get("outboundDateObj"),u.getDaysBetweenDates(t,e)},e.prototype._isOpenJaw=function(){var t,e,n,i,r,o,s;return!!this.isMultiCity()&&(s=this.get("legs"),t=s.get(0),i=s.get(s.length()-1),n=t.get("originId"),e=t.get("destinationId"),o=i.get("originId"),r=i.get("destinationId"),!!(n&&e&&o&&r)&&(n!==r||e!==o))},e.prototype._getNumericalConfigValue=function(t,e){var n;return null==e&&(e=0),n=(this.get("remoteConfig")||{})[t],_.isNumber(n)?n:parseInt(n,10)||e},e}(o)},function(t,e,n){var i,r,o,s=function(t,e){function n(){this.constructor=t}for(var i in e)a.call(e,i)&&(t[i]=e[i]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},a={}.hasOwnProperty;r=n(9),i=n(10),t.exports=o=function(t){function e(t,e){this._attributes=_.merge(t,e,this._override)||{}}return s(e,t),e.prototype.get=function(t){var e;return e=this._attributes[t],e instanceof i?e:_.isObject(e)?_.cloneDeep(e):e},e.prototype.set=function(t,e,n){return null==n&&(n=!1),this._attributes[t]===e?this:(this._attributes[t]=e,n||this.trigger("change:"+t,e),n||this.trigger("change",{key:t,value:e}),this)},e.prototype.toAttributes=function(){return _.clone(this._attributes)},e.prototype._override=function(t,e){var n;return n=e||_.isBoolean(e),_.isArray(e)&&(n=e.length>0),n?e:t},e}(r)},function(t,e){var n;t.exports=n=function(){function t(){}return t.prototype.on=function(t,e){return null==t&&(t=""),this._callbacks||(this._callbacks={}),t=t.split(" "),$.each(t,function(t){return function(n,i){return t._callbacks[i]||(t._callbacks[i]=$.Callbacks()),t._callbacks[i].add(e)}}(this)),this},t.prototype.trigger=function(t,e){var n;return null==e&&(e=null),this._callbacks&&(n=this._callbacks[t]),n&&n.fire(e),this},t.prototype.detach=function(t){return this._callbacks&&this._callbacks[t]&&delete this._callbacks[t],this},t}()},function(t,e,n){var i,r,o=function(t,e){function n(){this.constructor=t}for(var i in e)s.call(e,i)&&(t[i]=e[i]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},s={}.hasOwnProperty;r=n(9),t.exports=i=function(t){function e(t){if(null==t&&(t={}),this._models=[],this._type=t.type,!_.isFunction(this._type))throw Error("a collection requires a type");_.each(t.models||[],function(t){return function(e){return t.add(e)}}(this))}return o(e,t),e.prototype.add=function(t,e){var n;return null==t&&(t={}),null==e&&(e=!1),n=new this._type(t),n.on("change",function(t){return function(){return t.trigger("change",t.toAttributes())}}(this)),this._models.push(n),e||this.trigger("change",this.toAttributes()),n},e.prototype.get=function(t){return this._models[t]||null},e.prototype.getAll=function(){return this._models},e.prototype.remove=function(t,e){var n;if(null==e&&(e=!1),n=this._models.splice(t,1)[0])return n.detach("change"),e?void 0:this.trigger("change",this.toAttributes())},e.prototype.toAttributes=function(){return _.map(this._models,function(t){return t.toAttributes()})},e.prototype.length=function(){return this.getAll().length},e.prototype.trimEnd=function(t){var e,n,i,r;for(null==t&&(t=!1),r=this.getAll(),e=n=r.length-1;n>=0&&(i=r[e],i.isEmpty());e=n+=-1)this.remove(e,t);return this.getAll()},e}(r)},function(t,e,n){var i,r,o;o=n(12),r=n(13),i=function(){function t(){this.registerFormatter(function(t){return null!=t?""+t:void 0})}return t.prototype.millisecondsPerDay=864e5,t.prototype.dateTypes={year:"year",month:"month",day:"day"},t.prototype.formats={userFacingCLDR:{month:"yearMonth",day:"short"},internal:{year:"yyyy",month:"yyyy-MM",day:"yyyy-MM-dd"}},t.prototype.registerFormatter=function(t){if("function"==typeof t)return this.dateFormatter=t},t.prototype.getTodaysDateObj=function(){return new Date},t.prototype.isDateInThePast=function(t){var e,n,i,r;return n=this.getDateTypeFromDate(t),e=this.getDateObjFromDate(t),i=this.getTodaysDate(n),r=this.getDateObjFromDate(i),e<r},t.prototype.getDaysBetweenDates=function(t,e){var n,i;return t&&e?(n=new Date(t.getFullYear(),t.getMonth(),t.getDate()),i=new Date(e.getFullYear(),e.getMonth(),e.getDate()),Math.floor((i-n)/this.millisecondsPerDay)):null},t.prototype.getUserFacingShortDate=function(t){var e,n,i;return e=this.getDateObjFromDate(t),n=this.getDateTypeFromDate(t),i=this.formats.userFacingCLDR[n],i?this.dateFormatter(e,i):n===this.dateTypes.year?o("ktxtSearchControls_CheapestMonth"):null},t.prototype.getTodaysDate=function(t){return null==t&&(t=this.dateTypes.day),new r(this.getTodaysDateObj(),t).dateString},t.prototype.getTomorrowsDate=function(t){return null==t&&(t=this.dateTypes.day),new r(this._getTomorrowsDateObj(),t).dateString},t.prototype.getDateAfterDaysAdded=function(t,e){return null==t&&(t=0),null==e&&(e=this.dateTypes.day),new r(this._getAfterDaysAddedDateObj(t),e).dateString},t.prototype.getOneYearFromTodaysDate=function(){return new r(this._getOneYearFromTodaysDateObj(),this.dateTypes.day).dateString},t.prototype.getCurrentYearDate=function(){return this.getTodaysDate(this.dateTypes.year)},t.prototype.getDateTypeFromDate=function(t){switch((t||"").length){case 4:return this.dateTypes.year;case 7:return this.dateTypes.month;case 10:return this.dateTypes.day;default:return null}},t.prototype.getDateObjFromDate=function(t){return t?new r(t).dateObj:null},t.prototype.getOutboundDate=function(t){return t?this.getDateAfterDaysAdded(t):this.getTodaysDate()},t.prototype.getInboundDate=function(t,e){return t&&e?this.getDateAfterDaysAdded(t+e):this.getTomorrowsDate()},t.prototype._getTomorrowsDateObj=function(){var t;return t=this.getTodaysDateObj(),new Date(t.getFullYear(),t.getMonth(),t.getDate()+1)},t.prototype._getAfterDaysAddedDateObj=function(t){var e;return null==t&&(t=0),e=this.getTodaysDateObj(),new Date(e.getFullYear(),e.getMonth(),e.getDate()+t)},t.prototype._getOneYearFromTodaysDateObj=function(){var t;return t=this.getTodaysDateObj(),new Date(t.getFullYear()+1,t.getMonth(),t.getDate())},t.prototype._getInternalDateFormat=function(t){return this.formats.internal[t]||null},t}(),t.exports=new i},function(t,e){t.exports=function(t,e){var n,i,r,o;r=(("undefined"!=typeof Skyscanner&&null!==Skyscanner&&null!=(i=Skyscanner.FSS)?i.translations:void 0)||{})[t]||t;for(n in e)o=e[n],r=r.replace(RegExp("@@"+n+"@@","g"),o);return r}},function(t,e,n){var i,r;(function(t){"use strict";var o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};!function(s,a){"object"===o(e)&&"object"===o(t)?t.exports=a():(i=a,r="function"==typeof i?i.call(e,n,e,t):i,!(void 0!==r&&(t.exports=r)))}(void 0,function(){return function(t){function e(i){if(n[i])return n[i].exports;var r=n[i]={exports:{},id:i,loaded:!1};return t[i].call(r.exports,r,r.exports,e),r.loaded=!0,r.exports}var n={};return e.m=t,e.c=n,e.p="",e(0)}([function(t,e){var n,i,r,o,s,a,l,u,c,h,d,p,g,_,f,m,y={}.hasOwnProperty;n={day:"day",month:"month",year:"year",unknown:"unknown"},d={},d[""+n.day]=1,d[""+n.month]=2,d[""+n.year]=3,o=d,p={},p[""+n.day]=/^(\d{4})-(\d{2})-(\d{2})$/,p[""+n.month]=/^(\d{4})-(\d{2})$/,p[""+n.year]=/^(\d{4})$/,r=p,g={},g[""+n.day]="Date",g[""+n.month]="Month",g[""+n.year]="FullYear",a=g,c=function(t,e){var n,i;for(n in t)if(y.call(t,n)&&(i=t[n],i===e))return n},l=function(t,e){var n,i,o,s,a,l;return(a=r[e])&&(o=t.match(a))?(i=o[0],l=o[1],s=o[2],n=o[3],new Date(parseInt(l,10),parseInt(s||1,10)-1,parseInt(n||1,10))):null},f=function(t,e){var i,r,o,s;switch(o=t.match(/.{1,2}/g),s=o[0],r=o[1],i=o[2],s="20"+s,e){case n.day:return s+"-"+r+"-"+i;case n.month:return s+"-"+r;case n.year:return s;default:return null}},i=function(t,e){var i,r,o,s;switch(o=t.split("-"),s=o[0],r=o[1],i=o[2],s=s.substring(2),e){case n.day:return""+s+r+i;case n.month:return""+s+r;case n.year:return s;default:return null}},_=function(t){return t<10?"0"+t:""+t},u=function(t,e){var i,r,o;if(!t)return null;switch(o=""+t.getFullYear(),r=_(t.getMonth()+1),i=_(t.getDate()),e){case n.day:return o+"-"+r+"-"+i;case n.month:return o+"-"+r;case n.year:return o;default:return null}},m=function(t,e,i,r){var l,h,d,p;return null==i&&(i=1),null==r&&(r=a[n.day]),l="get"+r,d="set"+r,h=new Date(t),p=o[c(a,r)]>=o[e],h[l]&&h[d]&&p&&h[d](t[l]()+i),new s(u(h,e))},h=function(t,e){var o,s,a,c,h;null==t&&(t=u(new Date,n.day)),null==e&&(e=n.day),"[object Date]"===Object.prototype.toString.call(t)&&(t=u(t,e));for(a in r)if(c=r[a],c.test(t))return h=i(t,a),s=l(t,a),[a,t,h,s];return/^wholeyear$/i.test(t)?(o=""+(new Date).getFullYear(),h=i(o,n.year),s=l(o,n.year),[n.year,""+o,""+h,s]):[n.unknown,"","",null]},s=function(){function t(t,e){var n;n=h(t,e),this.dateType=n[0],this.dateString=n[1],this.shortDateString=n[2],this.dateObj=n[3]}return t.prototype.increment=function(t){return null==t&&(t=a[this.dateType]),m(this.dateObj,this.dateType,1,t)},t.prototype.decrement=function(t){return null==t&&(t=a[this.dateType]),m(this.dateObj,this.dateType,-1,t)},t.prototype.greaterThan=function(e){var n;return e instanceof t&&(n=Math.min(this.dateString.length,e.dateString.length),this.dateString.substring(0,n)>e.dateString.substring(0,n))},t.prototype.lessThan=function(e){var n;return e instanceof t&&(n=Math.min(this.dateString.length,e.dateString.length),this.dateString.substring(0,n)<e.dateString.substring(0,n))},t.prototype.isInThePast=function(){return this.lessThan(new t)},t.prototype.isTooFarInTheFuture=function(){var e;return e=new Date,e.setFullYear((new Date).getFullYear()+1),this.greaterThan(new t(u(e,this.dateType)))},t}(),s.DATE_TYPES=n,s.UNITS=a,t.exports=s}])})}).call(e,n(14)(t))},function(t,e){"use strict";t.exports=function(t){return t.webpackPolyfill||(t.deprecate=function(){},t.paths=[],t.children=[],t.webpackPolyfill=1),t}},function(t,e,n){var i,r,o,s=function(t,e){function n(){this.constructor=t}for(var i in e)a.call(e,i)&&(t[i]=e[i]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},a={}.hasOwnProperty;r=n(8),o=n(11),t.exports=i=function(t){function e(t){var n;t=this._normalizeOptions(t),n={originId:null,originName:null,originCityId:null,originCountryName:null,destinationId:null,destinationName:null,destinationCityId:null,destinationCountryName:null,date:null,dateObj:null,dateType:null,minDate:o.getTodaysDate(),maxDate:o.getOneYearFromTodaysDate(),fixed:!1},e.__super__.constructor.call(this,n,t),this.setDate(this.get("date"),!0)}return s(e,t),e.prototype.toAttributes=function(){return _.pick(e.__super__.toAttributes.call(this),["originId","originName","originCityId","originCountryName","originRegionId","destinationId","destinationName","destinationCityId","destinationCountryName","destinationRegionId","date"])},e.prototype.isEmpty=function(){return!(this.get("originId")||this.get("destinationId")||this.get("date"))},e.prototype.setDate=function(t,e){return null==e&&(e=!1),this.set("dateObj",o.getDateObjFromDate(t),!0),this.set("dateType",o.getDateTypeFromDate(t),!0),this.set("date",t,e===!0),this},e.prototype._normalizeOptions=function(t){return null==t&&(t={}),o.isDateInThePast(t.date)&&delete t.date,t},e}(r)},function(t,e,n){var i,r,o;r=n(12),i=n(11),o=[],o.push({key:"PreventSameCitySearchesTraditional",message:r("ktxtSearchControls_same_places_warn"),validate:function(t){var e,n,i,r;return!!t.isMultiCity()||(r=t.get("originId"),2===r.length||(n=t.get("destinationId"),(i=t.get("originCityId"))?(e=t.get("destinationCityId"),i!==e):r!==n))}}),o.push({key:"PreventSameCitySearchesMultiDest",message:r("ktxtSearchControls_same_places_warn"),validate:function(t){return!t.isMultiCity()||_.all(t.get("legs").getAll(),function(t){var e,n;return!(n=t.get("originCityId"))||(e=t.get("destinationCityId"),n!==e)})}}),o.push({key:"PreventIncompleteOrigin",message:r("ktxtSearchControls_EnterValidOrigin"),validate:function(t){return!t.isMultiCity()||_.all(t.get("legs").getAll(),function(t){return t.get("originId")})}}),o.push({key:"PreventIncompleteDestination",message:r("ktxtSearchControls_EnterValidDestination"),validate:function(t){return!t.isMultiCity()||_.all(t.get("legs").getAll(),function(t){return t.get("destinationId")})}}),o.push({key:"PreventDatesInThePastTrad",message:r("ktxtSearchControls_EnterValidDate"),validate:function(t){return!!t.isMultiCity()||!i.isDateInThePast(t.get("outboundDate"))&&!i.isDateInThePast(t.get("inboundDate"))}}),o.push({key:"PreventIncompleteDate",message:r("ktxtSearchControls_EnterValidDate"),validate:function(t){return!t.isMultiCity()||_.all(t.get("legs").getAll(),function(t){return t.get("date")})}}),o.push({key:"PreventLegDatesBeingOutOfSequence",message:r("ktxtSearchControls_DatesOutOfSequence"),validate:function(t){return!t.isMultiCity()||_.all(t.get("legs").getAll(),function(t,e,n){return 0===e||t.get("dateObj")>=n[e-1].get("dateObj")})}}),o.push({key:"PreventDatesInThePastMultiDest",message:r("ktxtSearchControls_EnterValidDate"),validate:function(t){return!t.isMultiCity()||_.all(t.get("legs").getAll(),function(t){return!i.isDateInThePast(t.get("date"))})}}),o.push({key:"EmptyChildAges",message:r("ktxtSearchControls_Passengers_childrenValidation"),validate:function(t){return!t.isChildrenAgeViewEnabled()||_.all(t.get("childrenV2"),function(t){return t>=0})}}),o.push({key:"MoreInfantsThanAdults",message:r("ktxtSearchControls_Passengers_infantValidation"),validate:function(t){var e;return!t.isChildrenAgeViewEnabled()||(e=t.get("childrenV2").filter(function(t){return t<2}),t.get("adultsV2")>=e.length)}}),t.exports=o},function(t,e){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var i=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),r=function(){function t(){n(this,t)}return i(t,[{key:"getDestinations",value:function(){return[{PlaceName:"",PlaceId:"SELA",CityId:"SELA"},{PlaceName:"",PlaceId:"TPET",CityId:"TPET"},{PlaceName:"",PlaceId:"BKKT",CityId:"BKKT"},{PlaceName:")",PlaceId:"HNL"},{PlaceName:")",PlaceId:"OKA"},{PlaceName:"",PlaceId:"HKG"},{PlaceName:")",PlaceId:"HND"},{PlaceName:"",PlaceId:"FUK"},{PlaceName:")",PlaceId:"CTS"},{PlaceName:"",PlaceId:"TYOA",CityId:"TYOA"},{PlaceName:")",PlaceId:"ICN"},{PlaceName:"",PlaceId:"OSAA",CityId:"OSAA"},{PlaceName:")",PlaceId:"SIN"},{PlaceName:")",PlaceId:"TPE"},{PlaceName:")",PlaceId:"BKK"},{PlaceName:")",PlaceId:"MNL"},{PlaceName:")",PlaceId:"HAN"},{PlaceName:")",PlaceId:"DPS"},{PlaceName:")",PlaceId:"SGN"}].map(function(t){return _.assign({},t,{IsPopularPlace:!0})})}},{key:"getTitle",value:function(){return""}}]),t}();e.default=r},function(t,e){var n,i,r,o,s,a,l;i={},s=function(t){return"on"===(i[t]||{}).status},o=function(t){return"off"===(i[t]||{}).status},l=function(t,e){return i[t]={status:"on",variant:e},this},a=function(t){return i[t]={status:"off",variant:null},this},r=function(t){return(i[t]||{}).variant},n=function(t){var e,n;for(e in t)n=t[e],"on"===n?l(e):a(e);return this},t.exports={isOn:s,isOff:o,switchOn:l,switchOff:a,getVariant:r,applyConfig:n}},function(t,e,n){var i,r,o,s,a,l,u,c=function(t,e){return function(){return t.apply(e,arguments)}};u=n(20),l=n(21),i=n(23),a=n(30),o=n(50),r=n(54),t.exports=s=function(){function t(t){this._onFirstInteraction=c(this._onFirstInteraction,this),this._generateMapContext=c(this._generateMapContext,this),this._generateMapLink=c(this._generateMapLink,this),this._onMapLinkClick=c(this._onMapLinkClick,this),this._renderMapLink=c(this._renderMapLink,this),this._validate=c(this._validate,this),this._onSearchButtonClick=c(this._onSearchButtonClick,this),this._getTraditionalSearchViewAutosuggests=c(this._getTraditionalSearchViewAutosuggests,this),this._getMultiCityAutosuggests=c(this._getMultiCityAutosuggests,this),this._copyModelPropertiesToFirstLeg=c(this._copyModelPropertiesToFirstLeg,this),this._evaluateTripTypeToRender=c(this._evaluateTripTypeToRender,this);var e;this.$el=$(t.el),this.model=t.model,this.eventBus=t.eventBus,this.urlBuilder=t.urlBuilder,this.model.isOpaqueOnDesktop()&&this.$el.addClass("opaque-on-desktop"),this.model.isOneLineSearchControlsEnabled()&&this.$el.addClass("one-line-search-controls"),this.model.isSjCompactViewEnabled()&&this.$el.addClass("sj-compact"),this.$el.html(u({mapURL:this._generateMapLink()})).removeClass("search-controls-loading"),e=this.model.isSjCompactViewEnabled()?r:l,this.tripTypeView=new e({$el:this.$el.find("#js-trip-type"),model:this.model,eventBus:this.eventBus}),this.traditionalSearchView=new a({$el:this.$el.find(".traditional-search"),model:this.model,eventBus:this.eventBus}),this.multiCitySearchView=new o({$el:this.$el.find(".search-controls-multi-city"),model:this.model,eventBus:this.eventBus}),this.cabinClassTravellersView=new i({model:this.model,eventBus:this.eventBus}),this._onFirstInteraction=_.once(this._onFirstInteraction),this._copyModelPropertiesToFirstLeg=_.once(this._copyModelPropertiesToFirstLeg),this._initEvents()}return t.prototype.render=function(){return this.tripTypeView.render(),this._evaluateTripTypeToRender(),this._triggerSearchLoadedEvents(),this._triggerSearchButtonNotVisibleEvent(),this},t.prototype.showTravellersPanel=function(t){var e;if(null==t&&(t={}),e=$(this[this.model.isMultiCity()?"multiCitySearchView":"traditionalSearchView"].getTravellerPanelSelector()),this.eventBus.trigger("toggle-cabin-class-travellers-view",{currentTarget:e.get(0)}),t.scrollToElement)return $("html, body").animate({scrollTop:e.offset().top},300)},t.prototype._initEvents=function(){return this.model.on("change:tripType",this._evaluateTripTypeToRender),this.model.on("change",this._renderMapLink),this.$el.on("click",".js-search-button",this._onSearchButtonClick),this.$el.on("click","#js-map-button",this._onMapLinkClick),this.$el.one("click keydown",this._onFirstInteraction)},t.prototype._evaluateTripTypeToRender=function(){return this.model.isMultiCity()?(this._copyModelPropertiesToFirstLeg(),this.traditionalSearchView.hide(),this.multiCitySearchView.render()):(this.traditionalSearchView.render(),this.multiCitySearchView.hide())},t.prototype._copyModelPropertiesToFirstLeg=function(){return this.model.copyPropertiesToFirstLeg()},t.prototype._getMultiCityAutosuggests=function(){return _.reduce(this.multiCitySearchView.routeViews,function(t,e){return t.concat([e.originAutosuggest,e.destAutosuggest])},[])},t.prototype._getTraditionalSearchViewAutosuggests=function(){return[this.traditionalSearchView.placesView.originAutosuggest,this.traditionalSearchView.placesView.destAutosuggest]},t.prototype._onSearchButtonClick=function(t){var e,n;return t.preventDefault(),this._showSpinner(t),e=this.model.isMultiCity()?this._getMultiCityAutosuggests():this._getTraditionalSearchViewAutosuggests(),n=_.map(e,function(t){return t?t.promise():{}}),$.when.apply($,n).always(function(e){return function(){if(e._validate(t))return e._triggerSearchSubmittedEvents(),setTimeout(function(){return e.eventBus.trigger("search",e.model.getUrlBuilderContext())},200)}}(this))},t.prototype._validate=function(t){var e,n,i,r;return r=this.model.clone().normalize().validate(),e=r.isValid,n=r.key,i=r.message,e?this.model.normalize():(this._triggerValidationEvents(n),this._hideSpinner(t),this._displayAlert(i))},t.prototype._renderMapLink=function(){return this.$el.find(".search-controls-map-button").attr("href",this._generateMapLink())},t.prototype._onMapLinkClick=function(t){return t.preventDefault(),this.eventBus.trigger("mixpanel-used","Map Link"),this.eventBus.trigger("map-link-click",this._generateMapContext())},t.prototype._generateMapLink=function(){var t,e;return e=this._generateMapContext(),("function"==typeof(t=this.urlBuilder).buildUrl?t.buildUrl(e):void 0)||""},t.prototype._generateMapContext=function(){return _.assign({},{targetPage:"inspiration-map"},this.model.getUrlBuilderContext())},t.prototype._onFirstInteraction=function(t){var e,n;return e=$(t.target),n=e.attr("id")||e.attr("for")||"N/A",this.eventBus.trigger("ga",{action:"SearchControlsUsed",label:n}),this.eventBus.trigger("mixpanel",{name:"Flight Search Controls Used",props:{"Field Used":n}})},t.prototype._displayAlert=function(t){if(null==t&&(t=null),null!==t)return alert(t)},t.prototype._showSpinner=function(t){var e,n;return e=$(t.currentTarget),n="bpk-icon-pointer",e.prop("disabled",!0).find("."+n).removeClass(n).addClass("bpk-icon-spinner")},t.prototype._hideSpinner=function(t){var e,n;return e=$(t.currentTarget),n="bpk-icon-spinner",e.prop("disabled",!1).find("."+n).removeClass("bpk-icon-spinner").addClass("bpk-icon-pointer")},t.prototype._triggerSearchSubmittedEvents=function(){var t,e,n,i,r;return this.eventBus.trigger("ga",{action:"SearchClick"}),r={"Field Used":"Search Button"},n=this.traditionalSearchView.placesView.originAutosuggest,t=this.traditionalSearchView.placesView.destAutosuggest,n&&t&&(i=n.hasResolved(),e=t.hasResolved(),
r["Autocomplete completed"]=i&&e?"True":i?"Inbound only":e?"Return only":"False"),this.eventBus.trigger("mixpanel",{name:"Flight Search Field Used (Filtered)",props:r})},t.prototype._triggerSearchLoadedEvents=function(){return this.eventBus.trigger("ga",{action:"SearchControlsLoaded"}),this.eventBus.trigger("mixpanel",{name:"Search Controls Loaded"})},t.prototype._triggerValidationEvents=function(t){if(null==t&&(t=null),null!==t)return this.eventBus.trigger("ga",{action:"SearchControlsValidation",label:t}),this.eventBus.trigger("mixpanel",{name:"Flight Search Controls Validation Occurred",props:{"Search Controls Validation Key":t}})},t.prototype._triggerSearchButtonNotVisibleEvent=function(){if(!this._isSearchButtonInViewport())return this.eventBus.trigger("mixpanel",{name:"Flight Search Button Not Visible"})},t.prototype._isSearchButtonInViewport=function(){var t,e,n;return t=this.$el.find("#js-search-button"),!!t.length&&(n=t.get(0).getBoundingClientRect(),e=$(window),n.top>=0&&n.left>=0&&n.bottom<=e.height()&&n.right<=e.width())},t}()},function(module,exports,__webpack_require__){var translate=__webpack_require__(12);module.exports=function(obj){obj||(obj={});var __t,__p="";with(obj)__p+='<form class="clearfix"><section id="js-trip-type" class="search-controls-trip-type"></section><a href="'+(null==(__t=mapURL)?"":__t)+"\" id='js-map-button' class='search-controls-map-button'><span>"+(null==(__t=translate("ktxtSearchControls_MapLink_Map"))?"":__t)+'</span></a><section class="traditional-search clearfix"></section><section class="search-controls-multi-city clearfix"></section></form>';return __p}},function(t,e,n){var i,r,o=function(t,e){return function(){return t.apply(e,arguments)}};r=n(22),t.exports=i=function(){function t(t){this._onTripTypeChange=o(this._onTripTypeChange,this),this.render=o(this.render,this),this.$el=t.$el,this.model=t.model,this.eventBus=t.eventBus,this._initEvents()}return t.prototype.render=function(){var t,e,n;return e=!!(null!=(n=this.model.get("featureFlags"))?n.multiCityEnabled:void 0),e&&this.$el.addClass("multi-city-enabled"),t=this.$el.find(":focus").attr("id"),this.$el.html(r({isReturn:this.model.isReturn(),isOneWay:this.model.isOneWay(),isMultiCity:this.model.isMultiCity(),multiCityEnabled:e})),t&&this.$el.find("#"+t).focus(),this},t.prototype._initEvents=function(){return this.model.on("change:tripType",this.render),this.$el.on("change","[name=trip-type]",this._onTripTypeChange)},t.prototype._onTripTypeChange=function(t){var e;if(e=$(t.currentTarget).val())return this.model.set("tripType",e),this.eventBus.trigger("mixpanel-used","Trip Type: "+e),this.eventBus.trigger("ga",{action:"SearchControlsTripTypeToggle",label:e})},t}()},function(module,exports,__webpack_require__){var translate=__webpack_require__(12);module.exports=function(obj){function print(){__p+=__j.call(arguments,"")}obj||(obj={});var __t,__p="",__j=Array.prototype.join;with(obj)__p+='<input type="radio" id="js-is-return-input" name="trip-type" value="return" class="visuallyhidden" tabindex="1" ',isReturn&&(__p+='checked="checked"'),__p+=' /><label for="js-is-return-input" class="return-trip ',isReturn&&(__p+="checked"),__p+='">'+(null==(__t=translate("ktxtSearchControls_Return"))?"":__t)+'</label><input type="radio" id="js-one-way-input" name="trip-type" value="one-way" class="visuallyhidden" tabindex="1" ',isOneWay&&(__p+='checked="checked"'),__p+=' /><label for="js-one-way-input" class="one-way-trip ',isOneWay&&(__p+="checked"),__p+='">'+(null==(__t=translate("ktxtSearchControls_OneWay"))?"":__t)+"</label>",multiCityEnabled&&(__p+='<input type="radio" id="js-multi-city-input" name="trip-type" value="multi-destination" class="visuallyhidden" tabindex="1" ',isMultiCity&&(__p+='checked="checked"'),__p+=' /><label for="js-multi-city-input" class="multi-city-trip ',isMultiCity&&(__p+="checked"),__p+='">'+(null==(__t=translate("ktxtSearchControls_MultiCity"))?"":__t)+"</label>"),__p+="";return __p}},function(t,e,n){var i,r,o,s,a,l,u,c=function(t,e){return function(){return t.apply(e,arguments)}},h=function(t,e){function n(){this.constructor=t}for(var i in e)d.call(e,i)&&(t[i]=e[i]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},d={}.hasOwnProperty;o=n(24),r=n(26),s=n(27),l=n(12),a=n(28),u=n(29),t.exports=i=function(t){function e(t){var n,i,r;null==t&&(t={}),this._hideTravellersTooltip=c(this._hideTravellersTooltip,this),this._showTravellersTooltip=c(this._showTravellersTooltip,this),this._onTravellersChange=c(this._onTravellersChange,this),this._onCabinClassChange=c(this._onCabinClassChange,this),this._setCabinClass=c(this._setCabinClass,this),this.model=t.model,this.eventBus=t.eventBus,e.__super__.constructor.call(this,{innerContent:a({isChildrenAgeViewEnabled:this.model.isChildrenAgeViewEnabled()}),customClass:"pax-cabin-class",strings:{titleText:l("ktxtSearchControls_TravellersAndCabinClassTitle"),hideText:l("ktxtSearchControls_Done")},autoHide:!0}),this.$el=$(this.el),this.$cabinClassEl=this.$el.find("#js-cabin-class-dropdown"),this.$economyOnly=this.$el.find("#js-cabin-class-economy-only"),this._setCabinClass(),n=this.model.isChildrenAgeViewEnabled()?this.model.get("adultsV2"):this.model.get("adults"),r=this.model.isChildrenAgeViewEnabled()?this.model.get("childrenV2").length:this.model.get("children"),this.travellerNudgers=new s({el:this.el.querySelector("#js-travellers"),onChange:this._onTravellersChange,adults:n,children:r,infants:this.model.get("infants"),childAges:this.model.get("childrenV2"),isChildrenAgeView:this.model.isChildrenAgeViewEnabled(),strings:{adultsText:l("ktxtSearchControls_Adults"),adultsSubText:l("ktxtSearchControls_Adults_AgeRanges"),adultsSubText_16:l("ktxtSearchControls_Passengers_adultRange"),childrenText:l("ktxtSearchControls_Children"),childrenSubText:l("ktxtSearchControls_Children_AgeRanges"),childrenSubText_16:l("ktxtSearchControls_Passengers_childRange"),infantsText:l("ktxtSearchControls_Infants"),infantsSubText:l("ktxtSearchControls_Infants_AgeRanges"),adultSingularText:l("ktxtSearchControls_AdultsSingular"),travellersPluralText:l("ktxtSearchControls_Travellers_Plural"),ageOfChildText:l("ktxtSearchControls_Passengers_childAge")}}),this.model.isChildrenAgeViewEnabled()||(this._travellersHelpTooltip=new o({className:"travellers-help-tooltip",content:u(),closeButton:!0,customWidth:230})).positionRelativeTo({$el:this.$el.find("#js-travellers-help"),relativePosition:o.prototype.POSITIONS.left,relativePositionOnMobile:o.prototype.POSITIONS.left}),this.eventBus.on("toggle-cabin-class-travellers-view",function(t){return function(e){return t.$el.hasClass("hidden")?t.show({relativeEl:e.currentTarget}):t.hide()}}(this)),i="change:originId change:destinationId change:outboundDate change:inboundDate change:tripType",this.model.on(i,this._setCabinClass),this.$el.on("change","#js-cabin-class-dropdown",this._onCabinClassChange),this.$el.on("touchstart mouseover","#js-travellers-help",this._showTravellersTooltip),this.$el.on("mouseleave","#js-travellers-help",this._hideTravellersTooltip)}return h(e,t),e.prototype._setCabinClass=function(){var t;return this.$cabinClassEl.val(this.model.get("cabinClass")),t=!this.model.isDayViewSearch(),this.$cabinClassEl[t?"addClass":"removeClass"]("hidden"),this.$economyOnly[t?"removeClass":"addClass"]("hidden")},e.prototype._onCabinClassChange=function(t){var e;if(e=$(t.currentTarget).val())return this.model.set("cabinClass",e)},e.prototype._onTravellersChange=function(t){var e,n,i,r;return e=t.adults,i=t.children,r=t.infants,n=t.childAges,this.model.isChildrenAgeViewEnabled()?(this.model.set("adultsV2",e),this.model.set("childrenV2",n),this.model.set("adults",e+n.filter(function(t){return t>=12}).length),this.model.set("children",n.filter(function(t){return t<12&&t>=2}).length),this.model.set("infants",n.filter(function(t){return t<2}).length)):(this.model.set("adults",e),this.model.set("children",i),this.model.set("infants",r)),this.eventBus.trigger("mixpanel-used","Traveller Nudgers")},e.prototype._showTravellersTooltip=function(){return this._travellersHelpTooltip.show(),this.eventBus.trigger("mixpanel-used","Travellers Tooltip")},e.prototype._hideTravellersTooltip=function(){return this._travellersHelpTooltip.hide()},e}(r)},function(t,e,n){var i,r,o=function(t,e){return function(){return t.apply(e,arguments)}};r=n(25),t.exports=i=function(){function t(t){null==t&&(t={}),this._updatePosition=o(this._updatePosition,this),this._appendToBody=o(this._appendToBody,this),this.hide=o(this.hide,this),this.$el=$("<aside>"),t.id&&this.$el.attr("id",t.id),this.$el.addClass("search-controls-tooltip"),t.className&&this.$el.addClass(t.className),this.content=t.content,this.customWidth=t.customWidth,this.closeButton=!!t.closeButton&&r.touch,this.$relativeEl=$("<div>"),this.relativePosition=this.POSITIONS.top,this.relativePositionOnMobile=this.POSITIONS.top,$(window).resize(this._updatePosition),this._appendToBody=_.once(_.bind(this._appendToBody,this))}return t.prototype.POSITIONS={top:"top",bottom:"bottom",left:"left",right:"right"},t.prototype.show=function(){return this._appendToBody(),this.$el.html(this.content),this.closeButton&&this.$el.append('<button type="button"></button>'),this.$el.show(),this._initEvents(),this._updatePosition()},t.prototype.hide=function(){return this.$el.hide()},t.prototype.positionRelativeTo=function(t){var e,n,i;return e=t.$el,n=t.relativePosition,i=t.relativePositionOnMobile,this.$relativeEl=e,this.relativePosition=n,this.relativePositionOnMobile=i},t.prototype._initEvents=function(){return this.$el.find("button").on("touchstart",function(t){return function(e){return e.preventDefault(),t.hide()}}(this))},t.prototype._appendToBody=function(){return $("body").append(this.$el)},t.prototype._setTooltipClass=function(t){return this.$el.removeClass("position-top"),this.$el.removeClass("position-right"),this.$el.removeClass("position-bottom"),this.$el.removeClass("position-left"),this.$el.addClass("position-"+t)},t.prototype._updatePosition=function(){var t;return this.$el.outerWidth(this.customWidth||this.$relativeEl.outerWidth()),t=$(window).width()<=500?this.relativePositionOnMobile:this.relativePosition,this._setTooltipClass(t),this.$el.css(this._calculateTooltipOffset(t))},t.prototype._calculateTooltipOffset=function(t){var e,n;switch(n=this.$relativeEl.offset(),e=15,t){case this.POSITIONS.right:return{left:n.left+this.$relativeEl.outerWidth()+e,top:n.top-this.$el.outerHeight()/2+this.$relativeEl.outerHeight()/2};case this.POSITIONS.bottom:return{left:n.left,top:n.top+this.$relativeEl.outerHeight()+e};case this.POSITIONS.left:return{left:n.left-this.$el.outerWidth()-e,top:n.top-this.$el.outerHeight()/2+this.$relativeEl.outerHeight()/2};default:return{left:n.left,top:n.top-this.$el.outerHeight()-e}}},t}()},function(t,e){var n;t.exports=n={touch:function(){return"ontouchstart"in window||window.DocumentTouch&&document instanceof DocumentTouch}(),placeholder:function(){return"placeholder"in document.createElement("input")}()}},function(t,e,n){var i,r,o;(function(t){"use strict";var n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};!function(s,a){"object"===n(e)&&"object"===n(t)?t.exports=a():(r=[],i=a,o="function"==typeof i?i.apply(e,r):i,!(void 0!==o&&(t.exports=o)))}(void 0,function(){return function(t){function e(i){if(n[i])return n[i].exports;var r=n[i]={exports:{},id:i,loaded:!1};return t[i].call(r.exports,r,r.exports,e),r.loaded=!0,r.exports}var n={};return e.m=t,e.c=n,e.p="",e(0)}([function(t,e,n){var i,r,o,s,a,l,u,c=function(t,e){return function(){return t.apply(e,arguments)}};i=n(1),s=function(){return i.getViewportWidth()<=500},l=function(){var t;return t=window.history&&"pushState"in window.history,t&&s()},a=function(){if(l())return window.history.pushState({popover:!0},"")},u=function(t,e){var n,i;return s()?(t.style.position="fixed",t.style.top=0,t.style.right=0,t.style.bottom=0,t.style.left=0):(i=e.getBoundingClientRect(),t.style.position="absolute",t.style.top=i.top+(window.pageYOffset||0)+e.offsetHeight+10+"px",t.style.right="",t.style.bottom="",n=i.left+(e.offsetWidth-t.offsetWidth)/2,n+t.offsetWidth>window.innerWidth&&(n=window.innerWidth-t.offsetWidth-10),t.style.left=(n<0?10:n)+"px")},o=function(t){var e,n,r,o,s,a,l,u,c;if(null==t&&(t={}),c=t.strings||{},u=t.hideCloseButton?"hidden":"",a="<header class='clearfix'>\n  <span class='popover-title'>"+c.titleText+"</span>\n  <button type='button' class='popover-hide'>"+c.hideText+"</button>\n</header>\n<div class='popover-content clearfix'>\n  <button type='button' class='popover-hide "+u+"'>"+c.hideText+"</button>\n</div>",n=i.createElement("div",{className:"popover hidden "+(t.customClass||""),innerHTML:a}),!(s=t.innerContent))return n;if(e=i.getElement(".popover-content",n),"string"==typeof s)e.innerHTML+=s;else if(s.length)for(o=0,l=s.length;o<l;o++)r=s[o],e.appendChild(r);else e.appendChild(s);return n},r=function(){function t(t){var e;this.popoverOptions=null!=t?t:{},this._onDocumentClick=c(this._onDocumentClick,this),this._onClick=c(this._onClick,this),this._onWindowResize=c(this._onWindowResize,this),(e=this.popoverOptions.relativeEl)&&(this.relativeEl=i.getElement(e)),this.el=o(this.popoverOptions),this._prevYOffset=null,i.addEventListener(window,"resize",this._onWindowResize),i.addEventListener(window,"popstate",function(t){return function(e){if(e.state&&e.state.popover)return t.hide()}}(this)),i.addEventListener(this.el,"click",this._onClick)}return t.prototype.show=function(t){var e;return null==t&&(t={}),this._appendToBody(),(e=t.relativeEl)&&(this.relativeEl=i.getElement(e)),i.removeClass(this.el,"hidden"),u(this.el,this.relativeEl),s()?this._freezeBodyScroll():this._releaseBodyScroll(),a(),this._normalizeFocus(),setTimeout(function(t){return function(){return i.addEventListener(document,"click",t._onDocumentClick)}}(this),0),{isMobile:s()}},t.prototype.hide=function(){return i.addClass(this.el,"hidden"),this._releaseBodyScroll(),i.removeEventListener(document,"click",this._onDocumentClick)},t.prototype._onWindowResize=function(){var t;if(!i.hasClass(this.el,"hidden"))return this.show(),"function"==typeof(t=this.popoverOptions).onWindowResize?t.onWindowResize({isMobile:s()}):void 0},t.prototype._onClick=function(t){if(i.hasClass(t.target||t.srcElement,"popover-hide"))return this.hide()},t.prototype._onDocumentClick=function(t){var e;if(!s()&&this.popoverOptions.autoHide&&(e=t.target||t.srcElement,e!==this.el&&!this.el.contains(e)&&e!==this.relativeEl))return this.hide()},t.prototype._normalizeFocus=function(){if(!i.childHasFocus(this.el)&&s())return document.activeElement.blur()},t.prototype._freezeBodyScroll=function(){return this._prevYOffset||(this._prevYOffset=window.pageYOffset),i.addClass(document.body,"popover-open")},t.prototype._releaseBodyScroll=function(){if(i.removeClass(document.body,"popover-open"),null!==this._prevYOffset)return window.scrollTo(0,this._prevYOffset),this._prevYOffset=null},t.prototype._appendToBody=function(){if(!this._appended)return document.body.appendChild(this.el)&&(this._appended=!0)},t}(),t.exports=r},function(t,e,n){!function(e,n){t.exports=n()}(this,function(){return function(t){function e(i){if(n[i])return n[i].exports;var r=n[i]={exports:{},id:i,loaded:!1};return t[i].call(r.exports,r,r.exports,e),r.loaded=!0,r.exports}var n={};return e.m=t,e.c=n,e.p="",e(0)}([function(t,e){var n,i,r,o,s,a,l,u,c,h,d,p={}.hasOwnProperty;s=function(t,e){return null==e&&(e=document),"string"==typeof t?e.querySelector(t):t||null},o=function(t,e){var n,i,r;null==e&&(e={}),n=document.createElement(t);for(i in e)p.call(e,i)&&(r=e[i],i in n?n[i]=r:n.setAttribute(i,r));return n},i=function(t,e,n){return t.addEventListener?t.addEventListener(e,n):t.attachEvent("on"+e,function(){return n.call(t,window.event)})},h=function(t,e,n){return t.removeEventListener?t.removeEventListener(e,n):t.detachEvent("on"+e,n)},n=function(t,e){return t.classList?t.classList.add(e):t.className+=" "+e},c=function(t,e){return t.classList?t.classList.remove(e):t.className=t.className.replace(RegExp("(^|\\b)"+e.split(" ").join("|")+"(\\b|$)","gi")," ")},u=function(t,e){return t.classList?t.classList.contains(e):RegExp("(^| )"+e+"( |$)","gi").test(t.className)},d=function(t,e){return u(t,e)?c(t,e):n(t,e)},r=function(t){var e;return t.contains(e=document.activeElement)||e===t},l=function(){return Math.max(document.documentElement.clientWidth,window.innerWidth||0)},a=function(t,e,n){var i;return i=new XMLHttpRequest,i.open("GET",t,!0),i.onreadystatechange=function(){var t;if(4===this.readyState)return t=this.status>=200&&this.status<400,t?e(JSON.parse(this.responseText)):n(this.status)},i.send(),i=null},t.exports={getElement:s,createElement:o,addEventListener:i,removeEventListener:h,addClass:n,removeClass:c,hasClass:u,toggleClass:d,childHasFocus:r,getViewportWidth:l,getJSON:a}}])})}])})}).call(e,n(14)(t))},function(t,e,n){var i,r,o;(function(t){"use strict";var n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};!function(s,a){"object"===n(e)&&"object"===n(t)?t.exports=a():(r=[],i=a,o="function"==typeof i?i.apply(e,r):i,!(void 0!==o&&(t.exports=o)))}(void 0,function(){return function(t){function e(i){if(n[i])return n[i].exports;var r=n[i]={exports:{},id:i,loaded:!1};return t[i].call(r.exports,r,r.exports,e),r.loaded=!0,r.exports}var n={};return e.m=t,e.c=n,e.p="",e(0)}([function(t,e,n){var i,r,o,s,a,l,u=function(t,e){return function(){return t.apply(e,arguments)}},c={}.hasOwnProperty,h=[].indexOf||function(t){for(var e=0,n=this.length;e<n;e++)if(e in this&&this[e]===t)return e;return-1};i=n(1),l=[],s=function(t,e,n){var r,o,s,a,u,c,h,d,p,g,_,f,m,y,v,b,C,D,w;if(null==t&&(t={}),null==e&&(e=i.createElement("div")),D=function(e){return'<label for="js-'+e+"\" class='traveller-label'>"+t[e+"Text"]+'</label>\n<button type="button" class="decrement '+e+'" data-selector="#js-'+e+'" tabindex="1"></button>\n<input type="text" id="js-'+e+'" readonly/>\n<button type="button" class="increment '+e+'" data-selector="#js-'+e+'" tabindex="1">+</button>\n<span>'+t[e+"SubText"]+"</span>"},w=function(e){return'<label for="js-'+e+"\" class='traveller-label'>"+t[e+"Text"]+'</label>\n<button type="button" class="decrement '+e+'" data-selector="#js-'+e+'" tabindex="1"></button>\n<input type="text" id="js-'+e+'" readonly/>\n<button type="button" class="increment '+e+'" data-selector="#js-'+e+'" tabindex="1">+</button>\n<span>'+t[e+"SubText_16"]+"</span>"},o=function(t){return"<option value="+t+">"+t+"</option>"},r=function(e){var n,i,r,s;for(i=t.ageOfChildText.replace("@@childNumber@@",e+1),s='<option value="-1">-</option>',r=n=0;n<=15;r=++n)s+=o(r);return"<div id='childDiv-"+e+"' class='hidden'>\n<label for=\"childAge-"+e+'" class="traveller-label">'+i+'</label>\n<select id="childAge-'+e+"\" class='childAge' data-selector='"+e+"'>"+s+"</select>\n</div>"},a=function(t){return'<div class="childAges">'+t+"</div>"},i.addClass(e,"traveller-nudgers"),d="",n){for(c=0,f=l.length;c<f;c++)C=l[c],d+=w(C);for(s="",b=p=0;p<=7;b=++p)s+=r(b);d+=a(s)}else for(g=0,m=l.length;g<m;g++)C=l[g],d+=D(C);for(e.innerHTML=d,u={el:e},_=0,y=l.length;_<y;_++)C=l[_],u[C+"El"]=i.getElement("#js-"+C,e),u[C+"IncEl"]=i.getElement(".increment."+C,e),u[C+"DecEl"]=i.getElement(".decrement."+C,e);for(u.childAgeSelects=[],u.childAgeDivs=[],h=v=0;v<=7;h=++v)u.childAgeSelects[h]=i.getElement("#childAge-"+h,e),u.childAgeDivs[h]=i.getElement("#childDiv-"+h,e);return u},o=function(t,e){var n,i,r,o,s,a;for(n=0,s=[t.adults,t.children,t.infants||0],i=0,o=s.length;i<o;i++)a=s[i],n+=a;return r=n>1?"travellersPluralText":"adultSingularText",n+" "+e[r]},a=function(t,e){var n;return t=parseInt(t,10),n=8,t<e?e:t>n?n:t},t.exports=r=function(){function t(t){var e,n,i,r,o,a,h,d,p,g,_,f,m;this.options=null!=t?t:{},this._onChildAgeChange=u(this._onChildAgeChange,this),this._onInfantsChange=u(this._onInfantsChange,this),this._onChildrenChange=u(this._onChildrenChange,this),this._onAdultsChange=u(this._onAdultsChange,this),this._onDecrementClick=u(this._onDecrementClick,this),this._onIncrementClick=u(this._onIncrementClick,this),d=this.options.strings;for(a in d)c.call(d,a)&&(m=d[a],this.STRINGS[a]=m);this.isChildrenAgeView=this.options.isChildrenAgeView,l=["adults","children"],this.isChildrenAgeView||l.push("infants"),p=s(this.STRINGS,this.options.el,this.isChildrenAgeView),this.el=p.el,this.adultsEl=p.adultsEl,this.adultsIncEl=p.adultsIncEl,this.adultsDecEl=p.adultsDecEl,this.childrenEl=p.childrenEl,this.childrenIncEl=p.childrenIncEl,this.childrenDecEl=p.childrenDecEl,this.infantsEl=p.infantsEl,this.infantsIncEl=p.infantsIncEl,this.infantsDecEl=p.infantsDecEl,this.childAgeSelects=p.childAgeSelects,this.childAgeDivs=p.childAgeDivs,g=this.EVENTS;for(f in g)if(c.call(g,f))for(i=g[f],_=this.el.querySelectorAll(f),o=0,h=_.length;o<h;o++){e=_[o];for(n in i)c.call(i,n)&&(r=i[n],e.addEventListener(n,this[r]))}this.counts={},this.childAges=(this.options.childAges||[]).concat([-1,-1,-1,-1,-1,-1,-1,-1]),this.setTravellers({adults:this.options.adults||1,children:this.options.children||0,infants:this.options.infants||0}),this.isChildrenAgeView&&this.setChildrenAges()}return t.prototype.EVENTS={".increment":{click:"_onIncrementClick"},".decrement":{click:"_onDecrementClick"},"#js-adults":{change:"_onAdultsChange"},"#js-children":{change:"_onChildrenChange"},"#js-infants":{change:"_onInfantsChange"},".childAge":{change:"_onChildAgeChange"}},t.prototype.STRINGS={adultsText:"Adults",adultsSubText:"12+ years",adultsSubText_16:"16+ years",childrenText:"Children",childrenSubText:"under 12",childrenSubText_16:"0-15 years",infantsText:"Infants",infantsSubText:"under 2",adultSingularText:"adult",travellersPluralText:"travellers",ageOfChildText:"Age of child @@childNumber@@"},t.prototype.setTravellers=function(t){var e,n,r,o,s,u,d,p,g,_,f;null==t&&(t={});for(d in t)c.call(t,d)&&(f=t[d],h.call(l,d)<0||(g="adults"===d?1:0,f=a(f,g),this.counts[d]=f,this[d+"El"].value=f));this.counts.infants>(n=this.counts.adults)&&(this.counts.infants=n,this.infantsEl.value=n),_=this.counts;for(d in _)c.call(_,d)&&(f=_[d],r=this[d+"DecEl"],s=this[d+"IncEl"],e=document.activeElement,p=8,"infants"===d&&(p=this.counts.adults),g="adults"===d?1:0,r.disabled=f<=g,s.disabled=f>=p,r===e&&r.disabled&&s.focus(),s===e&&s.disabled&&r.focus());if(this.isChildrenAgeView)for(u=o=0;o<=7;u=++o)u<this.counts.children?i.removeClass(this.childAgeDivs[u],"hidden"):i.addClass(this.childAgeDivs[u],"hidden");return this._publish()},t.prototype.setChildrenAges=function(){var t,e,n;for(n=[],e=t=0;t<=7;e=++t)n.push(this.childAgeSelects[e].value=this.childAges[e]);return n},t.prototype._publish=function(){var t;return"function"==typeof(t=this.options).onChange?t.onChange({adults:this.counts.adults,children:this.counts.children,infants:this.counts.infants,childAges:this.isChildrenAgeView?this.childAges.slice(0,this.counts.children):void 0,friendlyString:o(this.counts,this.STRINGS)}):void 0},t.prototype._onIncrementClick=function(t){var e,n;return n=t.currentTarget.getAttribute("data-selector"),e=i.getElement(n,this.el),e.value=parseInt(e.value,10)+1,this[this.EVENTS[n].change]({currentTarget:e})},t.prototype._onDecrementClick=function(t){var e,n;return n=t.currentTarget.getAttribute("data-selector"),e=i.getElement(n,this.el),e.value=parseInt(e.value,10)-1,this[this.EVENTS[n].change]({currentTarget:e})},t.prototype._onAdultsChange=function(t){return this.setTravellers({adults:t.currentTarget.value})},t.prototype._onChildrenChange=function(t){return this.setTravellers({children:t.currentTarget.value})},t.prototype._onInfantsChange=function(t){return this.setTravellers({infants:t.currentTarget.value})},t.prototype._onChildAgeChange=function(t){return this.childAges[t.currentTarget.getAttribute("data-selector")]=parseInt(t.currentTarget.value,10),this._publish()},t}()},function(t,e,n){!function(e,n){t.exports=n()}(this,function(){return function(t){function e(i){if(n[i])return n[i].exports;var r=n[i]={exports:{},id:i,loaded:!1};return t[i].call(r.exports,r,r.exports,e),r.loaded=!0,r.exports}var n={};return e.m=t,e.c=n,e.p="",e(0)}([function(t,e){var n,i,r,o,s,a,l,u,c={}.hasOwnProperty;s=function(t,e){return null==e&&(e=document),"string"==typeof t?e.querySelector(t):t||null},o=function(t,e){var n,i,r;null==e&&(e={}),n=document.createElement(t);for(i in e)c.call(e,i)&&(r=e[i],i in n?n[i]=r:n.setAttribute(i,r));return n},i=function(t,e,n){return t.addEventListener?t.addEventListener(e,n):t.attachEvent("on"+e,function(){return n.call(t,window.event)})},n=function(t,e){return t.classList?t.classList.add(e):t.className+=" "+e},u=function(t,e){return t.classList?t.classList.remove(e):t.className=t.className.replace(RegExp("(^|\\b)"+e.split(" ").join("|")+"(\\b|$)","gi")," ")},l=function(t,e){return t.classList?t.classList.contains(e):RegExp("(^| )"+e+"( |$)","gi").test(t.className)},r=function(t){var e;return t.contains(e=document.activeElement)||e===t},a=function(){return Math.max(document.documentElement.clientWidth,window.innerWidth||0)},t.exports={getElement:s,createElement:o,addEventListener:i,addClass:n,removeClass:u,hasClass:l,childHasFocus:r,getViewportWidth:a}}])})}])})}).call(e,n(14)(t))},function(module,exports,__webpack_require__){var translate=__webpack_require__(12);module.exports=function(obj){function print(){__p+=__j.call(arguments,"")}obj||(obj={});var __t,__p="",__j=Array.prototype.join;with(obj)__p+='<label for="js-cabin-class-dropdown">'+(null==(__t=translate("ktxtSearchControls_CabinClassTerm_Title"))?"":__t)+'</label><select id="js-cabin-class-dropdown" class="cabin-class-dropdown" tabindex="1"><option value="Economy">'+(null==(__t=translate("ktxtSearchControls_CabinClassTerm_Economy"))?"":__t)+'</option><option value="PremiumEconomy">'+(null==(__t=translate("ktxtSearchControls_CabinClassTerm_PremiumEconomy"))?"":__t)+'</option><option value="Business">'+(null==(__t=translate("ktxtSearchControls_CabinClassTerm_Business"))?"":__t)+'</option><option value="First">'+(null==(__t=translate("ktxtSearchControls_CabinClassTerm_First"))?"":__t)+'</option></select><div id="js-cabin-class-economy-only" class="cabin-class-economy-only"><p><strong>'+(null==(__t=translate("ktxtSearchControls_CabinClassTerm_SelectPromptTitle"))?"":__t)+"</strong></p><p>"+(null==(__t=translate("ktxtSearchControls_EconomyOnly"))?"":__t)+'</p></div><div id="js-travellers"></div>',__p+=isChildrenAgeViewEnabled?"<div class='passengers-legal'><p class='top'>"+(null==(__t=translate("ktxtSearchControls_Passengers_legal1"))?"":__t)+"</p><p class='bottom'>"+(null==(__t=translate("ktxtSearchControls_Passengers_legal2"))?"":__t)+"</p></div>":'<button type="button" id="js-travellers-help" class="travellers-help">?</button>',__p+="";return __p}},function(module,exports,__webpack_require__){var translate=__webpack_require__(12);module.exports=function(obj){obj||(obj={});var __t,__p="";with(obj)__p+="<ul><li>"+(null==(__t=translate("ktxtSearchControls_TravellersTooltip_Adults"))?"":__t)+"</li><li>"+(null==(__t=translate("ktxtSearchControls_TravellersTooltip_Children"))?"":__t)+"</li><li>"+(null==(__t=translate("ktxtSearchControls_TravellersTooltip_Infants"))?"":__t)+"</li></ul><p>"+(null==(__t=translate("ktxtSearchControls_TravellersTooltip_Paragraph"))?"":__t)+"</p>";return __p}},function(t,e,n){var i,r,o,s,a,l=function(t,e){return function(){return t.apply(e,arguments)}};a=n(31),o=n(36),i=n(41),r=n(47),t.exports=s=function(){function t(t){this._updatePreferDirectsCheckbox=l(this._updatePreferDirectsCheckbox,this),this._onPreferDirectsChange=l(this._onPreferDirectsChange,this),this.$el=t.$el,this.model=t.model,this.eventBus=t.eventBus,this.$el.html(a({preferDirects:this.model.get("preferDirects")})),this.$el.on("change","#js-prefer-directs",this._onPreferDirectsChange),this.model.on("change:preferDirects",this._updatePreferDirectsCheckbox),this.placesView=new o({$el:this.$el.find("#js-places"),model:this.model,eventBus:this.eventBus}),this.datesView=new i({$el:this.$el.find("#js-dates"),model:this.model,eventBus:this.eventBus}),this.paxCabinClassView=new r({$el:this.$el.find("#js-pax-cabin-class"),model:this.model,eventBus:this.eventBus})}return t.prototype.render=function(){if(this.$el.show(),!this.alreadyRendered)return this.placesView.render(),this.datesView.render(),this.paxCabinClassView.render(),this.alreadyRendered=!0},t.prototype.getDirectCheckboxContainer=function(){return this.$el.find("#js-prefer-directs").parent()},t.prototype.hide=function(){return this.$el.hide()},t.prototype.getTravellerPanelSelector=function(){return this.paxCabinClassView.getTravellerPanelSelector()},t.prototype._onPreferDirectsChange=function(){return this.model.set("preferDirects",!this.getDirectCheckboxContainer().hasClass("checked")),this.eventBus.trigger("mixpanel-used","Prefer Directs")},t.prototype._updatePreferDirectsCheckbox=function(){return this.getDirectCheckboxContainer().toggleClass("checked",this.model.get("preferDirects"))},t}()},function(module,exports,__webpack_require__){var translate=__webpack_require__(12);module.exports=function(obj){function print(){__p+=__j.call(arguments,"")}obj||(obj={});var __t,__p="",__j=Array.prototype.join;with(obj)__p+='<div id="js-places" class="search-controls-places clearfix"></div><div id="js-dates" class="search-controls-dates"></div><div id="js-pax-cabin-class" class="search-controls-pax-cabin-class"></div><label class="sc-checkbox prefer-directs ',preferDirects&&(__p+="checked"),__p+='"><input type="checkbox" id="js-prefer-directs" class="visuallyhidden" tabindex="1" ',preferDirects&&(__p+='checked="checked"'),__p+=" />"+(null==(__t=translate("ktxtSearchControls_DirectFlightsOnly"))?"":__t)+"</label>"+(null==(__t=__webpack_require__(32)({extra_class:"js-search-button",has_pointer:!0,is_large:!0,text:translate("ktxtSearchControls_SearchFlights"),extra_attrs:{tabindex:"1",type:"button"}}))?"":__t);return __p}},function(module,exports,__webpack_require__){var translate=__webpack_require__(12);module.exports=function(obj){function print(){__p+=__j.call(arguments,"")}obj||(obj={});var __t,__p="",__j=Array.prototype.join;with(obj){obj.has_pointer&&(obj.has_icon=!0),__p+="";var domAttributes=__webpack_require__(33).default,extra_data=""+domAttributes(obj.extra_data,"data-"),extra_attrs=""+domAttributes(obj.extra_attrs);obj=_.assign({extra_class:"",is_large:!1,is_selected:!1,is_disabled:!1,has_icon:!1,is_secondary:!1,open_in_new_window:!0,extra_data:extra_data,extra_attrs:extra_attrs,onclick:!1,options:{},is_link:!1,icon_type:"pointer"},obj),__p+=""+(null==(__t=__webpack_require__(35)(obj))?"":__t)}return __p}},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var r=n(34),o=i(r);e.default=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return{toString:function(){return o.default.reduce(t,function(t,n,i){return""+t+e+i+'="'+n+'"'},"")},toObject:function(){return o.default.reduce(t,function(t,n,i){return t[""+e+i]=n,t},{})}}}},function(t,e){t.exports=_},function(module,exports,__webpack_require__){var translate=__webpack_require__(12);module.exports=function(obj){function print(){__p+=__j.call(arguments,"")}obj||(obj={});var __t,__p="",__j=Array.prototype.join;with(obj){var bpk_class="bpk-button"+(is_large?" bpk-button--large":"")+(is_secondary?" bpk-button--secondary":"")+(is_selected?" bpk-button--selected":"")+(is_link?" bpk-button--link":"")+(extra_class?" "+extra_class:"");__p+="",obj.deeplink?(__p+='<a class="'+(null==(__t=bpk_class)?"":__t)+'" href="'+(null==(__t=deeplink.url)?"":__t)+'" title="'+(null==(__t=obj.title?title:text)?"":__t)+'" ',
deeplink.type&&(__p+='data-deeplink="'+(null==(__t=deeplink.type)?"":__t)+'"'),extra_data&&(__p+=" "+(null==(__t=extra_data)?"":__t)),extra_attrs&&(__p+=" "+(null==(__t=extra_attrs)?"":__t)),open_in_new_window&&(__p+='target="_blank"'),__p+=(null==(__t=is_disabled?' disabled="disabled"':"")?"":__t)+">"):(__p+='<button class="'+(null==(__t=bpk_class)?"":__t)+'"',onclick&&(__p+=' onclick="'+(null==(__t=onclick)?"":__t)+'"'),__p+=null==(__t=is_disabled?' disabled="disabled"':"")?"":__t,extra_data&&(__p+=" "+(null==(__t=extra_data)?"":__t)),extra_attrs&&(__p+=" "+(null==(__t=extra_attrs)?"":__t)),__p+=">"),__p+="",options.cta_button_info?(__p+='<span class="cta-small-text',has_icon&&(__p+=" has-cta-icon"),__p+='">'+(null==(__t=options.cta_button_info.ctaText)?"":__t)+"&nbsp;</span>"):__p+='<span class="bpk-text">'+(null==(__t=text)?"":__t)+"&nbsp;</span>",__p+="",has_icon&&(__p+='<span class="bpk-icon-'+(null==(__t=is_large?"lg":"sm")?"":__t)+" bpk-icon-"+(null==(__t=icon_type)?"":__t)+" bpk-icon-"+(null==(__t=is_large?"lg":"sm")?"":__t)+'--align-to-button"></span>'),__p+="",__p+=obj.deeplink?"</a>":"</button>",__p+=""}return __p}},function(t,e,n){var i,r,o,s,a,l,u,c=function(t,e){return function(){return t.apply(e,arguments)}};u=n(12),l=n(37),i=n(38),a=n(40).default,o=n(11),s=n(25),t.exports=r=function(){function t(t){this._clearDestPlaceholder=c(this._clearDestPlaceholder,this),this._setDestPlaceholder=c(this._setDestPlaceholder,this),this._onPlaceToggleClick=c(this._onPlaceToggleClick,this),this._onInboundAltsChange=c(this._onInboundAltsChange,this),this._onOutboundAltsChange=c(this._onOutboundAltsChange,this),this._onDestInputKeyUp=c(this._onDestInputKeyUp,this),this._onOriginInputKeyUp=c(this._onOriginInputKeyUp,this),this._onDestInputBlur=c(this._onDestInputBlur,this),this._onOriginInputBlur=c(this._onOriginInputBlur,this),this._onDestInputFocus=c(this._onDestInputFocus,this),this._onOriginInputFocus=c(this._onOriginInputFocus,this),this._onDestAutosuggestSelect=c(this._onDestAutosuggestSelect,this),this._onOriginAutosuggestSelect=c(this._onOriginAutosuggestSelect,this),this._onDestChange=c(this._onDestChange,this),this._onOriginChange=c(this._onOriginChange,this),this._onHomeAirportLinkClick=c(this._onHomeAirportLinkClick,this),this._onMapLinkClick=c(this._onMapLinkClick,this),this.$el=t.$el,this.model=t.model,this.eventBus=t.eventBus}return t.prototype.render=function(){var t,e,n;return t=u(this.model.isOneLineSearchControlsEnabled()?"ktxtSearchControls_CountryCityAirportPlaceholder":"ktxtSearchControls_EnterCountryCityOrAirport"),this.$el.html(l({outboundAlts:!!(null!=(e=this.model.get("outboundAlts"))?e.value:void 0),inboundAlts:!!(null!=(n=this.model.get("inboundAlts"))?n.value:void 0),showHomeAirport:this.model.isHomeAirportEnabled()&&!!this.model.get("homeAirport"),placeholderResource:t,isSjLocationPickerEnabled:this.model.isSjLocationPickerEnabled()})),this.$originEl=this.$el.find("#js-origin-input"),this.$destEl=this.$el.find("#js-destination-input"),this.$outboundAltsEl=this.$el.find("#js-outbound-alts"),this.$inboundAltsEl=this.$el.find("#js-inbound-alts"),this.$placesToggleEl=this.$el.find("#js-places-toggle"),this.$mapLink=this.$el.find("#js-map-link"),this.$homeAirportLink=this.$el.find("#js-home-airport-link"),this.originAutosuggest=this._initOriginAutosuggest(),this.destAutosuggest=this._initDestAutosuggest(),s.placeholder||this._setDestPlaceholder(),this._initEvents(),this},t.prototype._initOriginAutosuggest=function(){return new i({$el:this.$originEl,locale:this.model.get("locale"),market:this.model.get("market"),currency:this.model.get("currency"),defaultPlaceObj:{PlaceId:this.model.get("originId"),PlaceName:this.model.get("originName"),CityId:this.model.get("originCityId"),CountryName:this.model.get("originCountryName"),RegionId:this.model.get("originRegionId")},isDestination:!1,useAutosuggestV2:this.model.isAutosuggestV2Enabled(),generalSearch:this.model.isGeneralSearchEnabled(),generalSearchControl:this.model.isGeneralSearchControlEnabled(),differentDestinationResultsInV2:this.model.returnDifferentDestinationResultsInV2(),minGeneralSearchSuggestions:this.model.getMinNumberOfGeneralSearchSuggestions(),maxSuggestions:this.model.getMaxSuggestions(),eventBus:this.eventBus,fieldUsed:"Origin",initWithCountries:this.model.get("initWithCountries")})},t.prototype._initDestAutosuggest=function(){var t,e;return this.model.isSjLocationPickerEnabled()?(t=a(this.model.getPopularDestinations(),this.model.getPopularDestinationsTitle()),e=function(t){return{"Is Popular Place":!!t.IsPopularPlace}}):(t=null,e=null),new i({$el:this.$destEl,locale:this.model.get("locale"),market:this.model.get("market"),currency:this.model.get("currency"),defaultPlaceObj:{PlaceId:this.model.get("destinationId"),PlaceName:this.model.get("destinationName"),CityId:this.model.get("destinationCityId"),CountryName:this.model.get("destinationCountryName"),RegionId:this.model.get("destinationRegionId")},isDestination:!0,useAutosuggestV2:this.model.isAutosuggestV2Enabled(),generalSearch:this.model.isGeneralSearchEnabled(),generalSearchControl:this.model.isGeneralSearchControlEnabled(),differentDestinationResultsInV2:this.model.returnDifferentDestinationResultsInV2(),minGeneralSearchSuggestions:this.model.getMinNumberOfGeneralSearchSuggestions(),maxSuggestions:this.model.getMaxSuggestions(),bumpEverywhereInSuggestions:this.model.bumpEverywhereInSuggestions(),eventBus:this.eventBus,fieldUsed:"Destination",initWithCountries:this.model.get("initWithCountries"),extraDataset:t,extraMixpanelProp:e})},t.prototype._initEvents=function(){if(this.$mapLink.on("click",this._onMapLinkClick),this.$homeAirportLink.on("click",this._onHomeAirportLinkClick),this.$originEl.on("click",this._onPlaceInputClick),this.$destEl.on("click",this._onPlaceInputClick),this.$originEl.on("autosuggest:select autosuggest:autopopulated",this._onOriginChange),this.$destEl.on("autosuggest:select autosuggest:autopopulated",this._onDestChange),this.$originEl.on("autosuggest:select",this._onOriginAutosuggestSelect),this.$destEl.on("autosuggest:select",this._onDestAutosuggestSelect),this.$originEl.on("focus",this._onOriginInputFocus),this.$destEl.on("focus",this._onDestInputFocus),this.$originEl.on("blur",this._onOriginInputBlur),this.$destEl.on("blur",this._onDestInputBlur),this.$originEl.on("keyup",this._onOriginInputKeyUp),this.$destEl.on("keyup",this._onDestInputKeyUp),this.$outboundAltsEl.on("change",this._onOutboundAltsChange),this.$inboundAltsEl.on("change",this._onInboundAltsChange),this.$placesToggleEl.on("click",this._onPlaceToggleClick),!s.placeholder)return this.$destEl.on("focusin",this._clearDestPlaceholder),this.$destEl.on("blur",this._setDestPlaceholder)},t.prototype._onMapLinkClick=function(t){var e;return t.preventDefault(),e=this.model.getUrlBuilderContext(),e.targetPage="inspiration-map",this.eventBus.trigger("mixpanel-used","Map Link"),this.eventBus.trigger("map-link-click",e)},t.prototype._onHomeAirportLinkClick=function(){return this.$originEl.trigger("autosuggest:set",this.model.get("homeAirport"))},t.prototype._onPlaceInputClick=function(){return this.setSelectionRange?this.setSelectionRange(0,this.value.length):this.select()},t.prototype._onOriginChange=function(t,e){if(null==e&&(e={}),e.PlaceId)return this._triggerPlaceChangeEvent("origin",e),this.model.setOriginFromPlaceObj(e)},t.prototype._onDestChange=function(t,e){return null==e&&(e={}),this._triggerPlaceChangeEvent("destination",e),this.model.setDestinationFromPlaceObj(e),this.$destEl.removeClass("placeholder")},t.prototype._onOriginAutosuggestSelect=function(t,e){return this._scrollIntoView(this.$originEl),this.eventBus.trigger("ga",{action:"OriginAutosuggest",label:this._formatAutosuggestGaEventLabel(e)})},t.prototype._onDestAutosuggestSelect=function(t,e){return this._scrollIntoView(this.$destEl),this.eventBus.trigger("ga",{action:"DestinationAutosuggest",label:this._formatAutosuggestGaEventLabel(e)})},t.prototype._formatAutosuggestGaEventLabel=function(t){var e,n,i;return null==t&&(t={}),n=this._getPlaceId(t),i=t.Query,e=t.Index,this.model.get("locale")+"_"+i+"_"+n+"_"+e},t.prototype._getPlaceId=function(t){return null==t&&(t={}),t.Everywhere?"everywhere":t.PlaceId||null},t.prototype._scrollIntoView=function(t){var e,n;if(e=$("body"),n=t.offset().top,n<e.scrollTop())return e.animate({scrollTop:n-10},300)},t.prototype._onOriginInputFocus=function(){return this.$el.addClass("origin-focused")},t.prototype._onDestInputFocus=function(){return this.$el.addClass("destination-focused")},t.prototype._onOriginInputBlur=function(){return this.$el.removeClass("origin-focused"),this._clearTypingTimeout(),this.eventBus.trigger("mixpanel-used","Origin"),this._typingInProgress=!1},t.prototype._onDestInputBlur=function(){return this.$el.removeClass("destination-focused"),this._clearTypingTimeout(),this.eventBus.trigger("mixpanel-used","Destination"),this._typingInProgress=!1},t.prototype._onOriginInputKeyUp=function(){return this._setTypingTimeout("Origin",this.$originEl.val())},t.prototype._onDestInputKeyUp=function(){return this._setTypingTimeout("Destination",this.$destEl.val())},t.prototype._onOutboundAltsChange=function(){var t;return t=this.$outboundAltsEl.is(":checked"),this.$outboundAltsEl.parent().toggleClass("checked"),this._updateNearbyAlts("outbound",t),this._triggerOutboundAltsMixpanelEvent()},t.prototype._onInboundAltsChange=function(){var t;return t=this.$inboundAltsEl.is(":checked"),this.$inboundAltsEl.parent().toggleClass("checked"),this._updateNearbyAlts("inbound",t),this._triggerInboundAltsMixpanelEvent()},t.prototype._updateNearbyAlts=function(t,e){if(null==t&&(t=null),null!==t)return this.model.set(t+"Alts",{expiryStamp:o.getTodaysDateObj().getTime()+o.millisecondsPerDay,value:!!e})},t.prototype._onPlaceToggleClick=function(){var t,e,n;if(n=[this.model.get("originId"),this.model.get("destinationId")],t=n[0],e=n[1],e!==t)return e&&this.$originEl.trigger("autosuggest:set",e),this.$destEl.trigger("autosuggest:set",t),this.eventBus.trigger("mixpanel-used","Place Swap")},t.prototype._setDestPlaceholder=function(){if(!this.$destEl.val())return this.$destEl.addClass("placeholder"),this.$destEl.val(this.$destEl.attr("placeholder"))},t.prototype._clearDestPlaceholder=function(){if(this.$destEl.hasClass("placeholder"))return this.$destEl.val(""),this.$destEl.removeClass("placeholder")},t.prototype._setTypingTimeout=function(t,e){if(null==t&&(t=null),null==e&&(e=null),null!==t)return this._typingInProgress||this.eventBus.trigger("ga",{action:"StartedTyping",label:t}),this._typingInProgress=!0,this._clearTypingTimeout(),this._typingTimeout=setTimeout(function(n){return function(){return n._triggerPauseTypingGaEvent(t,e)}}(this),3e3)},t.prototype._clearTypingTimeout=function(){return clearTimeout(this._typingTimeout)},t.prototype._triggerPlaceChangeEvent=function(t,e){return this.eventBus.trigger("placechange",{placeType:t,placeObj:e})},t.prototype._triggerOutboundAltsMixpanelEvent=function(){return this.eventBus.trigger("mixpanel-used","Outbound Alts")},t.prototype._triggerInboundAltsMixpanelEvent=function(){return this.eventBus.trigger("mixpanel-used","Inbound Alts")},t.prototype._triggerPauseTypingGaEvent=function(t,e){if(null==t&&(t=null),null==e&&(e=null),null!==t)return this.eventBus.trigger("ga",{action:"PauseTyping",label:"PauseTyping."+(e||"EMPTY")+"."+t})},t}()},function(module,exports,__webpack_require__){var translate=__webpack_require__(12);module.exports=function(obj){function print(){__p+=__j.call(arguments,"")}obj||(obj={});var __t,__p="",__j=Array.prototype.join;with(obj)__p+='<div class="origin-place"><label for="js-origin-input" class="place-label">'+(null==(__t=translate("ktxtSearchControls_From"))?"":__t)+'</label><input type="text" id="js-origin-input" placeholder="'+(null==(__t=placeholderResource)?"":__t)+'" tabindex="1" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false"><label class="nearby-alts sc-checkbox ',outboundAlts&&(__p+="checked"),__p+='"><input type="checkbox" id="js-outbound-alts" class="visuallyhidden" ',outboundAlts&&(__p+='checked="checked"'),__p+=" /><span>"+(null==(__t=translate("ktxtSearchControls_AddNearbyAirport"))?"":__t)+"</span></label>",showHomeAirport&&(__p+='<button type="button" id="js-home-airport-link" class="home-airport-button">Home</button>'),__p+='</div><button type="button" id="js-places-toggle" class="swap-button" title="'+(null==(__t=translate("ktxtSearchControls_SwapTooltip"))?"":__t)+'"><span class="visuallyhidden">'+(null==(__t=translate("ktxtSearchControls_SwapTooltip"))?"":__t)+'</span></button><div class="destination-place ',isSjLocationPickerEnabled&&(__p+="jp-location-picker"),__p+='"><label for="js-destination-input" class="place-label">'+(null==(__t=translate("ktxtSearchControls_To"))?"":__t)+'</label><input type="text" id="js-destination-input" placeholder="'+(null==(__t=placeholderResource)?"":__t)+'" tabindex="1" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false"><label class="nearby-alts sc-checkbox ',inboundAlts&&(__p+="checked"),__p+='"><input type="checkbox" id="js-inbound-alts" class="visuallyhidden" ',inboundAlts&&(__p+='checked="checked"'),__p+=" /><span>"+(null==(__t=translate("ktxtSearchControls_AddNearbyAirport"))?"":__t)+"</span></label></div>";return __p}},function(t,e,n){var i,r,o,s=function(t,e){return function(){return t.apply(e,arguments)}};r=n(39),o=n(12),t.exports=i=function(){function t(t){this.options=null!=t?t:{},this._onKeyUp=s(this._onKeyUp,this),this._targetEntitiesToSuggestion=s(this._targetEntitiesToSuggestion,this),this._isGeneralSearchSuggestion=s(this._isGeneralSearchSuggestion,this),this._isGeneralSearchGrounding=s(this._isGeneralSearchGrounding,this),this._isRegularSuggestion=s(this._isRegularSuggestion,this),this._getRegularSuggestions=s(this._getRegularSuggestions,this),this._getGeneralSearchGroundings=s(this._getGeneralSearchGroundings,this),this._removeTailGeneralSearchSuggestion=s(this._removeTailGeneralSearchSuggestion,this),this._reduceGeneralSearchSuggestions=s(this._reduceGeneralSearchSuggestions,this),this._addFlagIfMultiAirportCity=s(this._addFlagIfMultiAirportCity,this),this._highlightItemAt=s(this._highlightItemAt,this),this._shouldHighlightSecondItem=s(this._shouldHighlightSecondItem,this),this._onAutosuggestShow=s(this._onAutosuggestShow,this),this._onAutosuggestSet=s(this._onAutosuggestSet,this),this._onBlur=s(this._onBlur,this),this._onFocus=s(this._onFocus,this),this._onSuggestionSelect=s(this._onSuggestionSelect,this),this._attemptAutoselect=s(this._attemptAutoselect,this),this._autoselectSuggestion=s(this._autoselectSuggestion,this),this._populateFirstSuggestion=s(this._populateFirstSuggestion,this),this._populate=s(this._populate,this),this._shouldAddEverywhereToEmptyResults=s(this._shouldAddEverywhereToEmptyResults,this),this._queryMatchesEverywhere=s(this._queryMatchesEverywhere,this),this._addEverywhereToSuggestions=s(this._addEverywhereToSuggestions,this),this._suggestionCallbackProxy=s(this._suggestionCallbackProxy,this),this._typeaheadAdaptor=s(this._typeaheadAdaptor,this),this._search=s(this._search,this),this._getSuggestions=s(this._getSuggestions,this),this._suggestionTemplate=s(this._suggestionTemplate,this),this._displayKey=s(this._displayKey,this),this.hasResolved=s(this.hasResolved,this),this.promise=s(this.promise,this),this.$el=this.options.$el||$(),this.isDestination=!!this.options.isDestination,this.isMultiDestination=!!this.options.isMultiDestination,this.useAutosuggestV2=!!this.options.useAutosuggestV2,this.generalSearch=!!this.options.generalSearch,this.generalSearchControl=!!this.options.generalSearchControl,this.differentDestinationResultsInV2=this.options.differentDestinationResultsInV2,this.minGeneralSearchSuggestions=this.options.minGeneralSearchSuggestions,this.travelApiKey=this.options.travelApiKey,this.maxSuggestions=this.options.maxSuggestions,this.bumpEverywhereInSuggestions=this.options.bumpEverywhereInSuggestions,this.cache={},this._shouldAttemptAutoselect=!0,this._defaultPlaceChanged=!1,this.eventBus=this.options.eventBus,this.nbOfSuggestionUpdates=0,this.nbOfSuggestionsShown=0,this.nbOfGroundings=0,this.fieldUsed=this.options.fieldUsed,this.everywhere={Everywhere:!0,PlaceName:o("ktxtSearchControls_as_everywhere")},this._selectedSuggestion=null,this._dfd=$.Deferred().resolve(),this._debouncedSearch=_.debounce(this._search,300),this._abortedSearch=!1,this._init(),this._initEvents()}return t.prototype._init=function(){var t,e,n,i,r,o;return i=_.compact([{minLength:1,highlight:!0,hint:!1},{name:this.isDestination?"destination":"origin",source:this._typeaheadAdaptor,displayKey:this._displayKey,templates:{suggestion:this._suggestionTemplate}},this.options.extraDataset?this.options.extraDataset(this._getPlaceTypeClass):void 0]),(r=this.$el).typeahead.apply(r,i),this.$dropdownEl=this.$el.siblings(".tt-dropdown-menu"),o=this.options.defaultPlaceObj||{},e=o.PlaceId,n=o.PlaceName,t=o.CountryName,e&&n&&t?this._populate(this.options.defaultPlaceObj):this._populateWithDefaultPlaceId()},t.prototype._initEvents=function(){return this.$el.on("typeahead:selected",this._onSuggestionSelect),this.$el.on("focus",this._onFocus),this.$el.on("blur",this._onBlur),this.$el.on("autosuggest:set",this._onAutosuggestSet),this.$el.on("autosuggest:show",this._onAutosuggestShow),this.$dropdownEl.on("click",function(t){return function(){return t.$el.trigger("blur")}}(this)),this.$el.on("keyup",this._onKeyUp)},t.prototype.promise=function(){return this._dfd.promise()},t.prototype.hasResolved=function(){return this.$el.typeahead("val")===this._displayKey(this._selectedSuggestion)},t.prototype._showDropdown=function(t){var e;if(null==t&&(t=null),e=this.$el.data("ttTypeahead")||{},e.dropdown)return e.dropdown.update(t)},t.prototype._displayKey=function(t){var e,n,i,r,s,a,l,u;return null==t&&(t={}),a=t.PlaceName,s=t.PlaceId,e=t.CityId,n=t.CountryId,i=t.CountryName,l=t.RegionId,r=t.Everywhere,a&&r?""+a:this._defaultPlaceChanged||s!==n||this.options.initWithCountries?a&&s?(u=""+a,l&&(u+=", "+l),u+=s===e&&i?" ("+o("ktxtSearchControls_as_any")+")":" ("+s+")"):null:(this._defaultPlaceChanged=!0,null)},t.prototype._suggestionTemplate=function(t){var e,n,i,o;return null==t&&(t={}),this._defaultPlaceChanged=!0,n=t.GeneralSearchEntityName,e=t.GeneralSearchEntityCountryName,i=n&&e,o=this._displayKey(t),r({placeName:i?n+", "+e:o,suggestion:t,placeTypeClass:this._getPlaceTypeClass(t)})},t.prototype._getPlaceTypeClass=function(t){if(null==t&&(t={}),t.Everywhere)return"everywhere";switch((t.PlaceId||"").length){case 0:return"general-search";case 2:return"country";case 3:return"airport";case 4:return"city";default:return"airport"}},t.prototype._getServiceUrl=function(t){var e,n,i,r,o,s,a,l;return null==t&&(t={}),o=t.query,r=t.placeId,o?(a=this.useAutosuggestV2&&!r,l="v1.1",a&&(l="v2.0"),this.useAutosuggestV2||(o=o.replace(/\//g,"")),n="UK",a&&(n=this.options.market),i="/dataservices/geo/"+l+"/autosuggest/"+n+"/"+this.options.locale+"/"+encodeURIComponent(o),s={},e=this.useAutosuggestV2&&this.differentDestinationResultsInV2?"IsDestination":"isDestination",s[e]=this.isDestination,s.ccy=this.options.currency,this.isMultiDestination&&(s.limit_taxonomy="City,Airport"),r&&(s.placeId=o),(this.generalSearch||this.generalSearchControl)&&(s.enable_general_search=!0),i+"?"+$.param(s)):null},t.prototype._getSuggestions=function(t,e,n){var i,r,o;if(null==n&&(n={}),r=n.placeId,o=this._getServiceUrl({query:t,placeId:r}),null!==o)return(i=this.cache[o])?(this._dfd.resolve(),e(i,t)):(this._previousRequest&&this._previousRequest.abort(),this._previousRequest=$.ajax({url:o,dataType:"json"}).done(function(n){return function(i){return(n.generalSearch||n.generalSearchControl)&&(i=n._reduceGeneralSearchSuggestions(i)),n._lastResultsReturned=(new Date).getTime(),n.cache[o]=i,e(i,t)}}(this)).always(function(t){return function(e,n,i){if("abort"!==n)return t._dfd.resolve()}}(this)))},t.prototype._search=function(t,e){return null==t&&(t=""),0===t.length&&this._shouldAddEverywhere()?e([this.everywhere],t):this._abortedSearch?void 0:this._getSuggestions(t,function(n){return function(i){return n._suggestionCallbackProxy(i,t,e)}}(this))},t.prototype._typeaheadAdaptor=function(t,e){return null==t&&(t=""),0===t.length&&this._shouldAddEverywhere()||(this._dfd=$.Deferred()),this._abortedSearch=!1,this._debouncedSearch(t,e)},t.prototype._addQueryAndIndexToSuggestions=function(t,e){return _.forEach(t,function(t,n){return t.Query=e,t.Index=n})},t.prototype._suggestionCallbackProxy=function(t,e,n){var i,r,o;if(null==t&&(t=[]),t=_.clone(t),o=t.length,this._shouldAddEverywhere()&&(t=this._addEverywhereToSuggestions(t,e)),i=this._getGeneralSearchGroundings(t),r=this._getRegularSuggestions(t),this.generalSearchControl&&(t=r),this.nbOfSuggestionsShown=this.generalSearchControl?r.length:i.length+r.length,this.nbOfGroundings=i.length,0!==o||this._shouldAddEverywhereToEmptyResults())return this.nbOfSuggestionUpdates++,t=this._addFlagIfMultiAirportCity(t),this._addQueryAndIndexToSuggestions(r.concat(i),e),n(t),this._shouldHighlightSecondItem()?this._highlightItemAt(2):this._highlightItemAt(1)},t.prototype._addEverywhereToSuggestions=function(t,e){return"b"===this._bumpEverywhereVariant()?[this.everywhere].concat(t):"c"===this._bumpEverywhereVariant()&&this._queryMatchesEverywhere(e)?[this.everywhere].concat(t):t.concat(this.everywhere)},t.prototype._queryMatchesEverywhere=function(t){var e;return t=t.toLocaleLowerCase(),e=this.everywhere.PlaceName.toLocaleLowerCase(),t.length&&e.indexOf(t)!==-1},t.prototype._shouldAddEverywhereToEmptyResults=function(){var t;return!!this._shouldAddEverywhere()&&(t=this.$el.data("ttTypeahead")||{},!!t.dropdown&&t.dropdown.isEmpty)},t.prototype._populate=function(t){return null==t&&(t=null),this._selectedSuggestion=t,this.$el.typeahead("val",this._displayKey(t)),this.$el.trigger("autosuggest:autopopulated",t)},t.prototype._populateWithDefaultPlaceId=function(t){var e;return null==t&&(t={}),e=(this.options.defaultPlaceObj||{}).PlaceId,this._populateByPlaceId(e,t)},t.prototype._populateByPlaceId=function(t,e){if(null==t&&(t=null),null==e&&(e={}),null!==t)return this._dfd=$.Deferred(),this._getSuggestions(t,function(t){return function(n){if(!t.$el.typeahead("val")||e.force)return t._populateFirstSuggestion(n)}}(this),{placeId:!0})},t.prototype._populateFirstSuggestion=function(t){var e;if(null==t&&(t=[]),e=t[0])return this._populate(e)},t.prototype._autoselectSuggestion=function(t){return null==t&&(t=[]),t.length?this._populateFirstSuggestion(t):this.isMultiDestination?this._populate({}):this.isDestination?this._populate(this.everywhere):this._populateWithDefaultPlaceId({force:!0})},t.prototype._attemptAutoselect=function(){var t;if(this._shouldAttemptAutoselect&&this.$el.typeahead("val")!==this._originalValue)return(t=this.$el.typeahead("val")||null)?(this._abortedSearch=!0,this._dfd=$.Deferred(),this._getSuggestions(t,this._autoselectSuggestion)):this.isMultiDestination?this._populate({}):this.isDestination?this._populate(this.everywhere):this._populateWithDefaultPlaceId()},t.prototype._onSuggestionSelect=function(t,e){var n,i;return null==e&&(e={}),this._recordOriginalValue(),this._selectedSuggestion=e,this._shouldAttemptAutoselect=!1,this.$el.trigger("autosuggest:select",e),i={"Field Used":this.fieldUsed,"Search Query":(null!=e?e.Query:void 0)||null,"Time Since Results Returned":(new Date).getTime()-this._lastResultsReturned,"Number of UI Updates":this.nbOfSuggestionUpdates,"Number of Results":this.nbOfSuggestionsShown,"General Search":!!e.DistanceFrom,isEverywhere:!!e.Everywhere,Position:e.Index,"General Search Qualified":this.nbOfGroundings},this.eventBus.trigger("mixpanel",{name:"Flight Search Suggestion Selected",props:_.assign({},i,"function"==typeof(n=this.options).extraMixpanelProp?n.extraMixpanelProp(e):void 0)})},t.prototype._onFocus=function(){if(this._recordOriginalValue(),this._shouldAddEverywhere())return this._showDropdown(null)},t.prototype._onBlur=function(){return this._attemptAutoselect(),this._shouldAttemptAutoselect=!0},t.prototype._onAutosuggestSet=function(t,e){return null==e&&(e=null),null===e&&this.isDestination?this._populate(this.everywhere):this._populateByPlaceId(e,{force:!0})},t.prototype._onAutosuggestShow=function(t,e){return this._showDropdown(e)},t.prototype._shouldHighlightSecondItem=function(){return"b"===this._bumpEverywhereVariant()},t.prototype._highlightItemAt=function(t){var e,n;return null==t&&(t=1),n=this.$el.data("ttTypeahead"),e=n.input.setInputValue,n.input.setInputValue=function(){},n.dropdown.moveCursorDown(t),n.input.setInputValue=e},t.prototype._addFlagIfMultiAirportCity=function(t){var e;return e=null,_.forEach(t,function(t){return function(t){var n,i;if(i=t.PlaceId,n=t.CityId,null!=n&&null!=i)return n===e?t.IsMultiAirportCity=!0:e=null,i===n?e=n:void 0}}(this)),t},t.prototype._reduceGeneralSearchSuggestions=function(t){var e,n;return e=_.chain(t).remove(function(t){return _.contains(t.Tags,"GENERAL_SEARCH")}).map(this._targetEntitiesToSuggestion).flatten().value(),n=this.maxSuggestions-this.minGeneralSearchSuggestions,t.length<n?this._removeTailGeneralSearchSuggestion(t.concat(e).slice(0,this.maxSuggestions)):this._removeTailGeneralSearchSuggestion(t.slice(0,n).concat(e).slice(0,this.maxSuggestions))},t.prototype._removeTailGeneralSearchSuggestion=function(t){return t.length>0&&this._isGeneralSearchSuggestion(_.last(t))?t.slice(0,t.length-1):t},t.prototype._getGeneralSearchGroundings=function(t){return _.filter(t,function(t){return function(e){return t._isGeneralSearchGrounding(e)}}(this))},t.prototype._getRegularSuggestions=function(t){return _.filter(t,function(t){return function(e){return t._isRegularSuggestion(e)}}(this))},t.prototype._isRegularSuggestion=function(t){return!this._isGeneralSearchGrounding(t)&&!this._isGeneralSearchSuggestion(t)},t.prototype._isGeneralSearchGrounding=function(t){return t.DistanceFrom},t.prototype._isGeneralSearchSuggestion=function(t){return t.GeneralSearchEntityName},t.prototype._targetEntitiesToSuggestion=function(t){var e,n,i,r,o;return n=t.PlaceName,e=t.CountryName,i=t.TargetEntities,o=_.forEach(i,function(t){return function(i){var r;if(r=(i.Distance||{}).Value||null,i.DistanceFrom=t._formatDistanceFrom(n,e,r),t.generalSearch)return i.IsMultiAirportCity=!0}}(this)),this.generalSearch&&o.length>0&&(r={GeneralSearchEntityName:n,GeneralSearchEntityCountryName:e},o.unshift(r)),o.length?o:t},t.prototype._formatDistanceFrom=function(t,e,n){var i;return i=(n/1e3).toFixed(),o("ktxtSearchControls_Autosuggest_DistanceFrom",{distance:i,place:t,country:e})},t.prototype._recordOriginalValue=function(){return this._originalValue=this.$el.typeahead("val")},t.prototype._shouldAddEverywhere=function(){return this.isDestination&&!this.isMultiDestination},t.prototype._bumpEverywhereVariant=function(){return this.bumpEverywhereInSuggestions},t.prototype._onKeyUp=function(){return this._lastKeyStroke=(new Date).getTime()},t}()},function(module,exports,__webpack_require__){var translate=__webpack_require__(12);module.exports=function(obj){function print(){__p+=__j.call(arguments,"")}obj||(obj={});var __t,__p="",__j=Array.prototype.join;with(obj)__p+='<p class="',suggestion.IsMultiAirportCity&&(__p+="indent"),__p+=" "+(null==(__t=placeTypeClass)?"":__t)+'">',__p+=suggestion.Everywhere?""+(null==(__t=translate("ktxtSearchControls_flexible"))?"":__t)+"<span class='country-name'>"+(null==(__t=translate("ktxtSearchControls_SearchEverywhere"))?"":__t)+"</span>":suggestion.DistanceFrom?""+(null==(__t=placeName)?"":__t)+"<span class='country-name'>"+(null==(__t=suggestion.DistanceFrom)?"":__t)+"</span>":""+(null==(__t=placeName)?"":__t)+"<span class='country-name'>"+(null==(__t=suggestion.CountryName)?"":__t)+"</span>",__p+="</p>";return __p}},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var r=n(39),o=i(r),s=function(t){return!t||0===t.length},a=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.PlaceName,n=t.PlaceId;return e&&n?e:null},l=function(t){return function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",n=arguments[1],i=s(e)?t:null;n(i,e)}},u=function(t){return function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=a(e),i=t(e);return(0,o.default)({placeName:n,suggestion:e,placeTypeClass:i})}};e.default=function(t,e){return function(n){return{name:"popular-places",source:_.debounce(l(t),300),displayKey:a,templates:{header:'<div class="jp-location-picker__divider"><p>'+e+"</p></div>",suggestion:u(n)}}}}},function(t,e,n){var i,r,o,s,a,l,u,c=function(t,e){return function(){return t.apply(e,arguments)}},h={}.hasOwnProperty;l=n(42),i=n(43),a=n(11),u=n(12),s=n(45),r=n(46),t.exports=o=function(){function t(t){this._setDatepicker=c(this._setDatepicker,this),this._setReturnDatepickerDate=c(this._setReturnDatepickerDate,this),this._setDepartDatepickerDate=c(this._setDepartDatepickerDate,this),this._populateReturnDateEl=c(this._populateReturnDateEl,this),this._populateDepartDateEl=c(this._populateDepartDateEl,this),this._activateReturnInput=c(this._activateReturnInput,this),this._onReturnDatepickerNextPrev=c(this._onReturnDatepickerNextPrev,this),this._onDepartDatepickerNextPrev=c(this._onDepartDatepickerNextPrev,this),this._applyStylingFromDirects=c(this._applyStylingFromDirects,this),this._onInboundCalendarDirectsData=c(this._onInboundCalendarDirectsData,this),this._onOutboundCalendarDirectsData=c(this._onOutboundCalendarDirectsData,this),this._onTripTypeChange=c(this._onTripTypeChange,this),this._onInboundDateChange=c(this._onInboundDateChange,this),this._onOutboundDateChange=c(this._onOutboundDateChange,this),this._onReturnDatepickerSelect=c(this._onReturnDatepickerSelect,this),this._onReturnInputFocus=c(this._onReturnInputFocus,this),this._onDepartInputFocus=c(this._onDepartInputFocus,this),this._onDepartDatepickerSelect=c(this._onDepartDatepickerSelect,this),this._getFormattedReturnDate=c(this._getFormattedReturnDate,this),this._getFormattedDepartDate=c(this._getFormattedDepartDate,this),this.$el=t.$el,this.model=t.model,this.eventBus=t.eventBus,this._disabledText="("+u("ktxtSearchControls_one_way")+")"}return t.prototype.render=function(){if(this.$el.html(l({isReturn:this.model.isReturn(),departDate:this.model.get("outboundDate"),formattedDepartDate:this._getFormattedDepartDate(),returnDate:this.model.get("inboundDate"),formattedReturnDate:this._getFormattedReturnDate(),disabledText:this._disabledText})),this.$departEl=this.$el.find("#js-depart-input"),this.$returnEl=this.$el.find("#js-return-input"),(this.departDatepicker=this._initDepartDatepicker())&&(this.returnDatepicker=this._initReturnDatepicker()))return this.model.isCalendarDirectsEnabled()&&(this.routes=new s({model:this.model}),this.outboundDirectsView=new i({model:this.model}),this.inboundDirectsView=new i({model:this.model}),$(this.departDatepicker._datepicker).find(".datepicker-hook-after-calendar").replaceWith(this.outboundDirectsView.$el),$(this.returnDatepicker._datepicker).find(".datepicker-hook-after-calendar").replaceWith(this.inboundDirectsView.$el)),this._initElementEvents(),this._initDatepickerEvents(),this._initModelEvents(),this},t.prototype._initDepartDatepicker=function(){var t,e;return(t=this.$departEl.get(0))?(e=this._getDatepickerOptions(t,"depart"),new r(e)):null},t.prototype._initReturnDatepicker=function(){var t,e;return(t=this.$returnEl.get(0))?(e=this._getDatepickerOptions(t,"return"),new r(e)):null},t.prototype._initElementEvents=function(){return this.$departEl.one("focus",this._setDepartDatepickerDate),this.$returnEl.one("focus",this._setReturnDatepickerDate),this.$departEl.on("focus",this._onDepartInputFocus),this.$returnEl.on("focus",this._onReturnInputFocus),this.$departEl.on("blur",function(t){return function(){return t.eventBus.trigger("mixpanel-used","Outbound");
}}(this)),this.$returnEl.on("blur",function(t){return function(){return t.eventBus.trigger("mixpanel-used","Inbound")}}(this)),this.$departEl.on("keydown",function(t){return function(e){if(9===e.which)return t.departDatepicker.hide()}}(this)),this.$returnEl.on("keydown",function(t){return function(e){if(9===e.which)return t.returnDatepicker.hide()}}(this))},t.prototype._initDatepickerEvents=function(){return this.departDatepicker.on("select",this._onDepartDatepickerSelect),this.returnDatepicker.on("select",this._onReturnDatepickerSelect),this.departDatepicker.on("next-prev",this._onDepartDatepickerNextPrev),this.returnDatepicker.on("next-prev",this._onReturnDatepickerNextPrev),this.departDatepicker.on("select-directs-available",function(t){return function(){return t.eventBus.trigger("mixpanel",{name:"Date Direct"})}}(this)),this.returnDatepicker.on("select-directs-available",function(t){return function(){return t.eventBus.trigger("mixpanel",{name:"Date Direct"})}}(this)),this.departDatepicker.on("select-no-directs",function(t){return function(){return t.eventBus.trigger("mixpanel",{name:"Date No-Direct"})}}(this)),this.returnDatepicker.on("select-no-directs",function(t){return function(){return t.eventBus.trigger("mixpanel",{name:"Date No-Direct"})}}(this)),this.departDatepicker.on(r.button.WHOLE_MONTH,function(t){return function(){return t.eventBus.trigger("mixpanel-used","Depart Whole-Month")}}(this)),this.returnDatepicker.on(r.button.WHOLE_MONTH,function(t){return function(){return t.eventBus.trigger("mixpanel-used","Return Whole-Month")}}(this)),this.departDatepicker.on(r.button.CHEAPEST_MONTH,function(t){return function(){return t.eventBus.trigger("mixpanel-used","Depart Cheapest-Month")}}(this)),this.returnDatepicker.on(r.button.CHEAPEST_MONTH,function(t){return function(){return t.eventBus.trigger("mixpanel-used","Return Cheapest-Month")}}(this))},t.prototype._initModelEvents=function(){return this.model.on("change:outboundDate",this._onOutboundDateChange),this.model.on("change:inboundDate",this._onInboundDateChange),this.model.on("change:tripType",this._onTripTypeChange)},t.prototype._getDatepickerOptions=function(t,e){return{element:t,minDate:this.model.get("minDatepickerString"),maxDate:this.model.get("maxDatepickerString"),offsetTop:10,autoHide:!0,dateFormatter:a.dateFormatter,customClass:e,firstDay:this.model.get("firstDay"),months:this.model.get("months"),weekdays:this.model.get("weekdays"),weekdaysShort:this.model.get("weekdaysShort"),culture:this._getDatepickerCulture(e),enableFlexibleOptions:!0}},t.prototype._getDatepickerCulture=function(t){var e,n,i,r,o,s;return e={},r="depart"===t,i=u("ktxtSearchControls_filter_depart"),s=u("ktxtSearchControls_filter_return"),n=u("ktxtSearchControls_DepartureDate"),o=u("ktxtSearchControls_ReturnDate"),e.title=r?i:s,e.header_label=r?n:o,e.cancel=u("ktxtSearchControls_BtnCancel"),e.compare_months=u("ktxtSearchControls_Datepicker_CompareAcrossWholeMonth"),e.cheapest_month=u("ktxtSearchControls_CheapestMonth"),e.whole_month=u("ktxtSearchControls_flex_dates"),e.specific_date=u("ktxtSearchControls_Datepicker_SpecificDate"),e.flexible=u("ktxtSearchControls_Datepicker_Flexible"),e},t.prototype._getFormattedDepartDate=function(){return a.getUserFacingShortDate(this.model.get("outboundDate"))},t.prototype._getFormattedReturnDate=function(){return a.getUserFacingShortDate(this.model.get("inboundDate"))},t.prototype._onDepartDatepickerSelect=function(t){return this.model.setOutboundDate(t)},t.prototype._onDepartInputFocus=function(){if(this.departDatepicker.show(),this.model.isCalendarDirectsEnabled())return this._getOutboundCalendarDirects(this.departDatepicker.getCalendar().getCurrentMonth())},t.prototype._onReturnInputFocus=function(){if(this._activateReturnInput(),this.returnDatepicker.show(),this.model.isCalendarDirectsEnabled())return this._getInboundCalendarDirects(this.returnDatepicker.getCalendar().getCurrentMonth())},t.prototype._onReturnDatepickerSelect=function(t){return this.model.setInboundDate(t)},t.prototype._onOutboundDateChange=function(){return this._populateDepartDateEl(),this._setDepartDatepickerDate()},t.prototype._onInboundDateChange=function(){return this._populateReturnDateEl(),this._setReturnDatepickerDate()},t.prototype._onTripTypeChange=function(){return this.model.isReturn()?(this.$returnEl.closest("div").removeClass("disabled"),this._populateReturnDateEl()):(this.$returnEl.closest("div").addClass("disabled"),this.$returnEl.val(this._disabledText))},t.prototype._onOutboundCalendarDirectsData=function(t){return null==t&&(t={}),this._applyStylingFromDirects(t.outbound,this.departDatepicker,this.outboundDirectsView)},t.prototype._onInboundCalendarDirectsData=function(t){return this._applyStylingFromDirects(t.inbound,this.returnDatepicker,this.inboundDirectsView)},t.prototype._applyStylingFromDirects=function(t,e,n){var i,r,o,s,a,l;o={},i=null,r=null,a=t||{};for(s in a)h.call(a,s)&&(l=a[s],o[s]=l.direct?i="directs-available":r="directs-unavailable");return!this.model.isCalendarDirectClearWhenDirect()||i&&r?(e.applyCellClasses(o),n.someDirects()):n.noMessage()},t.prototype._onDepartDatepickerNextPrev=function(t){if(this.model.isCalendarDirectsEnabled())return this._getOutboundCalendarDirects(t)},t.prototype._onReturnDatepickerNextPrev=function(t){if(this.model.isCalendarDirectsEnabled())return this._getInboundCalendarDirects(t)},t.prototype._getOutboundCalendarDirects=function(t){return this.departDatepicker.applyCellClasses({}),this.outboundDirectsView.loading(),this.routes.getCalendarData({outboundDate:t},this._onOutboundCalendarDirectsData)},t.prototype._getInboundCalendarDirects=function(t){return this.returnDatepicker.applyCellClasses({}),this.inboundDirectsView.loading(),this.routes.getCalendarData({inboundDate:t},this._onInboundCalendarDirectsData)},t.prototype._activateReturnInput=function(){if(!this.model.isReturn())return this.model.set("tripType","return")},t.prototype._populateDepartDateEl=function(){return this.$departEl.val(this._getFormattedDepartDate()),this.$departEl.attr("data-date",this.model.get("outboundDate"))},t.prototype._populateReturnDateEl=function(){if(this.model.isReturn())return this.$returnEl.val(this._getFormattedReturnDate()),this.$returnEl.attr("data-date",this.model.get("inboundDate"))},t.prototype._setDepartDatepickerDate=function(){return this._setDatepicker(this.departDatepicker,this.model.get("outboundDate"))},t.prototype._setReturnDatepickerDate=function(){return this._setDatepicker(this.returnDatepicker,this.model.get("inboundDate"))},t.prototype._setDatepicker=function(t,e){var n;return n=t.getCalendar(),n.selectDate(e,!0,!0)},t}()},function(module,exports,__webpack_require__){var translate=__webpack_require__(12);module.exports=function(obj){function print(){__p+=__j.call(arguments,"")}obj||(obj={});var __t,__p="",__j=Array.prototype.join;with(obj)__p+='<div class="depart"><label for="js-depart-input">'+(null==(__t=translate("ktxtSearchControls_filter_depart"))?"":__t)+'</label><input type="text" id="js-depart-input" value="'+(null==(__t=formattedDepartDate)?"":__t)+'" data-date="'+(null==(__t=departDate)?"":__t)+'" tabindex="1" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" readonly></div><div class="return ',isReturn||(__p+="disabled"),__p+='"><label for="js-return-input">'+(null==(__t=translate("ktxtSearchControls_filter_return"))?"":__t)+'</label><input type="text" id="js-return-input" value="',__p+=isReturn?null==(__t=formattedReturnDate)?"":__t:null==(__t=disabledText)?"":__t,__p+='" data-date="'+(null==(__t=returnDate)?"":__t)+'" tabindex="1" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" readonly></div>';return __p}},function(t,e,n){var i,r,o;r=n(44),o=n(12),t.exports=i=function(){function t(t){this.model=t.model,this.$el=$(r())}return t.prototype.loading=function(){return this.timeout=setTimeout(function(t){return function(){return t.$el.addClass("loading"),t.$el.removeClass("flag"),t.$el.html(o("ktxtSearchControls_DatePicker_DirectFlightsAvailable"))}}(this),200)},t.prototype.noMessage=function(){return clearTimeout(this.timeout),this.$el.removeClass("flag loading hidden"),this.$el.html("")},t.prototype.someDirects=function(){return clearTimeout(this.timeout),this.$el.removeClass("loading hidden"),this.$el.addClass("flag"),this.$el.html(o("ktxtSearchControls_DatePicker_DirectFlightsAvailable"))},t.prototype.error=function(){return clearTimeout(this.timeout),this.$el.addClass("hidden")},t}()},function(module,exports,__webpack_require__){var translate=__webpack_require__(12);module.exports=function(obj){obj||(obj={});var __t,__p="";with(obj)__p+="<label class='calendar-directs-label'></label>";return __p}},function(t,e,n){var i,r,o,s,a,l;r=n(13),l=function(t){var e;return null==t&&(t=null),e=new r(t),new r(e.dateObj,r.DATE_TYPES.month).dateString},o=function(t,e){return new r(t).greaterThan(new r(e))},s=function(t,e){return new r(t).lessThan(new r(e))},a=function(t,e){var n,i,r,o,s,a,l,u,c,h,d,p;for(null==t&&(t={}),null==e&&(e=function(){}),s=(null!=t&&null!=(c=t.routes)&&null!=(h=c[0])?h.legs:void 0)||{},u={},r={},d=s.outbound||[],i=0,a=d.length;i<a;i++)n=d[i],u[n.date]={direct:n.direct_available,indirect:n.indirect_available};for(p=s.inbound||[],o=0,l=p.length;o<l;o++)n=p[o],r[n.date]={direct:n.direct_available,indirect:n.indirect_available};return e({outbound:u,inbound:r})},i=function(){function t(t){null==t&&(t={}),this.model=t.model,this.cache={}}return t.prototype.basePath="hsc_services/timetable/direct/v1.0",t.prototype.getCalendarData=function(t,e){var n;return n=this._getCalendarUrl(t),this.cache[n]?a(this.cache[n],e):(this._previousRequest&&this._previousRequest.abort(),this._previousRequest=$.ajax({url:n,dataType:"json"}).done(function(t){return function(i){return t.cache[n]=i,a(i,e)}}(this)))},t.prototype._getCalendarUrl=function(t){var e,n,i;return i=this.model.get("originId")+"/"+(this.model.get("destinationId")||"anywhere"),n=this._getRouteDates(t),e={expand_interval:"days"},"/"+this.basePath+"/"+i+"/"+n+"/?"+$.param(e)},t.prototype._getRouteDates=function(t){var e,n,i,r,a;return null==t&&(t={}),i=t.outboundDate,e=t.inboundDate,i&&(r=l(i),n=l(this.model.get("inboundDate")),o(r,n)&&(n=r)),e&&(r=l(this.model.get("outboundDate")),n=l(e),s(n,r)&&(r=n)),a=r,this.model.isReturn()&&(a+="/"+n),a},t}(),t.exports=i},function(t,e,n){var i,r,o;(function(t){"use strict";var n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};!function(s,a){"object"===n(e)&&"object"===n(t)?t.exports=a():(r=[],i=a,o="function"==typeof i?i.apply(e,r):i,!(void 0!==o&&(t.exports=o)))}(void 0,function(){return function(t){function e(i){if(n[i])return n[i].exports;var r=n[i]={exports:{},id:i,loaded:!1};return t[i].call(r.exports,r,r.exports,e),r.loaded=!0,r.exports}var n={};return e.m=t,e.c=n,e.p="",e(0)}([function(t,e,n){var i,r,o,s,a=function(t,e){return function(){return t.apply(e,arguments)}},l={}.hasOwnProperty;i=n(1),o=n(3),s='<div class="datepicker-overflow-wrapper">\n    <% if (enableFlexibleOptions) { %>\n        <div class="flexible-tabs-container">\n            <label id="js-specific-date"><input type="radio" name="triptype" class="datepicker_hidden"><%= specific_date %></label>\n            <label id="js-flexible"><input type="radio" name="triptype" class="datepicker_hidden"><%= whole_month %></label>\n        </div>\n    <% } %>\n    <div class="datepicker-inner">\n        <div class="calendar"></div>\n        <section class="datepicker-hook-after-calendar"></section>\n    </div>\n</div>',t.exports=r=function(){function t(t){this._showTabsAtBottom=a(this._showTabsAtBottom,this),this._showFullScreen=a(this._showFullScreen,this),this.applyCellClasses=a(this.applyCellClasses,this);var e,n,r,s,u,c,h,d,p,g;this._showed=!1,this._options={element:(null!=t?t.element:void 0)||function(){throw"Element is required!"}(),offsetTop:0,offsetLeft:0,autoHide:!1,container:null,customClass:null,enableFlexibleOptions:!1},r={};for(s in t)l.call(t,s)&&(u=t[s],"firstDay"!==s&&"minDate"!==s&&"maxDate"!==s&&"selectedDate"!==s&&"currentMonth"!==s&&"culture"!==s&&"compare_months"!==s&&"cheapest_month"!==s&&"enableFlexibleOptions"!==s&&"dateFormatter"!==s&&"months"!==s&&"weekdays"!==s&&"weekdaysShort"!==s||(r[s]=u));r.showTabsAtBottom=this._showTabsAtBottom,h=this._options;for(c in h)l.call(h,c)&&(g=h[c],(n=null!=t?t[c]:void 0)&&(this._options[c]=n));this._culture={close:"xClose",cancel:"xCancel",header_label:"xDate",specific_date:"xSpecific date",whole_month:"xWhole month",cheapest_month:"xFind Cheapest Month",compare_dates:"xCompare dates"},d=this._culture;for(c in d)l.call(d,c)&&(g=d[c],(e=null!=t&&null!=(p=t.culture)?p[c]:void 0)&&(this._culture[c]=e));this._$$=i.dom,this._dd=i.date,this._mediator=new i.Mediator,this._initDatepickerElement(),this.popover=new o({relativeEl:this._options.element,innerContent:this._datepicker.innerHTML,customClass:"skyscanner-datepicker "+(this._options.customClass||""),strings:{titleText:this._culture.header_label,hideText:this._culture.cancel},autoHide:!0,autoFocus:!0}),this._datepicker=this.popover.el,this._calendarEl=this._findByClassName(this._datepicker,"calendar","div"),this._flexCalendarEl=this._findByClassName(this._datepicker,"flexible-calendar","div"),this._initCalendar(r),this._initEvents(),this._calendar.render()}return t.button={WHOLE_MONTH:"btn_whole_month",CHEAPEST_MONTH:"btn_cheapest_month"},t.prototype._findByClassName=function(t,e,n){var i;return function(){var r,o,s,a;for(s=t.getElementsByTagName(n),a=[],r=0,o=s.length;r<o;r++)i=s[r],this._$$.hasClass(i,e)&&a.push(i);return a}.call(this)[0]},t.prototype._initDatepickerElement=function(){var t,e,n;return n={close:this._culture.close,cancel:this._culture.cancel,header_label:this._culture.header_label,specific_date:this._culture.specific_date,whole_month:this._culture.whole_month,enableFlexibleOptions:!!this._options.enableFlexibleOptions},t=this._options.container||document.createElement("div"),e=i.template(s),t.innerHTML=e(n),this._$$.addClass(t,"skyscanner-datepicker"),this._$$.addClass(t,"datepicker_hidden"),this._datepicker=t},t.prototype._initCalendar=function(e){return this._$$.addClass(this._calendarEl,"dp"),e.container=this._calendarEl,this._calendar=new i(e),this._calendar.on("select",function(t){return function(e){return t._selectDate(e,"calendar")}}(this)),this._calendar.on("whole-month-click",function(e){return function(){return e._mediator.publish(t.button.WHOLE_MONTH)}}(this)),this._calendar.on("cheapest-month-click",function(e){return function(){return e._mediator.publish(t.button.CHEAPEST_MONTH)}}(this)),this._calendar.on("next-prev",function(t){return function(e){return t._mediator.publish("next-prev",e)}}(this)),this._calendar.on("select-directs-available",function(t){return function(){return t._mediator.publish("select-directs-available")}}(this)),this._calendar.on("select-no-directs",function(t){return function(){return t._mediator.publish("select-no-directs")}}(this))},t.prototype._selectDate=function(t,e,n){if(null==n&&(n=!1),this._mediator.publish("select",t,e),this._options.autoHide&&this.hide(),n)return this._calendar.selectDate(t,!0,!1)},t.prototype._initEvents=function(){return this._$$.bindEvent(this._options.element,"click",function(t){return function(e){return t.show()}}(this)),this._$$.bindEvent(this._datepicker,"click",function(t){return function(e){return e.preventDefault(),e.stopPropagation(),t._calendar._toggleMonths(!1)}}(this)),this._$$.delegateEvent(this._datepicker,"click","#js-specific-date",function(t){return function(e){return $(t._datepicker).removeClass("flexible-view"),t._calendar.renderSpecificView()}}(this)),this._$$.delegateEvent(this._datepicker,"click","#js-flexible",function(t){return function(e){return $(t._datepicker).addClass("flexible-view"),t._calendar.renderFlexibleView()}}(this)),this._$$.delegateEvent(this._datepicker,"click",".whole-month",function(e){return function(n){return e._calendar.selectDate(e._calendar._options.currentMonth),e._mediator.publish(t.button.WHOLE_MONTH),n.preventDefault()}}(this)),this._$$.delegateEvent(this._datepicker,"click",".cheapest-month",function(e){return function(n){return e._calendar.selectDate(""+(new Date).getFullYear()),e._mediator.publish(t.button.CHEAPEST_MONTH),n.preventDefault()}}(this))},t.prototype._append=function(){return document.body.appendChild(this._datepicker),this._appended=!0},t.prototype.on=function(t,e){return this._mediator.subscribe(t,e),this},t.prototype.show=function(){var t;return this._$$.removeClass(this._datepicker,"datepicker_hidden"),(null!=(t=this._calendar._options.selectedDate)?t.length:void 0)<=7?$(this._datepicker).addClass("flexible-view"):$(this._datepicker).removeClass("flexible-view"),this._calendar.selectDate(this._calendar._options.selectedDate,!0,!1),this.popover.show(),this},t.prototype.hide=function(){return this._$$.addClass(this._datepicker,"datepicker_hidden"),this.popover.hide(),this},t.prototype.setCulture=function(t){var e,n,i,r;i=this._culture;for(n in i)l.call(i,n)&&(r=i[n],(e=null!=t?t[n]:void 0)&&(this._culture[n]=e));return this._calendar.setCulture(t),this},t.prototype.getCalendar=function(){return this._calendar},t.prototype.applyCellClasses=function(t){return this._calendar.applyCellClasses(t)},t.prototype._showFullScreen=function(){return $(window).outerWidth()<=500},t.prototype._showTabsAtBottom=function(){return!this._showFullScreen()},t}()},function(t,e,n){var i,r,o,s,a,l,u,c=function(t,e){return function(){return t.apply(e,arguments)}},h=[].slice,d={}.hasOwnProperty,p=[].indexOf||function(t){for(var e=0,n=this.length;e<n;e++)if(e in this&&this[e]===t)return e;return-1};u='<% var index = 1; for (var _i = 0, _len1 = 6; _i < _len1; _i++) { %>\n   <tr>\n       <% for (var _j = 0, _len2 = 7; _j < _len2; _j++) { var item = days[\'day_\' + index]; index++; %>\n           <td data-id="<%= item.data %>" class="day <%= item.className %>">\n               <a href="#" title="<%= item.title %>"><%= item.label %></a>\n           </td>\n       <% } %>\n   </tr>\n<% } %>',o='<div class="calendar-info-bar datepicker_clearfix">\n    <button class="prev <% if(!prevActive) { %>disable<% } %>"></button>\n    <span class="current"><%= current %></span>\n    <button class="next <% if(!nextActive) { %>disable<% } %>"></button>\n</div>\n<table class="fullscreen-calendar-header">\n  <thead>\n      <tr>\n          <% for (var _i = 0, _len = weekdays.length; _i < _len; _i++) { var item = weekdays[_i]; %>\n              <td class="<%= item.className %>">\n                  <span title="<%= item.label %>"><%= item.labelMicro %></span>\n              </td>\n          <% } %>\n      </tr>\n  </thead>\n</table>\n</div>',s='<section class="flexi-calendar">\n  <h3><%= compare_months %></h3>\n  <button data-id="<%= new Date().getFullYear() %>" class="cheapest_month <% if(cheapestMonthSelected) { %>selected<% } %>"><%= cheapest_month %></button>\n  <table>\n    <% for (var _i = 0, _len = months.length; _i < _len; _i=_i+2) { var item = months[_i]; var item2 = months[_i+1];%>\n      <tr>\n        <td data-id="<%= item.id %>" <% if(current === item.id) { %> class="selected" <% } %>><button><%= item.month %><span><%=item.year%></span></button></td>\n        <% if(item2) { %>\n            <td data-id="<%= item2.id %>" <% if(current === item2.id) { %> class="selected" <% } %>><button><%= item2.month %><span><%=item2.year%></span></button></td>\n        <% } else { %><td class="future"/> <% } %>\n      </tr>\n    <% } %>\n  </table>\n</section>',l='<table class="<%= monthId %>" data-month="<%= monthId %>"><tbody><%= tbody %></tbody></table>',a='<section class="specific-calendar">\n    <%= header %>\n    <div class="container-body">\n        <%= body %>\n    </div>\n</section>',r=n(2),t.exports=i=function(){function t(e){this.applyCellClasses=c(this.applyCellClasses,this);var n,i,r,o,a,l,h;this._$$=t.dom,this._dd=t.date,this._options={container:(null!=e?e.container:void 0)||function(){throw"Container is required!"}(),dateFormatter:function(){return null},months:[],weekdays:[],weekdaysShort:[],firstDay:1,minDate:null,maxDate:null,selectedDate:null,currentMonth:null,showFullScreen:function(){return!1},enableFlexibleOptions:!1},this.$container=$(e.container),r=this._options;for(i in r)d.call(r,i)&&(h=r[i],this._isUndefined(e[i])||(this._options[i]=e[i]));this._options.currentMonth||(this._options.currentMonth=this._defaultCurrentMonth()),this.localisation=("undefined"!=typeof Skyscanner&&null!==Skyscanner&&null!=(o=Skyscanner.Api)?o.localisation:void 0)||{},this._culture={prevMonth:"xPrevious",nextMonth:"xNext",months:this._options.months,weekdays:this._options.weekdays,weekdaysShort:this._options.weekdaysShort,compare_months:"xCompare across a whole month",cheapest_month:"xFind Cheapest Month",formatYearMonth:function(t){return function(e){return t._options.dateFormatter(e,"yearMonth")}}(this),formatYear:function(t){return function(t){return t.getFullYear()}}(this),formatMonthYear:function(t){return function(e){return t._options.dateFormatter(e,"yearMonth")}}(this),formatMonth:function(t){return function(e){return t._culture.months[e.getMonth()]}}(this),formatDay:function(t){return function(e){return t._options.dateFormatter(e,"full")}}(this)},a=this._culture;for(i in a)d.call(a,i)&&(h=a[i],(n=null!=e&&null!=(l=e.culture)?l[i]:void 0)&&(this._culture[i]=n));this._mediator=new t.Mediator,this._flexiCalTmpl=t.template(s),this._tbodyTmpl=t.template(u),this.cellClasses={},this._initEvents()}return t.template=function(t){return Function("obj","var p=[],print=function(){p.push.apply(p,arguments);};with(obj){p.push('"+t.replace(/[\r\t\n]/g," ").split("<%").join("\t").replace(/((^|%>)[^\t]*)'/g,"$1\r").replace(/\t=(.*?)%>/g,"',$1,'").split("\t").join("');").split("%>").join("p.push('").split("\r").join("\\'")+"');}return p.join('');")},t.Mediator=function(){function t(){this.channels={}}return t.prototype.subscribe=function(t,e){return null==this.channels[t]&&(this.channels[t]=[]),this.channels[t].push({context:this,callback:e})},t.prototype.unsubscribe=function(t,e){var n,i,r,o,s,a;for(o=this.channels[t]||[],s=[],n=i=0,r=o.length;i<r;n=++i)a=o[n],a.callback===e?s.push(this.channels[t].splice(n,1)):s.push(void 0);return s},t.prototype.publish=function(){var t,e,n,i,r,o,s;for(i=arguments[0],t=2<=arguments.length?h.call(arguments,1):[],r=this.channels[i]||[],o=[],e=0,n=r.length;e<n;e++)s=r[e],o.push(s.callback.apply(s.context,t));return o},t}(),t.dom=("undefined"!=typeof Skyscanner&&null!==Skyscanner?Skyscanner.dom_wrapper:void 0)||function(){return{hasClass:function(t,e){return $(t).hasClass(e)},removeClass:function(t,e){return $(t).removeClass(e)},addClass:function(t,e){return $(t).addClass(e)},getAttr:function(t,e){return $(t).attr(e)},setAttr:function(t,e,n){return $(t).attr(e,n)},removeAttr:function(t,e){return $(t).removeAttr(e)},getVal:function(t){return $(t).val()},setCss:function(t,e,n){return $(t).css(e,n)},getPosition:function(t){return $(t).position()},getOffset:function(t){return $(t).offset()},getHeight:function(t){return $(t).height()},getWidth:function(t){return $(t).width()},getScrollTop:function(t){return $(t).scrollTop()},setScrollTop:function(t,e){return $(t).scrollTop(e)},delegateEvent:function(t,e,n,i){return $(t).on(e,n,i)},bindEvent:function(t,e,n){return $(t).on(e,n)}}}(),t.date={makeDateFromString:function(t){return new r(t).dateObj},makeStringFromDate:function(t){return new r(t).dateString},daysInMonth:function(e){var n,i,r,o;return r=t.date.makeStringFromDate(e).split("-"),o=r[0],i=r[1],n=r[2],new Date(o,i,0).getDate()},diff:function(t,e,n){var i;switch(t){case"month":return e.getMonth()-n.getMonth()+12*(e.getFullYear()-n.getFullYear());case"day":return i=Math.abs(e.getTime()-n.getTime()),Math.ceil(i/864e5);default:throw"diff: unknown type"}},add:function(t,e,n){switch(t){case"month":e.setMonth(e.getMonth()+n);break;case"day":e.setDate(e.getDate()+n);break;default:throw"add: unknown type"}return e},subtract:function(t,e,n){switch(t){case"month":e.setMonth(e.getMonth()-n);break;case"day":e.setDate(e.getDate()-n);break;default:throw"subtract: unknown type"}return e}},t.prototype._isUndefined=function(t){return void 0===t},t.prototype._defaultCurrentMonth=function(){var t,e,n;return this._options.selectedDate&&this._options.selectedDate.length>4?this._options.selectedDate.slice(0,7):(n=new Date,e=this._options.minDate?this._dd.makeDateFromString(this._options.minDate):null,t=this._options.maxDate?this._dd.makeDateFromString(this._options.maxDate):null,t&&!e?this._dd.makeStringFromDate(n<=t?n:t).slice(0,7):e&&!t?this._dd.makeStringFromDate(n>=e?n:e).slice(0,7):e&&t?this._dd.makeStringFromDate(e<=n&&n<=t?n:e).slice(0,7):this._dd.makeStringFromDate(n).slice(0,7))},t.prototype._findByClassName=function(t,e,n){var i;return function(){var r,o,s,a;for(s=t.getElementsByTagName(n),a=[],r=0,o=s.length;r<o;r++)i=s[r],this._$$.hasClass(i,e)&&a.push(i);return a}.call(this)[0]},t.prototype._initEvents=function(){return this._$$.bindEvent(document.body,"click",function(t){return function(){return t._toggleMonths(!1)}}(this)),this._$$.bindEvent(this._options.container,"click",function(t){return function(e){return t._toggleMonths(!1),e.stopPropagation()}}(this)),this._$$.delegateEvent(this._options.container,"click",".prev",function(t){return function(e){return t._onClickNextPrev(e,"prev"),e.preventDefault()}}(this)),this._$$.delegateEvent(this._options.container,"click",".next",function(t){return function(e){return t._onClickNextPrev(e,"next"),e.preventDefault()}}(this)),this._$$.delegateEvent(this._options.container,"click",".month",function(t){return function(e){return t._onClickMonth(e),e.preventDefault()}}(this)),this._$$.delegateEvent(this._options.container,"click",".day",function(t){return function(e){return t._onClickDate(e),e.preventDefault()}}(this)),this._$$.delegateEvent(this._options.container,"click",".flexi-calendar td",function(t){return function(e){return t._onSelectFlexiDate(e),t._mediator.publish("whole-month-click"),e.preventDefault()}}(this)),this._$$.delegateEvent(this._options.container,"click",".cheapest_month",function(t){return function(e){return t._onSelectFlexiDate(e),t._mediator.publish("cheapest-month-click"),e.preventDefault()}}(this))},t.prototype._isNextBtnActive=function(){var t;return!this._options.maxDate||(t=this._dd.daysInMonth(this._dd.makeDateFromString(this._options.currentMonth+"-01")),this._dd.makeDateFromString(this._options.maxDate)>this._dd.makeDateFromString(this._options.currentMonth+"-"+t))},t.prototype._isPrevBtnActive=function(){return!this._options.minDate||this._dd.makeDateFromString(this._options.currentMonth+"-01")>this._dd.makeDateFromString(this._options.minDate)},t.prototype._getMonths=function(){var t,e,n,i,r;if(!this._options.minDate||!this._options.maxDate)return[];for(t=this._dd.diff("month",this._dd.makeDateFromString(this._options.maxDate),this._dd.makeDateFromString(this._options.minDate))+1,i=[],e=n=0,r=t;0<=r?n<r:n>r;e=0<=r?++n:--n)i.push(this._dd.makeStringFromDate(this._dd.add("month",this._dd.makeDateFromString(this._options.minDate.slice(0,7)+"-01"),e)).slice(0,7));return i},t.prototype._getTHeadWeekdays=function(){var t,e,n,i;for(i=[],e=this._options.firstDay,t=n=0;n<=6;t=++n)i.push({label:this._culture.weekdays[e],labelMicro:this._culture.weekdaysShort[e],className:0===e||6===e?"weekend":""}),e++,e===this._culture.weekdays.length&&(e=0);return i},t.prototype._getCellClassNames=function(t){var e,n,i,r,o,s,a,l,u,c,h;return r=t.getDay(),i=this._dd.makeStringFromDate(t),a=!!this._options.minDate&&t<this._dd.makeDateFromString(this._options.minDate),o=!!this._options.maxDate&&t>this._dd.makeDateFromString(this._options.maxDate),s=t>this._dd.add("day",this._dd.makeDateFromString(this._options.currentMonth+"-01"),this._dd.daysInMonth(this._dd.makeDateFromString(this._options.currentMonth+"-01"))-1),l=t<this._dd.makeDateFromString(this._options.currentMonth+"-01"),c=i===this._dd.makeStringFromDate(new Date),h=0===r||6===r,u=function(t){return function(){var e;if(t._options.selectedDate&&!a&&!o){if(e=t._options.selectedDate.split("-").length,3===e&&i===t._options.selectedDate)return!0;if(2===e&&i.slice(0,7)===t._options.selectedDate)return!0}return!1}}(this)(),n=[],u&&n.push("selected"),c&&n.push("today"),h&&n.push("weekend"),l&&n.push("prev-month"),s&&n.push("next-month"),a&&n.push("past"),o&&n.push("future"),(e=this.cellClasses[i])&&(a||o||l||s||n.push(e)),n},t.prototype._getTBodyDays=function(t){var e,n,i,r,o,s,a,l,u,c,h;for(this.days={},u=t?t:this._options.currentMonth.split("-"),h=u[0],l=u[1],s=new Date(Date.UTC.apply(null,[parseInt(h,10),parseInt(l-1,10),1])),o=s.getDay()-this._options.firstDay,o<0&&(o+=7),r=this._dd.subtract("day",s,o),i=a=1,c=42;1<=c?a<=c:a>=c;i=1<=c?++a:--a)n=this._getCellClassNames(this._dd.makeDateFromString(this._dd.makeStringFromDate(r))),e=!(p.call(n,"past")>=0||p.call(n,"future")>=0),this.days["day_"+i]={data:this._dd.makeStringFromDate(r),className:n.join(" "),label:r.getDate(),title:e?this._culture.formatDay(r):""},this._dd.add("day",r,1);return this.days},t.prototype._onClickMonth=function(t){var e;return!!(e=this._$$.getAttr(t.currentTarget,"data-id"))&&this._updateCurrentMonth(e)},t.prototype._onChangeMonth=function(t){var e;return!!(e=this._$$.getVal(t.currentTarget))&&this._updateCurrentMonth(e)},t.prototype._updateCurrentMonth=function(t){var e;return this._options.currentMonth=t,e=(this._options.selectedDate||"").split("-").length,e>0&&e<3&&(this._options.selectedDate=this._options.currentMonth,this._mediator.publish("select-month",this._options.currentMonth)),this.render()},t.prototype._onClickDate=function(t){var e,n;return n=t.currentTarget,!this._$$.hasClass(n,"past")&&!this._$$.hasClass(n,"future")&&(!!(e=this._$$.getAttr(n,"data-id"))&&(this.selectDate(e),this._$$.hasClass(n,"directs-available")?this._mediator.publish("select-directs-available"):this._mediator.publish("select-no-directs")))},t.prototype._onSelectFlexiDate=function(t){var e,n;return n=t.currentTarget,!this._$$.hasClass(n,"past")&&!this._$$.hasClass(n,"future")&&(!!(e=this._$$.getAttr(n,"data-id"))&&this.selectDate(e))},t.prototype._onClickNextPrev=function(t,e){var n;return!this._$$.hasClass(t.currentTarget,"disable")&&(n=this._dd.makeDateFromString(this._options.currentMonth+"-01"),this._options.currentMonth=function(){switch(e){case"next":return this._dd.makeStringFromDate(this._dd.add("month",n,1)).slice(0,7);case"prev":return this._dd.makeStringFromDate(this._dd.subtract("month",n,1)).slice(0,7);default:return this._dd.makeStringFromDate(n).slice(0,7)}}.call(this),this._mediator.publish("next-prev",this._options.currentMonth),this.renderSpecificView())},t.prototype._toggleMonths=function(t){var e,n,i,r,o,s,a;if(i=this._options.container.getElementsByTagName("ul")[0],i&&(!this._monthsBusy||t)&&(this._monthsBusy=!0,this._$$[t?"removeClass":"addClass"](i,"datepicker_hidden"),o=function(){var t,e,r,o;for(r=i.getElementsByTagName("li"),o=[],t=0,e=r.length;t<e;t++)n=r[t],this._$$.hasClass(n,"selected")&&o.push(n);return o}.call(this)[0],setTimeout(function(t){return function(){return t._monthsBusy=!1}}(this),10),o&&t))return r=this._$$.hasClass(this._options.container,"dp")?-5:-10,this._$$.setCss(i,"top",r),s=o.getBoundingClientRect().top,e=this._options.container.getBoundingClientRect().top,a=-(s-e),this._$$.setCss(i,"top",a),i.getBoundingClientRect().top<0?this._$$.setCss(i,"top",-e+10):void 0},t.prototype.on=function(t,e){return this._mediator.subscribe(t,e),this},t.prototype.selectDate=function(t,e,n){var i;return null==e&&(e=!0),null==n&&(n=!0),t?(4===t.length&&(this._options.currentYear=t),t.length>4&&(this._options.currentMonth=t.slice(0,7)),this._options.selectedDate=t,i=(this._options.selectedDate||"").length<8,
this._$$[i?"addClass":"removeClass"](this._options.container,"flexi-view"),e&&this.render(),n&&this._mediator.publish("select",t),this):this},t.prototype.applyCellClasses=function(t){return this.cellClasses=null!=t?t:{},this.render()},t.prototype.setMinDate=function(t){var e;if(t&&10===t.length)return e=t.slice(0,7),this._options.minDate=t,e>this._options.currentMonth&&(this._options.currentMonth=e),this.render(),this},t.prototype.getCurrentMonth=function(){return this._options.currentMonth},t.prototype.getMonthYearLabel=function(t){return this._culture.formatMonthYear(this._dd.makeDateFromString(t+"-01"))},t.prototype.getDateBoundaries=function(){return[this._options.minDate,this._options.maxDate]},t.prototype.setCulture=function(t){var e,n,i,r;i=this._culture;for(n in i)d.call(i,n)&&(r=i[n],(e=null!=t?t[n]:void 0)&&(this._culture[n]=e));return this},t.prototype.render=function(){return this._options.enableFlexibleOptions&&this._$$.hasClass(this._options.container,"flexi-view")?this.renderFlexibleView():this.renderSpecificView()},t.prototype._getTBodyForMonth=function(e){var n;return(n=t.template(l))({monthId:e,tbody:this._tbodyTmpl({days:this._getTBodyDays(e.split("-"))})})},t.prototype.renderFlexibleView=function(){var t,e,n;return this._$$.addClass(this._options.container,"flexi-view"),t=function(){var t,e,i,r;for(i=this._getMonths(),r=[],t=0,e=i.length;t<e;t++)n=i[t],r.push({id:n,label:this._culture.formatYearMonth(this._dd.makeDateFromString(n+"-01")),year:this._culture.formatYear(this._dd.makeDateFromString(n+"-01")),month:this._culture.formatMonth(this._dd.makeDateFromString(n+"-01"))});return r}.call(this),e=this._flexiCalTmpl({current:this._options.selectedDate,months:t,compare_months:this._culture.compare_months,cheapest_month:this._culture.cheapest_month,cheapestMonthSelected:4===(this._options.selectedDate||"").length}),this._options.container.innerHTML=e},t.prototype.renderSpecificView=function(){var e,n,i,r;return this._$$.addClass(this._options.container,"calendar"),this._$$.removeClass(this._options.container,"flexi-view"),n=t.template(o),r=t.template(a),i=n({current:this.getMonthYearLabel(this._options.currentMonth),prevActive:this._isPrevBtnActive(),nextActive:this._isNextBtnActive(),prev:"previous",next:"next",weekdays:this._getTHeadWeekdays()}),e=this._getTBodyForMonth(this._options.currentMonth),this._options.container.innerHTML=r({header:i,body:e}),this._mediator.publish("render"),this},t}()},function(t,e,n){!function(e,n){t.exports=n()}(this,function(){return function(t){function e(i){if(n[i])return n[i].exports;var r=n[i]={exports:{},id:i,loaded:!1};return t[i].call(r.exports,r,r.exports,e),r.loaded=!0,r.exports}var n={};return e.m=t,e.c=n,e.p="",e(0)}([function(t,e){var n,i,r,o,s,a,l,u,c,h,d,p,g,_,f,m,y={}.hasOwnProperty;n={day:"day",month:"month",year:"year",unknown:"unknown"},d={},d[""+n.day]=1,d[""+n.month]=2,d[""+n.year]=3,o=d,p={},p[""+n.day]=/^(\d{4})-(\d{2})-(\d{2})$/,p[""+n.month]=/^(\d{4})-(\d{2})$/,p[""+n.year]=/^(\d{4})$/,r=p,g={},g[""+n.day]="Date",g[""+n.month]="Month",g[""+n.year]="FullYear",a=g,c=function(t,e){var n,i;for(n in t)if(y.call(t,n)&&(i=t[n],i===e))return n},l=function(t,e){var n,i,o,s,a,l;return(a=r[e])&&(o=t.match(a))?(i=o[0],l=o[1],s=o[2],n=o[3],new Date(parseInt(l,10),parseInt(s||1,10)-1,parseInt(n||1,10))):null},f=function(t,e){var i,r,o,s;switch(o=t.match(/.{1,2}/g),s=o[0],r=o[1],i=o[2],s="20"+s,e){case n.day:return s+"-"+r+"-"+i;case n.month:return s+"-"+r;case n.year:return s;default:return null}},i=function(t,e){var i,r,o,s;switch(o=t.split("-"),s=o[0],r=o[1],i=o[2],s=s.substring(2),e){case n.day:return""+s+r+i;case n.month:return""+s+r;case n.year:return s;default:return null}},_=function(t){return t<10?"0"+t:""+t},u=function(t,e){var i,r,o;if(!t)return null;switch(o=""+t.getFullYear(),r=_(t.getMonth()+1),i=_(t.getDate()),e){case n.day:return o+"-"+r+"-"+i;case n.month:return o+"-"+r;case n.year:return o;default:return null}},m=function(t,e,i,r){var l,h,d,p;return null==i&&(i=1),null==r&&(r=a[n.day]),l="get"+r,d="set"+r,h=new Date(t),p=o[c(a,r)]>=o[e],h[l]&&h[d]&&p&&h[d](t[l]()+i),new s(u(h,e))},h=function(t){var e,o,s,a,c;null==t&&(t=u(new Date,n.day)),"[object Date]"===Object.prototype.toString.call(t)&&(t=u(t,n.day));for(s in r)if(a=r[s],a.test(t))return c=i(t,s),o=l(t,s),[s,t,c,o];return/^wholeyear$/i.test(t)?(e=""+(new Date).getFullYear(),c=i(e,n.year),o=l(e,n.year),[n.year,""+e,""+c,o]):[n.unknown,"","",null]},s=function(){function t(t){var e;e=h(t),this.dateType=e[0],this.dateString=e[1],this.shortDateString=e[2],this.dateObj=e[3]}return t.prototype.increment=function(t){return null==t&&(t=a[this.dateType]),m(this.dateObj,this.dateType,1,t)},t.prototype.decrement=function(t){return null==t&&(t=a[this.dateType]),m(this.dateObj,this.dateType,-1,t)},t.prototype.greaterThan=function(e){var n;return e instanceof t&&(n=Math.min(this.dateString.length,e.dateString.length),this.dateString.substring(0,n)>e.dateString.substring(0,n))},t.prototype.lessThan=function(e){var n;return e instanceof t&&(n=Math.min(this.dateString.length,e.dateString.length),this.dateString.substring(0,n)<e.dateString.substring(0,n))},t.prototype.isInThePast=function(){return this.lessThan(new t)},t.prototype.isTooFarInTheFuture=function(){var e;return e=new Date,e.setFullYear((new Date).getFullYear()+1),this.greaterThan(new t(u(e,this.dateType)))},t}(),s.DATE_TYPES=n,s.UNITS=a,t.exports=s}])})},function(t,e,n){!function(e,n){t.exports=n()}(this,function(){return function(t){function e(i){if(n[i])return n[i].exports;var r=n[i]={exports:{},id:i,loaded:!1};return t[i].call(r.exports,r,r.exports,e),r.loaded=!0,r.exports}var n={};return e.m=t,e.c=n,e.p="",e(0)}([function(t,e,n){var i,r,o,s,a,l,u,c=function(t,e){return function(){return t.apply(e,arguments)}};i=n(1),s=function(){return i.getViewportWidth()<=500},l=function(){var t;return t=window.history&&"pushState"in window.history,t&&s()},a=function(){if(l())return window.history.pushState({popover:!0},"")},u=function(t,e){var n,i;return s()?(t.style.position="fixed",t.style.top=0,t.style.right=0,t.style.bottom=0,t.style.left=0):(i=e.getBoundingClientRect(),t.style.position="absolute",t.style.top=i.top+(window.pageYOffset||0)+e.offsetHeight+10+"px",t.style.right="",t.style.bottom="",n=i.left+(e.offsetWidth-t.offsetWidth)/2,n+t.offsetWidth>window.innerWidth&&(n=window.innerWidth-t.offsetWidth-10),t.style.left=(n<0?10:n)+"px")},o=function(t){var e,n,r,o,s,a,l,u,c;if(null==t&&(t={}),c=t.strings||{},u=t.hideCloseButton?"hidden":"",a="<header class='clearfix'>\n  <span class='popover-title'>"+c.titleText+"</span>\n  <button type='button' class='popover-hide'>"+c.hideText+"</button>\n</header>\n<div class='popover-content clearfix'>\n  <button type='button' class='popover-hide "+u+"'>"+c.hideText+"</button>\n</div>",n=i.createElement("div",{className:"popover hidden "+(t.customClass||""),innerHTML:a}),!(s=t.innerContent))return n;if(e=i.getElement(".popover-content",n),"string"==typeof s)e.innerHTML+=s;else if(s.length)for(o=0,l=s.length;o<l;o++)r=s[o],e.appendChild(r);else e.appendChild(s);return n},r=function(){function t(t){var e;this.popoverOptions=null!=t?t:{},this._onDocumentClick=c(this._onDocumentClick,this),this._onClick=c(this._onClick,this),this._onWindowResize=c(this._onWindowResize,this),(e=this.popoverOptions.relativeEl)&&(this.relativeEl=i.getElement(e)),this.el=o(this.popoverOptions),this._prevYOffset=null,i.addEventListener(window,"resize",this._onWindowResize),i.addEventListener(window,"popstate",function(t){return function(e){if(e.state&&e.state.popover)return t.hide()}}(this)),i.addEventListener(this.el,"click",this._onClick)}return t.prototype.show=function(t){var e;return null==t&&(t={}),this._appendToBody(),(e=t.relativeEl)&&(this.relativeEl=i.getElement(e)),i.removeClass(this.el,"hidden"),u(this.el,this.relativeEl),s()?this._freezeBodyScroll():this._releaseBodyScroll(),a(),this._normalizeFocus(),setTimeout(function(t){return function(){return i.addEventListener(document,"click",t._onDocumentClick)}}(this),0),{isMobile:s()}},t.prototype.hide=function(){return i.addClass(this.el,"hidden"),this._releaseBodyScroll(),i.removeEventListener(document,"click",this._onDocumentClick)},t.prototype._onWindowResize=function(){var t;if(!i.hasClass(this.el,"hidden"))return this.show(),"function"==typeof(t=this.popoverOptions).onWindowResize?t.onWindowResize({isMobile:s()}):void 0},t.prototype._onClick=function(t){if(i.hasClass(t.target||t.srcElement,"popover-hide"))return this.hide()},t.prototype._onDocumentClick=function(t){var e;if(!s()&&this.popoverOptions.autoHide&&(e=t.target||t.srcElement,e!==this.el&&!this.el.contains(e)&&e!==this.relativeEl))return this.hide()},t.prototype._normalizeFocus=function(){if(!i.childHasFocus(this.el)&&s())return document.activeElement.blur()},t.prototype._freezeBodyScroll=function(){return this._prevYOffset||(this._prevYOffset=window.pageYOffset),i.addClass(document.body,"popover-open")},t.prototype._releaseBodyScroll=function(){if(i.removeClass(document.body,"popover-open"),null!==this._prevYOffset)return window.scrollTo(0,this._prevYOffset),this._prevYOffset=null},t.prototype._appendToBody=function(){if(!this._appended)return document.body.appendChild(this.el)&&(this._appended=!0)},t}(),t.exports=r},function(t,e,n){!function(e,n){t.exports=n()}(this,function(){return function(t){function e(i){if(n[i])return n[i].exports;var r=n[i]={exports:{},id:i,loaded:!1};return t[i].call(r.exports,r,r.exports,e),r.loaded=!0,r.exports}var n={};return e.m=t,e.c=n,e.p="",e(0)}([function(t,e){var n,i,r,o,s,a,l,u,c,h,d,p={}.hasOwnProperty;s=function(t,e){return null==e&&(e=document),"string"==typeof t?e.querySelector(t):t||null},o=function(t,e){var n,i,r;null==e&&(e={}),n=document.createElement(t);for(i in e)p.call(e,i)&&(r=e[i],i in n?n[i]=r:n.setAttribute(i,r));return n},i=function(t,e,n){return t.addEventListener?t.addEventListener(e,n):t.attachEvent("on"+e,function(){return n.call(t,window.event)})},h=function(t,e,n){return t.removeEventListener?t.removeEventListener(e,n):t.detachEvent("on"+e,n)},n=function(t,e){return t.classList?t.classList.add(e):t.className+=" "+e},c=function(t,e){return t.classList?t.classList.remove(e):t.className=t.className.replace(RegExp("(^|\\b)"+e.split(" ").join("|")+"(\\b|$)","gi")," ")},u=function(t,e){return t.classList?t.classList.contains(e):RegExp("(^| )"+e+"( |$)","gi").test(t.className)},d=function(t,e){return u(t,e)?c(t,e):n(t,e)},r=function(t){var e;return t.contains(e=document.activeElement)||e===t},l=function(){return Math.max(document.documentElement.clientWidth,window.innerWidth||0)},a=function(t,e,n){var i;return i=new XMLHttpRequest,i.open("GET",t,!0),i.onreadystatechange=function(){var t;if(4===this.readyState)return t=this.status>=200&&this.status<400,t?e(JSON.parse(this.responseText)):n(this.status)},i.send(),i=null},t.exports={getElement:s,createElement:o,addEventListener:i,removeEventListener:h,addClass:n,removeClass:c,hasClass:u,toggleClass:d,childHasFocus:r,getViewportWidth:l,getJSON:a}}])})}])})}])})}).call(e,n(14)(t))},function(t,e,n){var i,r,o,s;i=n(48),s=n(12),o="js-trad-cabin-class-travellers-toggle",t.exports=r=function(){function t(t){this.$el=t.$el,this.model=t.model,this.eventBus=t.eventBus,this._initEvents()}return t.prototype.getTravellerPanelSelector=function(){return"#"+o},t.prototype.render=function(){return this.$el.html("<label for='"+o+"'>"+s("ktxtSearchControls_TravellersAndCabinClassTitle")+"</label>"),this.$el.append(new i({id:o,model:this.model,eventBus:this.eventBus}).$el)},t.prototype._initEvents=function(){return this.$el.on("click","#"+o,function(t){return function(e){return t.eventBus.trigger("toggle-cabin-class-travellers-view",e)}}(this))},t}()},function(t,e,n){var i,r,o,s=function(t,e){return function(){return t.apply(e,arguments)}};r=n(49),o=n(12),t.exports=i=function(){function t(t){var e,n;null==t&&(t={}),this._render=s(this._render,this),e=null!=(n=t.className)?n:"cabin-class-travellers-trigger",this.$el=$("<button type='button' id='"+t.id+"' class='"+e+"' tabindex='1'/>"),this.model=t.model,this.eventBus=t.eventBus,this.model.on("change:cabinClass change:adults change:children change:infants change:adultV2 change:childrenV2",this._render),this.$el.on("click",function(t){return function(){return t.eventBus.trigger("mixpanel-used","Travellers & Cabin Class Trigger")}}(this)),this._render()}return t.prototype._render=function(){var t,e;return e=this.model.isChildrenAgeViewEnabled()?this.model.get("adultsV2")+(null!=(t=this.model.get("childrenV2"))?t.length:void 0):this.model.get("adults")+this.model.get("children")+this.model.get("infants"),this.$el.html(r({travellers:e,shouldShowTravellers:e>1,cabinClassString:this._getCabinClassString()}))},t.prototype._getCabinClassString=function(){var t;return t=(this.model.get("cabinClass")||"").toLowerCase(),"economy"===t?o("ktxtSearchControls_CabinClassTerm_Economy"):"premiumeconomy"===t?o("ktxtSearchControls_CabinClassTerm_PremiumEconomy"):"business"===t?o("ktxtSearchControls_CabinClassTerm_Business"):"first"===t?o("ktxtSearchControls_CabinClassTerm_First"):""},t}()},function(module,exports,__webpack_require__){var translate=__webpack_require__(12);module.exports=function(obj){function print(){__p+=__j.call(arguments,"")}obj||(obj={});var __t,__p="",__j=Array.prototype.join;with(obj)__p+='<span class="down-arrow"></span>',__p+=shouldShowTravellers?"<span>"+(null==(__t=travellers)?"":__t)+" "+(null==(__t=translate("ktxtSearchControls_Travellers_Plural"))?"":__t)+", "+(null==(__t=cabinClassString)?"":__t)+"</span>":"<span>1 "+(null==(__t=translate("ktxtSearchControls_AdultsSingular"))?"":__t)+", "+(null==(__t=cabinClassString)?"":__t)+"</span>",__p+="";return __p}},function(t,e,n){var i,r,o,s,a,l=function(t,e){return function(){return t.apply(e,arguments)}};a=n(51),r=n(52),i=n(48),s="#js-multi-cabin-class-travellers-toggle",t.exports=o=function(){function t(t){this.removeRoute=l(this.removeRoute,this),this._onCabinClassTravellersToggleClick=l(this._onCabinClassTravellersToggleClick,this),this._onAddRouteClick=l(this._onAddRouteClick,this),this._onLegsChange=l(this._onLegsChange,this),this.$el=t.$el,this.model=t.model,this.eventBus=t.eventBus,this.$el.html(a({hideAddRouteButton:this.model.isMultiCityLimitReached()})),this.$el.find(".js-multi-cabin-class-travellers-toggle-marker").replaceWith(new i({id:"js-multi-cabin-class-travellers-toggle",model:this.model,eventBus:this.eventBus}).$el),this.$routesEl=this.$el.find("#js-multi-city-routes"),this.$addRouteEl=this.$el.find("#js-add-multi-city-route"),this.routeViews=[],this._initEvents()}return t.prototype.render=function(){if(this.$el.show(),!this.alreadyRendered)return _.forEach(this.model.get("legs").getAll(),function(t){return function(e){return t._appendRoute(e)}}(this)),this.alreadyRendered=!0},t.prototype.hide=function(){return this.$el.hide()},t.prototype.getTravellerPanelSelector=function(){return s},t.prototype._initEvents=function(){return this.model.on("change:legs",this._onLegsChange),this.$el.on("click","#js-add-multi-city-route",this._onAddRouteClick),this.$el.on("click",s,this._onCabinClassTravellersToggleClick)},t.prototype._onLegsChange=function(){return this.$addRouteEl[this.model.isMultiCityLimitReached()?"addClass":"removeClass"]("hidden")},t.prototype._onAddRouteClick=function(){var t;return t=this.model.get("legs"),this._appendRoute(t.add(),{focus:!0})},t.prototype._onCabinClassTravellersToggleClick=function(t){return this.eventBus.trigger("toggle-cabin-class-travellers-view",t)},t.prototype.removeRoute=function(t){var e;return e=t.getIndex(),this.model.get("legs").remove(e),this.routeViews.splice(e,1)},t.prototype._appendRoute=function(t,e){var n,i;if(null==e&&(e={}),n=$('<li class="clearfix">'),this.$routesEl.append(n),i=new r({el:n,model:this.model,eventBus:this.eventBus,legModel:t,multiCitySearchView:this}),this.routeViews.push(i),i.render(),e.focus)return n.find(i.originElSelector).focus().click()},t}()},function(module,exports,__webpack_require__){var translate=__webpack_require__(12);module.exports=function(obj){function print(){__p+=__j.call(arguments,"")}obj||(obj={});var __t,__p="",__j=Array.prototype.join;with(obj)__p+='<ol id="js-multi-city-routes" class="multi-city-routes"></ol><button type="button" id="js-add-multi-city-route" class="add-route-button ',hideAddRouteButton&&(__p+="hidden"),__p+='" tabindex="1"><span>'+(null==(__t=translate("ktxtSearchControls_AddLeg"))?"":__t)+"</span></button><div class='js-multi-cabin-class-travellers-toggle-marker'></div>"+(null==(__t=__webpack_require__(32)({extra_class:"js-search-button",has_pointer:!0,is_large:!0,text:translate("ktxtSearchControls_SearchFlights"),extra_attrs:{tabindex:"1",type:"button"}}))?"":__t);return __p}},function(t,e,n){var i,r,o,s,a,l,u=function(t,e){return function(){return t.apply(e,arguments)}};a=n(53),i=n(38),s=n(11),l=n(12),r=n(46),t.exports=o=function(){function t(t){this._triggerDestAutosuggestSelectEvents=u(this._triggerDestAutosuggestSelectEvents,this),this._triggerOriginAutosuggestSelectEvents=u(this._triggerOriginAutosuggestSelectEvents,this),this._hideMobileFacade=u(this._hideMobileFacade,this),this._onRouteDestChange=u(this._onRouteDestChange,this),this._onRouteOriginChange=u(this._onRouteOriginChange,this),this._onDestBlur=u(this._onDestBlur,this),this._onOriginBlur=u(this._onOriginBlur,this),this._onDestFocus=u(this._onDestFocus,this),this._onOriginFocus=u(this._onOriginFocus,this),this._onInputBlur=u(this._onInputBlur,this),this._onInputFocus=u(this._onInputFocus,this),this._onRemoveClick=u(this._onRemoveClick,this),this.getIndex=u(this.getIndex,this),this._setCustomDateAttributeValue=u(this._setCustomDateAttributeValue,this),this._onMinDateChange=u(this._onMinDateChange,this),this._onDateChange=u(this._onDateChange,this),this._onDatepickerSelect=u(this._onDatepickerSelect,this),this._initDatepicker=u(this._initDatepicker,this),this._initAutosuggest=u(this._initAutosuggest,this),this._initDestAutosuggest=u(this._initDestAutosuggest,this),this._initOriginAutosuggest=u(this._initOriginAutosuggest,this),this.$el=t.el,this.model=t.model,this.eventBus=t.eventBus,this.legModel=t.legModel,this.multiCitySearchView=t.multiCitySearchView,this.originElSelector=".route-origin input",this.destElSelector=".route-destination input",this.mobileFacadeSelector=".mobile-facade",this.dateElSelector=".route-date input",this.originAutosuggest=null,this.destAutosuggest=null,this._initEvents()}return t.prototype.render=function(){return this.$el.html(a({id:_.uniqueId(),date:this.legModel.get("date"),userFacingDate:this._getUserFacingDate(),fixed:this.legModel.get("fixed")})),this.legModel.get("originId")&&(this._initOriginAutosuggest(),this.$el.off("focus",this.originElSelector,this._initOriginAutosuggest)),this.legModel.get("destinationId")&&(this._initDestAutosuggest(),this.$el.off("focus",this.destElSelector,this._initDestAutosuggest)),this},t.prototype._initEvents=function(){return this.$el.on("click",".js-remove-route",this._onRemoveClick),this.$el.on("focus","input",this._onInputFocus),this.$el.on("blur","input",this._onInputBlur),this.$el.one("focus",this.originElSelector,this._initOriginAutosuggest),this.$el.one("focus",this.destElSelector,this._initDestAutosuggest),this.$el.one("focus",this.dateElSelector,this._initDatepicker),this.$el.on("autosuggest:select autosuggest:autopopulated",this.originElSelector,this._onRouteOriginChange),this.$el.on("autosuggest:select autosuggest:autopopulated",this.destElSelector,this._onRouteDestChange),this.$el.on("focus",this.originElSelector,function(t){return function(e){return setTimeout(function(){return t._onOriginFocus(e)},0)}}(this)),this.$el.on("focus",this.destElSelector,function(t){return function(e){return setTimeout(function(){return t._onDestFocus(e)},0)}}(this)),this.$el.on("blur",this.originElSelector,this._onOriginBlur),this.$el.on("blur",this.destElSelector,this._onDestBlur),this.$el.on("autosuggest:select",this.originElSelector,this._triggerOriginAutosuggestSelectEvents),this.$el.on("autosuggest:select",this.destElSelector,this._triggerDestAutosuggestSelectEvents),this.$el.on("click",this.mobileFacadeSelector,this._onMobileFacadeClick),this.$el.on("focus",this.dateElSelector,function(t){return function(){return t.datepicker.show()}}(this)),this.$el.on("keydown",this.dateElSelector,function(t){return function(e){if(9===e.which)return t.datepicker.hide()}}(this)),this.legModel.on("change:date",this._onDateChange),this.legModel.on("change:minDate",this._onMinDateChange)},t.prototype._initOriginAutosuggest=function(){var t;return this.legModel.get("originId")||(t=this.model.get("legs").get(this.getIndex()-1))&&(this.legModel.set("originId",t.get("destinationId")),this.legModel.set("originName",t.get("destinationName")),this.legModel.set("originCountryName",t.get("destinationCountryName")),this.legModel.set("originCityId",t.get("destinationCityId")),this.legModel.set("originCountryId",t.get("destinationCountryId")),this.legModel.set("originRegionId",t.get("destinationRegionId"))),this.originAutosuggest=this._initAutosuggest(this.originElSelector,!1)},t.prototype._initDestAutosuggest=function(){var t;return this.legModel.get("destinationId")||(t=this.model.get("legs").get(0))&&t.get("originId")!==this.legModel.get("originId")&&(this.legModel.set("destinationId",t.get("originId")),this.legModel.set("destinationName",t.get("originName")),this.legModel.set("destinationCountryName",t.get("originCountryName")),this.legModel.set("destinationCityId",t.get("originCityId")),this.legModel.set("destinationCountryId",t.get("originCountryId")),this.legModel.set("destinationRegionId",t.get("originRegionId"))),this.destAutosuggest=this._initAutosuggest(this.destElSelector,!0)},t.prototype._initAutosuggest=function(t,e){var n,r;return null==e&&(e=!1),n=this.$el.find(t),r=e?"destination":"origin",new i({$el:n,locale:this.model.get("locale"),market:this.model.get("market"),currency:this.model.get("currency"),defaultPlaceObj:{PlaceId:this.legModel.get(r+"Id"),PlaceName:this.legModel.get(r+"Name"),CityId:this.legModel.get(r+"CityId"),CountryName:this.legModel.get(r+"CountryName"),RegionId:this.legModel.get(r+"RegionId")},isDestination:e,isMultiDestination:!0,useAutosuggestV2:this.model.isAutosuggestV2Enabled(),eventBus:this.eventBus,fieldUsed:e?"Destination (Leg "+this.getIndex()+")":"Origin (Leg "+this.getIndex()+")"})},t.prototype._initDatepicker=function(){var t,e;if(t=this.$el.find(this.dateElSelector).get(0))return e=this._getDatepickerOptions(t),this.datepicker=new r(e),this.datepicker.on("select",this._onDatepickerSelect),this._setDatepickerDate()},t.prototype._getDatepickerOptions=function(t){return{element:t,minDate:this.legModel.get("minDate"),maxDate:this.legModel.get("maxDate"),offsetTop:10,autoHide:!0,dateFormatter:s.dateFormatter,firstDay:this.model.get("firstDay"),months:this.model.get("months"),weekdays:this.model.get("weekdays"),weekdaysShort:this.model.get("weekdaysShort"),culture:this._getDatepickerCulture(),enableFlexibleOptions:!1}},t.prototype._onDatepickerSelect=function(t){return this.legModel.setDate(t)},t.prototype._onDateChange=function(){return this.$el.find(this.dateElSelector).val(this._getUserFacingDate()),this._setCustomDateAttributeValue(),this._setDatepickerDate()},t.prototype._onMinDateChange=function(){var t;if(this.datepicker)return t=this.datepicker.getCalendar(),t.setMinDate(this.legModel.get("minDate"))},t.prototype._setDatepickerDate=function(){var t;if(this.datepicker)return t=this.datepicker.getCalendar(),t.selectDate(this.legModel.get("date"),!0,!1)},t.prototype._setCustomDateAttributeValue=function(){return this.$el.find(this.dateElSelector).attr("data-date",this.legModel.get("date"))},t.prototype._getUserFacingDate=function(){return s.getUserFacingShortDate(this.legModel.get("date"))},t.prototype._getDatepickerCulture=function(){var t;return t={},t.title=l("ktxtSearchControls_filter_depart"),t.header_label=l("ktxtSearchControls_filter_depart"),t.cancel=l("ktxtSearchControls_BtnCancel"),t},t.prototype.getIndex=function(){return this.$el.index()},t.prototype._onRemoveClick=function(){return this.multiCitySearchView.removeRoute(this),this.$el.remove()},t.prototype._onInputFocus=function(t){return $(t.currentTarget).closest("div").addClass("input-focused")},t.prototype._onInputBlur=function(t){return $(t.currentTarget).closest("div").removeClass("input-focused")},t.prototype._onOriginFocus=function(t){var e,n;if(n=this.legModel.get("originId"))return e=$(t.currentTarget),e.trigger("autosuggest:show",n),this._selectText(e.get(0)),this._hideMobileFacade(t)},t.prototype._onDestFocus=function(t){var e,n;if(n=this.legModel.get("destinationId"))return e=$(t.currentTarget),e.trigger("autosuggest:show",n),this._selectText(e.get(0)),this._hideMobileFacade(t)},t.prototype._onOriginBlur=function(t){return this._showMobileFacade(t),this._triggerOriginUsedMixpanelEvent(t)},t.prototype._onDestBlur=function(t){return this._showMobileFacade(t),this._triggerDestUsedMixpanelEvent(t)},t.prototype._onRouteOriginChange=function(t,e){return null==e&&(e={}),this._updateLegModelPlace("origin",e),this._populateMobileFacade(t,e)},t.prototype._onRouteDestChange=function(t,e){return null==e&&(e={}),this._updateLegModelPlace("destination",e),this._populateMobileFacade(t,e)},t.prototype._updateLegModelPlace=function(t,e){if(null==e&&(e={}),t)return this.legModel.set(t+"CountryName",e.CountryName||null,!0),this.legModel.set(t+"CityId",e.CityId||null,!0),this.legModel.set(t+"Name",e.PlaceName||null,!0),this.legModel.set(t+"Id",e.PlaceId||null),this.legModel.set(t+"RegionId",e.RegionId||null)},t.prototype._populateMobileFacade=function(t,e){return null==e&&(e={}),$(t.currentTarget).siblings(this.mobileFacadeSelector).text(e.PlaceId||"").removeClass("placeholder")},t.prototype._showMobileFacade=function(t){return $(t.currentTarget).siblings(this.mobileFacadeSelector).removeClass("hidden")},t.prototype._hideMobileFacade=function(t){return $(t.currentTarget).siblings(this.mobileFacadeSelector).addClass("hidden")},t.prototype._onMobileFacadeClick=function(t){return $(t.currentTarget).addClass("hidden").siblings("input").focus()},t.prototype._selectText=function(t){return setTimeout(function(){if(document.activeElement===t)return t.setSelectionRange?t.setSelectionRange(0,t.value.length):t.select()},100)},t.prototype._triggerOriginUsedMixpanelEvent=function(){return this.eventBus.trigger("mixpanel-used","Origin (Leg "+this.getIndex()+")")},t.prototype._triggerDestUsedMixpanelEvent=function(){return this.eventBus.trigger("mixpanel-used","Destination (Leg "+this.getIndex()+")")},t.prototype._triggerOriginAutosuggestSelectEvents=function(t,e){return this.eventBus.trigger("ga",{action:"OriginAutosuggest",label:this._formatAutosuggestGaEventLabel(e)})},t.prototype._triggerDestAutosuggestSelectEvents=function(t,e){return this.eventBus.trigger("ga",{action:"DestinationAutosuggest",label:this._formatAutosuggestGaEventLabel(e)})},t.prototype._formatAutosuggestGaEventLabel=function(t){var e,n,i;return null==t&&(t={}),n=t.PlaceId,i=t.Query,e=t.Index,this.model.get("locale")+"_"+i+"_"+n+"_"+e+"_MD"+this.getIndex()},t}()},function(module,exports,__webpack_require__){var translate=__webpack_require__(12);module.exports=function(obj){function print(){__p+=__j.call(arguments,"")}obj||(obj={});var __t,__p="",__j=Array.prototype.join;with(obj)__p+='<div class="route-origin"><label for="route-origin-'+(null==(__t=id)?"":__t)+'" class="visuallyhidden">'+(null==(__t=translate("ktxtSearchControls_From"))?"":__t)+'</label><input type="text" id="route-origin-'+(null==(__t=id)?"":__t)+'" placeholder="'+(null==(__t=translate("ktxtSearchControls_From"))?"":__t)+'" tabindex="1" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false"><span class="mobile-facade placeholder">'+(null==(__t=translate("ktxtSearchControls_From"))?"":__t)+'</span></div><span class="route-location-triangle"></span><div class="route-destination"><label for="route-destination-'+(null==(__t=id)?"":__t)+'" class="visuallyhidden">'+(null==(__t=translate("ktxtSearchControls_To"))?"":__t)+'</label><input type="text" id="route-destination-'+(null==(__t=id)?"":__t)+'" placeholder="'+(null==(__t=translate("ktxtSearchControls_To"))?"":__t)+'" tabindex="1" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false"><span class="mobile-facade placeholder">'+(null==(__t=translate("ktxtSearchControls_To"))?"":__t)+'</span></div><div class="route-date"><label for="route-date-'+(null==(__t=id)?"":__t)+'" class="visuallyhidden">'+(null==(__t=translate("ktxtSearchControls_filter_depart"))?"":__t)+'</label><input type="text" id="route-date-'+(null==(__t=id)?"":__t)+'" value="'+(null==(__t=userFacingDate)?"":__t)+'" data-date="'+(null==(__t=date)?"":__t)+'" placeholder="'+(null==(__t=translate("ktxtSearchControls_filter_depart"))?"":__t)+'" tabindex="1" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" readonly></div><button type="button" class="js-remove-route remove-route-button ',fixed&&(__p+="disabled"),__p+='" tabindex="1" ',fixed&&(__p+="disabled"),__p+='><span class="route-close-icon"></span></button>';return __p}},function(t,e,n){var i,r,o,s,a=function(t,e){return function(){return t.apply(e,arguments)}};o=n(55),i=n(48),s="js-jp-cabin-class-travellers-toggle",t.exports=r=function(){function t(t){this._onCabinClassTravellersToggleClick=a(this._onCabinClassTravellersToggleClick,this),this._onTripTypeChange=a(this._onTripTypeChange,this),this.render=a(this.render,this),this.$el=t.$el,this.model=t.model,this.eventBus=t.eventBus,this._initEvents()}return t.prototype.render=function(){return this.$el.html(o({isReturn:this.model.isReturn(),isOneWay:this.model.isOneWay(),isMultiCity:this.model.isMultiCity()})),this.$el.find(".cabin").append(new i({id:s,model:this.model,eventBus:this.eventBus,className:""}).$el),this},t.prototype._initEvents=function(){return this.model.on("change:tripType",this.render),this.$el.on("change","[name=trip-type]",this._onTripTypeChange),this.$el.on("click","#"+s,this._onCabinClassTravellersToggleClick)},t.prototype._onTripTypeChange=function(t){var e;if(e=$(t.currentTarget).val())return this.model.set("tripType",e),this.eventBus.trigger("mixpanel-used","Trip Type: "+e),this.eventBus.trigger("ga",{action:"SearchControlsTripTypeToggle",label:e})},t.prototype._onCabinClassTravellersToggleClick=function(t){return this.eventBus.trigger("toggle-cabin-class-travellers-view",t)},t}()},function(module,exports,__webpack_require__){var translate=__webpack_require__(12);module.exports=function(obj){function print(){__p+=__j.call(arguments,"")}obj||(obj={});var __t,__p="",__j=Array.prototype.join;with(obj)__p+='<span class="clickable trip"><select name="trip-type" tabindex="1"><option value="return" ',isReturn&&(__p+="selected"),__p+=">"+(null==(__t=translate("ktxtSearchControls_Return"))?"":__t)+'</option><option value="one-way" ',isOneWay&&(__p+="selected"),__p+=">"+(null==(__t=translate("ktxtSearchControls_OneWay"))?"":__t)+'</option><option value="multi-destination" ',isMultiCity&&(__p+="selected"),__p+=">"+(null==(__t=translate("ktxtSearchControls_MultiCity"))?"":__t)+'</option></select></span><span class="clickable cabin"></span>';return __p}},function(t,e){var n,i;i=function(){var t;t="test";try{return localStorage.setItem(t,t),localStorage.removeItem(t),!0}catch(t){return!1}},t.exports=n=function(){function t(t){this._locale=null!=t?t:"unknown",this._attributes=this._get(this._locale)}return t.prototype.localStorageSupported=i(),t.prototype.localStorageKey="hom.searchcontrols",t.prototype.set=function(t,e){var n;if(this.localStorageSupported)return this._attributes[t]=e,localStorage.setItem(this.localStorageKey,JSON.stringify((n={},n[""+this._locale]=this._attributes,n)))},t.prototype.toAttributes=function(){return this._attributes},t.prototype._get=function(){var t,e;
if(this.localStorageSupported)return e=localStorage.getItem(this.localStorageKey),t=e?JSON.parse(e)||{}:{},t[this._locale]||{}},t}()},function(t,e,n){var i,r;r=n(58),t.exports=i=function(){function t(t){null==t&&(t={}),_.forOwn(t,function(t){return function(e,n){return t.set(n,e)}}(this))}return t.prototype.cookieName="scanner",t.prototype.set=function(t,e){var n,i;if(null==e&&(e=""),n=this._getConcordance(t))return i=this.getCookie(),"function"==typeof n?i=n(i,e):i[n]=encodeURIComponent(e),i.store(240,"/","",!1)},t.prototype.getCookie=function(){return new Skyscanner.Common.Cookie(this.cookieName)},t.prototype._getConcordance=function(t){return null==t&&(t=""),r[t]||null},t}()},function(t,e){var n;n=function(t,e,n,i){switch(null==i&&(i=""),i=i.replace(/-/g,""),i=i.substring(2,i.length),i.length){case 6:n[t]=encodeURIComponent(i.substring(0,4)),n[e]=encodeURIComponent(i.substring(4,6)),n.wy="0";break;case 4:n[t]=encodeURIComponent(i),n[e]="",n.wy="0";break;default:n[t]="",n[e]="",n.wy="1"}return n},t.exports={originId:"from",destinationId:"to",adults:"adults",children:"children",infants:"infants",adultsV2:"adultsV2",cabinClass:"cabinclass",preferDirects:"preferDirects",childrenV2:function(t,e){return null==e&&(e=[]),t.childrenV2=e.join?e.join("|"):"",t},outboundAlts:function(t,e){return null==e&&(e={}),t.outboundAlts=!!e.value,t},inboundAlts:function(t,e){return null==e&&(e={}),t.inboundAlts=!!e.value,t},tripType:function(t,e){return t.tripType=e,t.rtn="return"===e,t},legs:function(t,e){var n,i,r,o,s,a,l;for(s="",r=0,a=e.length;r<a;r++)o=e[r],l=o.originId,i=o.destinationId,n=o.date,s+=(l||"")+"|"+(n||"")+"|"+(i||"")+"|";return s=s.substr(0,s.length-1),t.legs=s,t},outboundDate:function(t,e){return n("oym","oday",t,e)},inboundDate:function(t,e){return n("iym","iday",t,e)}}},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}function r(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}Object.defineProperty(e,"__esModule",{value:!0});var o=n(60),s=r(o),a=n(61),l=i(a),u=n(62),c=i(u),h=n(63),d=i(h),p=n(64),g=i(p),f=n(65),m=i(f),y=n(67),v=i(y),b=(0,v.default)("options"),C=(0,v.default)("initial_query");e.default=function(t,e,n){s.init(t.tripType),l.default.init({adults:t.adultsV2,child_ages:t.childrenV2,adults_v1:t.originalAdults||t.adults,children_v1:t.originalChildren||t.children,infants_v1:t.originalInfants||t.infants});var i=function(t,e){return"City"===t[e+"Type"]?t[e+"CityId"]:t[e+"Id"]},r=function(t,e){return"City"===t[e+"Type"]?t[e+"CityName"]:t[e+"Name"]},o=[{origin:i(t,"origin"),origin_name:r(t,"origin"),origin_iata:t.originIataCode,destination:i(t,"destination"),destination_name:r(t,"destination"),destination_iata:t.destinationIataCode,date:t.outboundDate}];s.isReturn()&&o[0]&&(o[0].return_date=t.inboundDate),s.isMultiDestination()&&(o=_.map(t.legs,function(t){return{origin:i(t,"origin"),destination:i(t,"destination"),date:t.date}}));var a={market:t.market,currency:t.currency,locale:t.locale,cabin_class:t.cabinclass,prefer_directs:t.preferDirects,trip_type:s.getType(),legs:o};_.assign(a,l.default.getQuery()),C.setStorage(a),b.setStorage({nodeName:e.nodeName||"",tripType:t.tripType,cabinClass:t.cabinclass}),d.default.filterFiles(RegExp(n.toLowerCase()+"\\.")).addLogHandler(function(t){c.default.trackMixpanel("Flight Day View Error Logged",t)}).addLogHandler(function(t){m.default.error({message:"JS Error",fields:_.assign(t,{Component:n})})}).initialize(),g.default.initialize()}},function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n="",i=function(t){return n===t},r=function(t){return n=t},o=function(){return i("multi-destination")},s=function(){return i("return")},a=function(){return i("one-way")},l=function(){return n};e.init=r,e.isMultiDestination=o,e.isReturn=s,e.isOneWay=a,e.getType=l},function(t,e,n){var i,r,o,s,a,l,u,c,h,d,p,g,f,m,y;i=n(18),o={adults:0,children:0,infants:0},y=0,g={},p={},r={},f={},m=function(t,e){return null==e&&(e=16),_.countBy(t,function(t){return t>=e?"adults":t<e&&t>1?"children":"infants"})},h=function(t){var e,n,i,s,a,l,u,c,h,d,v,b;return e=null!=(c=t.adults)?c:0,s=null!=(h=t.child_ages)?h:[],n=null!=(d=t.adults_v1)?d:0,a=null!=(v=t.children_v1)?v:0,l=null!=(b=t.infants_v1)?b:0,u={adults:n,children:a,infants:l},i=s.slice(0),_.times(e,function(){return i.push(30)}),_.assign(r,{adults:e,child_ages:s}),_.assign(f,u),_.assign(g,o,m(i,12)),_.assign(p,o,m(i)),y=i.length},s=function(t,e){return null==e&&(e=!1),(e?g:p)[t]||0},l=function(t){return f[t]||0},u=function(){return r},a=function(t){return r[t]||0},c=function(){return y},d=function(t){var e;return null==t&&(t=!1),e=t?l:s,e("children")+e("infants")===0},t.exports={init:h,getTotal:c,get:s,getData:a,getOriginal:l,getQuery:u,isAdultOnlySearch:d}},function(t,e,n){var i,r,o,s,a,l,u,c,h=[].slice;i=null,r=function(){return{}},o=function(t){return i=t,this},s=function(t){return r=t,this},l=function(t){return null==t&&(t={}),t.category||(t.category="day-view"),i("tracking-event").publish({ga:[t]}),this},c=function(t,e){return null==e&&(e={}),i("tracking-event").publish({mixpanel:[{name:t,props:_.extend(e,r(t))}]}),this},u=function(t,e,n){var o;return null==n&&(n={}),o=function(){var t;return t=("function"==typeof n?n():void 0)||n,_.extend(t,r(e))},i("tracking-event").publish({mixpanel:[{name:e,props:o,track_links:t}]}),this},a=function(){var t;return t=1<=arguments.length?h.call(arguments,0):[],i("tracking-event").publish({facebook:t}),this},t.exports={setChannel:o,setCommonPropertiesFn:s,trackGA:l,trackMixpanel:c,trackLinksMixpanel:u,trackFacebook:a}},function(t,e){var n;n=6,t.exports=new(function(){function t(){this.events=[],this.load_time=null,this.log_handlers=[]}return t.prototype.log=function(t){return _.extend(t,{"Error Url":window.location.href,"Error Referrer":document.referrer||null,"Error Event Stack":this.events,"Error Time Since Load":this.load_time?this.formatTime(this.now()-this.load_time)+"s":null}),_.invoke(this.log_handlers,"call",this,t)},t.prototype.addLogHandler=function(t){return this.log_handlers.push(t),this},t.prototype.filterFiles=function(t){return this.acceptedFiles=t,this},t.prototype.initialize=function(){var t;return this.load_time=this.now(),t=window.onerror,window.onerror=function(e){return function(n,i,r,o,s){var a,l;return t&&t.apply(e,arguments),a="Script error",!_.contains([a,a+"."],n)&&(!!e.acceptedFiles.test(i)&&(window.event&&(!r&&window.event.lineno&&(r=window.event.lineno),!o&&window.event.colno&&(o=window.event.colno),!s&&window.event.error&&(s=window.event.error),!o&&window.event.errorCharacter&&(o=window.event.errorCharacter)),l={"Error Type":s?s.name:null,"Error Message":n,"Error File":i,"Error Line Number":r||null,"Error Column Number":o||null,"Error Stacktrace":s?e.getStacktraceFromException(s):e.generateStacktrace()},e.log(l),!1))}}(this)},t.prototype.addEvent=function(t){if(this.events.unshift(this.formatTime(this.now())+"  "+t),this.events.length>n)return this.events.length=n},t.prototype.now=function(){var t;return(null!=(t=window.performance)&&"function"==typeof t.now?t.now():void 0)||("function"==typeof Date.now?Date.now():void 0)||(new Date).valueOf()||null},t.prototype.formatTime=function(t){return Math.round(t/10)/100},t.prototype.getStacktraceFromException=function(t){return t.stack||t.backtrace||t.stacktrace},t.prototype.generateStacktrace=function(){var t,e,n,i,r,o,s;e=10,t=/function\s*([\w\-$]+)?\s*\(/i;try{throw Error("")}catch(t){i=t,s=stacktraceFromException(i)}if(s)return s;for(o=[],n=arguments.callee.caller.caller;n&&o.length<e;)r=t.test(""+n)?RegExp.$1||"[anonymous]":"[anonymous]",o.push(r),n=n.caller;return s=o.join("\n")},t}())},function(t,e,n){var i,r,o;i=n(63),r=function(t){var e;return e=t.nodeName.toLowerCase(),t.id&&(e=e+"#"+t.id),"string"==typeof t.className&&(e=e+"."+t.className.replace(/  /g," ").replace(/ /g,".").replace(/\.clearfix/,"")),e},o=function(){return $(window).on("click",function(t){var e,n,o;for(e=t.target,n=0,o=r(e);n++<2&&e.parentNode&&!e.id;)o=r(e.parentNode)+">"+o,e=e.parentNode;return i.addEvent(o)})},t.exports={initialize:o}},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var r=n(66),o=i(r),s=n(71),a=i(s),l={error:"ERR",warn:"WARN",info:"INFO",debug:"DEBUG"},u=function(t,e,n){var i=_.merge((0,o.default)(),n.fields);i=_.forEach(i,function(t,e){"string"!=typeof t&&(i[e]=JSON.stringify(t))});var r={event_header:{produced_by:"FLIGHTS_DAYVIEW"},severity:l[t],message:n.message,fields:i};e(r)},c=_.reduce(["error","warn","info","debug"],function(t,e){return t[e]=function(t){u(e,(0,a.default)("applog"),t)},t},{});e.default=c},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var r=n(67),o=i(r),s=n(61),a=i(s),l=n(69),u=n(60);e.default=function(){var t=(0,o.default)("options");return{"Flight Search Node":t.get("nodeName").toUpperCase(),"Cabin Class":t.get("cabinClass"),"Trip Type":(0,u.getType)(),Adults:a.default.get("adults"),Children:a.default.get("children"),Infants:a.default.get("infants"),"Page Url":window.location.href,Referrer:document.referrer||null,"Time Since Page Loaded":(0,l.toMilliseconds)()}}},function(t,e,n){var i,r;i=n(68),r={},t.exports=function(t){return r[t]||(r[t]=new i)}},function(t,e){t.exports=function(){function t(){this.data={}}return t.prototype.get=function(t,e){var n,i,r,o,s;for(s=this.data,o=t.split("."),n=0,i=o.length;n<i;n++){if(r=o[n],!(_.isObject(s)&&r in s))return e;s=s[r]}return s},t.prototype.set=function(t,e){var n,i,r,o,s,a,l;for(s=t.split("."),o=s.length,l=this.data,i=n=0,r=s.length;n<r;i=++n)a=s[i],i===o-1&&(l[a]=e),l=a in l?l[a]:l[a]={};return this},t.prototype.has=function(t){var e;return e=this.get(t),void 0!==e&&null!==e},t.prototype.setStorage=function(t){return this.data=t},t.prototype.getStorage=function(){return this.data},t}()},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0}),e.toSeconds=e.toMilliseconds=void 0;var r=n(70),o=i(r),s=function(t){return t(window["adrum-start-time"],o.default.now())||"No Start Time"},a=function(){return s(o.default.diffInMilliseconds)},l=function(){return s(o.default.diffInSeconds)};e.toMilliseconds=a,e.toSeconds=l},function(t,e){var n,i,r,o,s,a,l,u,c,h,d,p,g,_,f,m,y,v,b,C,D,w,S;y=6e4,D=0,v=function(){return new Date},g=function(){return Math.floor(D)},b=function(t){var e,n,i;return n=t.split("T"),e=(n[0]||"").split("-"),i=(n[1]||"").split(":"),new Date(~~e[0],~~e[1]-1,~~e[2],~~i[0],~~i[1],~~i[2],~~i[3])},C=function(t){return s(b(t))},l=function(t,e){return t&&e?e-t:null},u=function(t,e){return Math.floor((e-t)/1e3)},_=function(t){var e,n;return e=Math.floor(t/60),n=t-60*e,b("2000-01-01T"+("0"+e).slice(-2)+":"+("0"+n).slice(-2)+":00")},f=function(t){return b("2000-01-01T"+t.split("T")[1])},o=function(t){var e,n,i;return e=v(),i=t.getTime(),n=60*t.getTimezoneOffset()*1e3,e.setTime(i-n),e},s=function(t){var e,n,i;return i=v(),e=t.getTime(),n=60*t.getTimezoneOffset()*1e3,i.setTime(e+n),i},a=function(t,e){var n,i;return t&&e?(n=new Date(t.getFullYear(),t.getMonth(),t.getDate()),i=new Date(e.getFullYear(),e.getMonth(),e.getDate()),Math.floor((i-n)/864e5)):null},S=function(t,e){return Math.floor(a(t,e)/7)},r=function(t,e){var n;return n=new Date(t),n.setDate(n.getDate()+e),n},h=function(t,e){var n;return(n=a(t,e))?""+(n>0?"+":"")+n:null},c=function(t,e){var n,i,r;return r=t.getFullYear(),i=("0"+(t.getMonth()+1)).slice(-2),n=("0"+t.getDate()).slice(-2),"yyyy-mm"===e?r+"-"+i:r+"-"+i+"-"+n},m=function(t){var e,n;return n=b(c(v())),e=b(t),e<n},d=function(t){return{0:"Sun",1:"Mon",2:"Tue",3:"Wed",4:"Thu",5:"Fri",6:"Sat"}[t.getDay()]},p=function(t){return{1:"January",2:"February",3:"March",4:"April",5:"May",6:"June",7:"July",8:"August",9:"September",10:"October",11:"November",12:"December"}[t.getMonth()+1]},w=function(t){return Date.prototype.toISOString?t.toISOString():t.getUTCFullYear()+"-"+this._pad(t.getUTCMonth()+1)+"-"+this._pad(t.getUTCDate())+"T"+this._pad(t.getUTCHours())+":"+this._pad(t.getUTCMinutes())+":"+this._pad(t.getUTCSeconds())+"."+(t.getUTCMilliseconds()/1e3).toFixed(3).slice(2,5)+"Z"},n=function(t){return t<10?"0"+t:t},i=function(t){return D+=t/y,setTimeout(i,t,t)},i(y/2),t.exports={now:v,diffInSeconds:u,diffInMilliseconds:l,parseDateTime:b,parseUTCDateTime:C,formatDate:c,getSliderDateTime:_,getSliderDateTimeFromStr:f,getDateOffsetStr:h,convertLocalTime:o,convertUTCTime:s,daysBetweenDates:a,weeksBetweenDates:S,addDays:r,isDateInThePast:m,getDayOfWeek:d,getMonthName:p,toISOString:w,getSessionTime:g}},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var r=n(72),o=i(r);e.default=_.curry(function(t,e){if(t&&_.isObject(e)){var n="https:"+o.default.get("endpoints.slipstream")+"/"+t;setTimeout(function(){if("XDomainRequest"in window&&null!==window.XDomainRequest){var t=new XDomainRequest;return t.open("post",n),t.send(JSON.stringify(e))}return $.ajax({type:"POST",url:n,data:JSON.stringify(e),dataType:"json"})},0)}})},function(t,e,n){t.exports=new(n(68))},function(t,e){t.exports=function(){function t(){}return t.prototype.channel=function(t){var e,n;return this.channels||(this.channels={}),n=t&&this.channels[t],n||(e=jQuery.Callbacks(),n={publish:e.fire,subscribe:e.add,unsubscribe:e.remove},t&&(this.channels[t]=n)),n},t}()},function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default={}},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}function r(t){var e=S.get("legs"),n=S.get("trip_type"),i=e[0]||{},r={"Prefer Directs":S.get("prefer_directs"),"Leg Count":e.length,"Open Jaw":c.default.isOpenJaw(e,"origin","destination"),"Trip Duration":o(e,n),"Date Offset Leg 1":d.default.daysBetweenDates(d.default.now(),d.default.parseDateTime(i.date||"")),"Loading Complete":m.default.get("loading_complete")===!0};if(_.assign(r,(0,w.default)()),_.forEach(e,function(t,e){r["Origin Code Leg "+(e+1)]=t.origin,r["Destination Code Leg "+(e+1)]=t.destination,r["Date Leg "+(e+1)]=t.date,r["Day of Week Leg "+(e+1)]=d.default.getDayOfWeek(d.default.parseDateTime(t.date))}),"multi-destination"!==n&&(r["Alternative Origins"]=i.alternative_origins||null,r["Alternative Destinations"]=i.alternative_destinations||null),"return"===n&&(r["Inbound Date"]=i.return_date,r["Inbound Day of Week"]=d.default.getDayOfWeek(d.default.parseDateTime(i.return_date||""))),_.contains(["Flight Day View Loaded","Flight Day View Completed","Flight Day View First Result Shown (Sampled)","Flight Day View Partner Selected","Flight Booking Panel Loaded"],t)&&"Flight Day View Loaded"===t&&g.default.isUser()&&(r["TravelPro User"]=!0),_.contains(["Flight Day View Partner Selected","Flight Redirect Started","Flight Day View Filter Changed","Flight Day View Sort Opened","Flight Booking Panel Loaded","Flight Booking Panel Itinerary Leg Expanded"],t)&&C.default.isOn("timetable_widget")&&m.default.get("show_timetable")===!0&&(r["Timetable Open"]=v.default.getSessionStorage().tryGetValue("timetable_collapsed")!==!0),"multi-destination"!==n&&(i.alternative_origins||i.alternative_destinations)&&(i.alternative_origins&&i.alternative_destinations&&(r["Nearby Alts Checked"]="both"),i.alternative_origins&&(r["Nearby Alts Checked"]="outbound"),i.alternative_destinations&&(r["Nearby Alts Checked"]="inbound")),"Flight Day View Completed"===t&&"multi-destination"!==n){var s=(i.alternative_origins||[]).length,a=(i.alternative_destinations||[]).length;r["Number Of Alts Returned Outbound"]=s,r["Number Of Alts Returned Inbound"]=a,r["Number Of Alts Returned Total"]=s+a}return r}function o(t,e){var n=t[0]||{},i=t[t.length-1]||{};switch(e){case"multi-destination":return s(n.date,i.date);case"return":return s(n.date,n.return_date);default:return-1}}function s(t,e){return d.default.daysBetweenDates(d.default.parseDateTime(t||""),d.default.parseDateTime(e||""))}Object.defineProperty(e,"__esModule",{value:!0}),e.getAll=void 0;var a=n(67),l=i(a),u=n(76),c=i(u),h=n(70),d=i(h),p=n(77),g=i(p),f=n(72),m=i(f),y=n(78),v=i(y),b=n(18),C=i(b),D=n(66),w=i(D),S=(0,l.default)("initial_query");e.getAll=r},function(t,e){var n,i,r,o;r=function(t,e,i){return _.some(t,function(r,o){var s,a;return s=o===t.length-1&&t.length>1?0:o+1,a=t[s],n(r,a,e,i)})},o=function(t,e,i){return n(t[1],t[0],e,i)},i=function(t,e,i){return n(t[0],t[1],e,i)},n=function(t,e,n,i){return _.result(t,n)&&_.result(t,i)&&_.result(e,n)&&_.result(e,i)&&_.result(t,i)!==_.result(e,n)},t.exports={isOpenJaw:r,isOriginOpenJaw:o,isDestinationOpenJaw:i}},function(t,e,n){var i,r;i=n(78),r=function(){var t;if(t=i.getLocalStorage("travelpro_user"))return t.tryGetValue(void 0,!0)},t.exports={isUser:r}},function(t,e,n){var i,r,o,s,a,l,u,c,h,d,p,g,f,m,y,v,b,C,D,w,S,k,x,T,E,I,A;k=n(67)("options"),c=function(t){var e,n;return null==t&&(t="fss"),(n="undefined"!=typeof Skyscanner&&null!==Skyscanner&&null!=(e=Skyscanner.Api)?e.localStorage:void 0)?n.init(t):{tryGetValue:function(){},trySetValue:function(){},tryDeleteValue:function(){}}},f=function(){var t;return t=c(),{trySetValue:function(e,n){return t.trySetValue(e,n,!1,!0)},tryGetValue:function(e){return t.tryGetValue(e,!1,!0)},tryDeleteValue:function(e){return t.tryDeleteValue(e,!1,!0)}}},h=function(t){return navigator[t]},a=function(t){var e;return null==t&&(t=h("userAgent")),e=t.toLowerCase().match(/android\s([0-9\.]*)/),(null!=e?e[1]:void 0)||null},v=function(t){return null==t&&(t=h("userAgent")),t.indexOf("Mozilla/5.0")>-1&&t.indexOf("Android ")>-1&&t.indexOf("AppleWebKit")>-1&&t.indexOf("Chrome")===-1},C=function(t){var e;return null==t&&(t=h("userAgent")),e=$(window),/iPhone/i.test(t)&&/Safari/i.test(t)&&!/(CriOS|OPiOS|Chrome|Edge|Firefox|FxiOS)/i.test(t)&&(i(e)||r(e))},w=function(t){return null==t&&(t=h("userAgent")),(/iPhone/i.test(t)||/iPad/i.test(t))&&"Safari"===k.get("browserName")},b=function(){var t,e,n;return n=Skyscanner.Api.componentContext(),t=n.browserName,e=n.browserVersion,"internet explorer"===t.toLowerCase()&&"9"===e.substring(0,1)},D=function(){return C()&&i($(window))},S=function(){return navigator.onLine},i=function(t){return 414===t.height()&&90===Math.abs(t[0].orientation)},r=function(t){return 414===t.width()&&0===t[0].orientation},E=function(){return"ontouchstart"in window||window.DocumentTouch&&document instanceof DocumentTouch},s=function(t){if(!E())return $(t).addClass("fss-no-touch")},u=function(){return $("#css-content").width()||NaN},m=function(t,e){return t?t+e.charAt(0).toUpperCase()+e.substring(1):e},d=function(){return null!==I?{isVisible:"visible"===document[m(I,"visibilityState")],changeEventName:I+"visibilitychange"}:{isVisible:null,changeEventName:null}},A=function(){var t,e,n;t=document.createElement("fakeelement"),n={transition:"transitionend",OTransition:"oTransitionEnd",MozTransition:"transitionend",WebkitTransition:"webkitTransitionEnd"};for(e in n)if(void 0!==t.style[e])return n[e]},g=function(t){return null==t&&(t=""),_.chain(t.replace(/^\?/,"").split("&")).invoke("split","=").reduce(function(t,e){return e[0]?(t[(e[0]||"").toLowerCase()]=_.escape(decodeURIComponent(e[1])),t):t},{}).value()},p=function(t){return g(window.location.search)[t]||null},T=function(t,e){var n,i,r;if(null==t&&(t=""),null==e&&(e=[]),i=t.substring(0,t.indexOf("?")),r=t.substring(t.indexOf("?")+1),!i||!r)return t;n=g(r);try{_.forEach(e,function(t){return delete n[t]})}catch(t){}return""+i+(_.isEmpty(n)?"":"?"+$.param(n))},x=function(t,e){return null==e&&(e=!1),e?document.location.replace(t):document.location.href=t},o=function(t,e,n){return t?e&&n?t.indexOf("?")>=0?t.replace(/(\?[^#]+)/,"$1&"+e+"="+n):t.replace(/((\/)*[^#]*|(.*)$)/,"$1?"+e+"="+n):t:null},I=function(){var t,e,n,i;for(n=["","moz","ms","webkit"],t=0,e=n.length;t<e;t++)if(i=n[t],m(i,"hidden")in document)return i;return null}(),y=function(t,e,n){var i,r;return r=document.createElement("script"),r.type=t.type||"text/javascript",r.async=!0,e&&(r.onload=e),n&&(r.onerror=n),t.anonymous&&(r.crossOrigin="anonymous"),r.src=0===t.src.indexOf("//")||0===t.src.indexOf("http")?t.src:""+("https:"===document.location.protocol?"https://":"http://")+document.location.host+t.src,i=document.getElementsByTagName("script")[0],i.parentNode.insertBefore(r,i)},l=function(t){var e;return null==t&&(t=""),(null!=(e=new Skyscanner.Common.Cookie(t))?e[0]:void 0)||null},t.exports={getLocalStorage:c,getSessionStorage:f,getNavigator:h,isAndroid:v,getAndroidVersion:a,isIphoneSixPlus:C,isIphoneSixPlusLandscape:D,isMobileSafari:w,isIe9:b,isOnline:S,supportsTouch:E,allowMouseEvents:s,getCssMaxWidth:u,getPageVisibility:d,whichTransitionEvent:A,getQueryStringParams:g,getQueryStringParam:p,addQueryStringParam:o,removeURLParams:T,redirect:x,injectScript:y,getCookieValue:l}},function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t,e){var n=parseInt(t,10);return _.isNaN(n)?e:n}}]);